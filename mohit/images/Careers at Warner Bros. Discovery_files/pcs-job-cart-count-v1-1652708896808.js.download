!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue"),require("../../../../common/v1/src")):"function"==typeof def&&def.amd?def("pcs-job-cart-count-v1",["vue","../../../../common/v1/src"],t):((e=e||self).phw=e.phw||{},e.phw.PcsJobCartCountV1=t(e.Vue,e.PcsCommon))}(this,function(d,o){"use strict";d=d&&d.hasOwnProperty("default")?d.default:d,o=o&&o.hasOwnProperty("default")?o.default:o;var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};var l="undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys;function y(o,n,r){(r?Reflect.getOwnMetadataKeys(n,r):Reflect.getOwnMetadataKeys(n)).forEach(function(e){var t=r?Reflect.getOwnMetadata(e,n,r):Reflect.getOwnMetadata(e,n);r?Reflect.defineMetadata(e,t,o,r):Reflect.defineMetadata(e,t,o)})}var v={__proto__:[]}instanceof Array;function h(e){"undefined"!=typeof console&&console.warn("[vue-class-component] "+e)}var m=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function r(e,n){void 0===n&&(n={}),n.name=n.name||e._componentTag||e.name;var r=e.prototype;Object.getOwnPropertyNames(r).forEach(function(t){if("constructor"!==t)if(-1<m.indexOf(t))n[t]=r[t];else{var o=Object.getOwnPropertyDescriptor(r,t);void 0!==o.value?"function"==typeof o.value?(n.methods||(n.methods={}))[t]=o.value:(n.mixins||(n.mixins=[])).push({data:function(){var e;return(e={})[t]=o.value,e}}):(o.get||o.set)&&((n.computed||(n.computed={}))[t]={get:o.get,set:o.set})}}),(n.mixins||(n.mixins=[])).push({data:function(){return function(n,e){var t=e.prototype._init;e.prototype._init=function(){var e=this,t=Object.getOwnPropertyNames(n);if(n.$options.props)for(var o in n.$options.props)n.hasOwnProperty(o)||t.push(o);t.forEach(function(t){"_"!==t.charAt(0)&&Object.defineProperty(e,t,{get:function(){return n[t]},set:function(e){n[t]=e},configurable:!0})})};var o=new e;e.prototype._init=t;var r={};return Object.keys(o).forEach(function(e){void 0!==o[e]&&(r[e]=o[e])}),!(e.prototype instanceof d)&&0<Object.keys(r).length&&h("Component class must inherit Vue or its descendant class when class property is used."),r}(this,e)}});var t=e.__decorators__;t&&(t.forEach(function(e){return e(n)}),delete e.__decorators__);var c,i,u,o,a,s=Object.getPrototypeOf(e.prototype),p=s instanceof d?s.constructor:d,f=p.extend(n);return c=f,i=e,u=p,Object.getOwnPropertyNames(i).forEach(function(e){if(!O[e]){var t=Object.getOwnPropertyDescriptor(c,e);if(!t||t.configurable){var o,n,r=Object.getOwnPropertyDescriptor(i,e);if(!v){if("cid"===e)return;var a=Object.getOwnPropertyDescriptor(u,e);if(o=r.value,n=typeof o,null!=o&&("object"==n||"function"==n)&&a&&a.value===r.value)return}0<=b.indexOf(e)&&h("Static property name '"+e+"' declared on class '"+i.name+"' conflicts with reserved property name of Vue internal. It may cause unexpected behavior of the component. Consider renaming the property."),Object.defineProperty(c,e,r)}}}),l&&(y(o=f,a=e),Object.getOwnPropertyNames(a.prototype).forEach(function(e){y(o.prototype,a.prototype,e)}),Object.getOwnPropertyNames(a).forEach(function(e){y(o,a,e)})),f}var b=["cid","super","options","superOptions","extendOptions","sealedOptions","component","directive","filter"],O={prototype:!0,arguments:!0,callee:!0,caller:!0};function e(t){return"function"==typeof t?r(t):function(e){return r(e,t)}}e.registerHooks=function(e){m.push.apply(m,e)};var a={v1:{ddoKey:"jobCartCountV2"}},c=(t.prototype.makeDDORequest=function(t,e){return o.FetchService.fetchDdo(t,e).then(function(e){return e&&e[t]})},t);function t(){}var i,u,s,p=function(){},f="pcs-job-cart-count-v1",C="ph:ea:savedjobcount";function g(){this.constructor=u}function j(){var t=null!==i&&i.apply(this,arguments)||this;return t.elementTag=f,t.bindableModel=new p,t.jobCartCount=0,t.responseRecieved=!1,t.resultUpdated=!1,t.jobCartCountService=new c,t.updatedJobCartCount=function(){document.addEventListener("ph:ex:jobCartUpdatedCount",function(e){t.getJobCartCount()})},t}return{component:(i=o.BaseComponent,n(u=j,s=i),u.prototype=null===s?Object.create(s):(g.prototype=s.prototype,new g),j.prototype.widgetViewLoaded=function(){this.element=this.$el},j.prototype.widgetReady=function(){this.getJobCartCount(),this.updatedJobCartCount(),this.lookingforCount()},j.prototype.created=function(){},j.prototype.contentModelLoaded=function(){},j.prototype.getJobCartCount=function(){var t=this;this.jobCartCountService.makeDDORequest(a.v1.ddoKey,{}).then(function(e){e&&(t.jobCartCount=e.result||0,t.responseRecieved&&(t.resultUpdated=!0),setTimeout(function(){t.resultUpdated=!1},200),"601"!==e.status&&601!==e.status&&"600"!==e.status&&600!==e.status||(t.responseRecieved=!0,t.raiseCustomEvent(C,{jobCount:t.jobCartCount})))})},j.prototype.lookingforCount=function(){var o=this;document.addEventListener("ph:ea:lookingforcount",function(e){var t=e.detail||{};!o.responseRecieved||t?o.getJobCartCount():o.raiseCustomEvent(C,o.jobCartCount)})},j=function(e,t,o,n){var r,a=arguments.length,c=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var i=e.length-1;0<=i;i--)(r=e[i])&&(c=(a<3?r(c):3<a?r(t,o,c):r(t,o))||c);return 3<a&&c&&Object.defineProperty(t,o,c),c}([e({name:f})],j))}});
