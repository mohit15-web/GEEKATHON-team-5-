define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-global-search-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"globalSearchV3",ddoKeyEvent:"globalSearchEventV3",landingpageddoKey:"getBusinessRules",ddoKeyMOSSEARCH:"globalSearchMOSTitles",ddoKeyGlobalSearchConfig:"globalSearchConfig",ddoKeyAgp:"getAgpMetaData",ddoKeyEagerLoad:"eagerLoadRefineSearch"}},t.globalSearchConfig={globalSearchFeature:{mobileSearch:!0,militarySearch:!1,mobileSearchWithHeaderIcon:!1}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-global-search-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.commonService=e,this.params={}}return e.prototype.getSearchResults=function(e,t,i){var o=this.params;return i&&i.searchValue&&(delete o.field,delete o.sub_field,o.keywords=i.searchValue,o.category="category",o.location="location"),i&&i.condition&&i.condition.length&&(o.condition=i.condition),"globalSearchV3"==t&&(o.field="category",o.sub_field="internalCategoryId",o.location_size=i.locationSize||2,o.category_size=2,o.job_size=3),this.commonService.getDDO(e,t,o).then(function(e){var i=e[t];if(i.jobLocations&&i.jobLocations.locations){var o=i.jobLocations.locations,r={};for(var s in o){var n=[];if(o.hasOwnProperty(s)){var a=o[s];for(var l in a){var c=a[l];c.location=c.name,c.field=s,n.push(c)}}r[s]=n}i[t]={locations:r}}return i})},e.prototype.getLandingpageKey=function(e,t,i){return void 0===i&&(i={}),this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.getMOSSearchResults=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.makeDDOrequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.GlobalSearchService=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-global-search",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-global-search-config","./ph-global-search-service"],function(e,t,i,o,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=".ph-header-search-icon",l=".ph-a11y-search-box, input",c=["allCategories","suggestedJobs","suggestedLocations","suggestedCategories","suggestedRecentSearches","suggestedKeywords"],p=function(e){function t(t,i,o,r,s,n,l){var c=e.call(this,t,i,p.elementTag)||this;return c.element=t,c.commonService=i,c.globalSearchService=o,c.eventAggregator=r,c.localStorage=s,c.WidgetConfig=n,c.geoLocationService=l,c.placeholderText="Enter job title",c.showTitle=!0,c.showCaption=!0,c.searchValue="",c.arrowNavigation=!0,c.mosVisibleCategories=!1,c.isEmptyredirection=!1,c.reloadOnClear=!1,c.checkValidation=!1,c.searchUrl="search-results",c.isLandingPage=0,c.categoryColumnCount=2,c.inlineSearch=!0,c.preFillSearchedKey=!0,c.showDropDown=!1,c.showAllJobCategories=!0,c.showJobSuggestions=!0,c.showRecentSearches=!0,c.isDisabled=!0,c.recentlySearchedKeys=c.localStorage.getItem("globalSearch"),c.recentSearchStorage=[],c.itemSBHasFocus=!1,c.isEnterClick=!0,c.keywordsSearched=[],c.suggestedJobResults=[],c.suggestedJobResultsNames=[],c.suggestedMOSKeywords=[],c.gsFeature={},c.isMobileEnabled=!1,c.isMilitarySearch=!1,c.isMOSSearchEnabled=!0,c.isMOSClick=!1,c.mosCode="",c.showError=!1,c.isClearsearch=!1,c.suggestedKeywords=[],c.copyMOSKeywords=[],c.gsClrTxt=0,c.isSearchInFocus=!1,c.subscriptions=[],c.resultsUpdated=!1,c.searchBoxBackdrop=!1,c.isHeadSearchEnabled=!1,c.enableSuggestionResults=[],c.agpData={},c.avoidInitialValueChanged=!1,c.userLocation={},c.allSuggestions=c.getAllJobSuggestions(),c.handleInputFocus=function(e){if(c.element.firstElementChild.classList.contains("ph-mobile-search-backdrop")){c.element.firstElementChild.classList.add("ph-mobile-search-enabled");var t=e&&e.target&&e.target.closest(".ph-search-group"),i=c.element.querySelector(".form-group");if(t&&i&&c.isMobileEnabled&&(i.classList.contains("ph-mobile-search")||i.classList.add("ph-mobile-search"),t.classList.contains("ph-mobile-search")||t.classList.add("ph-mobile-search")),document.body.scrollTop=0,document.body.style.overflow="hidden",c.element.querySelector(a)&&c.gsFeature.mobileSearchWithHeaderIcon){c.isHeadSearchEnabled=!0;var o=c.element.querySelector("input.ph-input-search");o&&o.focus()}}},c}return __extends(t,e),p=t,t.prototype.getAllJobSuggestions=function(){this.showDropDown=!1;var e=this.isFull;return{show:null,updateShow:function(){var t={jobs:e(this.jobs),locations:e(this.locations),categories:e(this.categories),keywords:e(this.keywords),searched:e(this.searched),all:!1};for(var i in t)if(t.hasOwnProperty(i)&&1==t[i]){t.all=!0;break}return t},jobs:null,locations:null,categories:null,keywords:null,searched:null,boundaries:null}},t.prototype.created=function(){this.showDropDown=!1,this.fetchResultsConfig()},t.prototype.attached=function(){var t=this;if(e.prototype.attached.call(this),!this.hasFeature&&!this.hasFeature("auto-complete","a11y")){var i=this.handleActionOutsideScope.bind(this);document.addEventListener("mouseup",i,!1),document.addEventListener("keyup",this.keyUpCallback.bind(this),!1)}if(this.isMilitarySearch=!(!this.element||!this.element.getAttribute("ph-mos-search")),this.gsFeature=this.commonService.getSiteSettings("globalSearchFeature")||{},this.locationSize=this.gsFeature.locationSize||2,this.isMOSSearchEnabled=this.isMilitarySearch||this.gsFeature.militarySearch,this.gsFeature.isLatLongSearchEnabled&&this.getLocationData(),2==this.categoryColumnCount&&this.gsFeature&&this.gsFeature.categoryColumnCount&&(this.categoryColumnCount=this.gsFeature.categoryColumnCount),this.isDisabled=!!this.isMilitarySearch||this.checkValidation,this.preFillSearchedKey&&(this.searchValue=e.prototype.getSearchKeyword.call(this)||""),!this.isLandingPage){var o=this.commonService.getSiteSettings("enableSearchCondition");this.isLandingPage=1==o?1:0}if(this.isLandingPage&&(this.rk=this.rk?this.rk:this.commonService.phenomAppManager.getSessionParams("rk")||this.commonService.phenomAppManager.getSessionParams("lpKeyVal"),this.rk&&this.rk.length>0)){var r={},n={};return n.landingPageKeys=[this.rk],r.pageIdentifier=n,this.globalSearchService.getLandingpageKey(p.elementTag,s.WidgetConfig[p.version].landingpageddoKey,r).then(function(e){e&&e.data&&e.data[t.rk]&&(t.condition=e.data[t.rk].condition)})}var a=this.commonService.getSiteSettings("globalSearchFeature");a&&Object.keys(a).length&&a.mobileSearch&&setTimeout(function(){window.addEventListener("resize",function(){t.eventAggregator.publish("globalsearchv3resize",{})}),t.handleSearchOnWindowResize()},500),this.subscriptions.push(this.eventAggregator.subscribe("globalsearchv3resize",function(e){t.handleSearchOnWindowResize()})),setTimeout(function(){var e=t.element.querySelector(l);e&&e.addEventListener("focus",function(){t.searchBoxBackdrop=!0})},100),this.fetchAgpFilterBasedJobs()},t.prototype.getLocationData=function(){var e=this;this.eventAggregator.subscribe("GeoLocationDetails",function(t){o.logger.debug("payload location ::"+t),e.userLocation=t}),this.geoLocationService.askForLocation(),setTimeout(function(){Object.keys(e.userLocation).length||e.geoLocationService.getGeoLocation().then(function(t){e.userLocation=t})},250)},t.prototype.fetchAgpFilterBasedJobs=function(){var e=this.commonService.getCachedDDO(s.WidgetConfig[p.version][p.ddoKeyAgp]),t=this.commonService.getCachedDDO(s.WidgetConfig[p.version][p.ddoKeyEagerLoad]);if(e&&e.data&&e.data.lpKeyData&&t){this.agpData={totalHits:t.totalHits,bannerText:e.data.lpKeyData.bannerText};var i=window.location.pathname;i&&(this.searchUrl=i.replace("/",""))}},t.prototype.fetchResultsConfig=function(){var e=this;this.globalSearchService.makeDDOrequest(p.elementTag,s.WidgetConfig[p.version][p.ddoKeyGlobalSearchConfig],{}).then(function(t){t&&t.data&&t.data.configured?e.enableSuggestionResults=t.data.data||[]:e.enableSuggestionResults=c},function(t){e.enableSuggestionResults=c,new Error(t)})},t.prototype.isSuggestionVisible=function(e){return-1==this.enableSuggestionResults.indexOf(e)},t.prototype.handleSearchOnWindowResize=function(){var e=document.querySelector(a),t=window.innerWidth;if(e&&this.gsFeature&&this.gsFeature.mobileSearch&&this.gsFeature.mobileSearchWithHeaderIcon)this.isMobileEnabled=!0,t<=767?e.addEventListener("click",this.handleInputFocus):(this.isMobileEnabled=!1,e.removeEventListener("click",this.handleInputFocus),this.clearBackdrop());else if(t<=767){this.isMobileEnabled=!0;for(var i=this.element.querySelectorAll("input.ph-input-search")||[],o=0;o<i.length;o++)i[o].addEventListener("focusin",this.handleInputFocus)}else{this.isMobileEnabled=!1;for(var i=this.element.querySelectorAll("input.ph-input-search")||[],o=0;o<i.length;o++)i[o].removeEventListener("focusin",this.handleInputFocus);this.clearBackdrop()}},t.prototype.handleSelection=function(e){if(this.inlineSearch)for(var t=e.target;t!=this;){if("A"==t.nodeName){var i=t.getAttribute("data-option-title");return void(i?this.searchValue=i:console.warn("value not found"))}t=t.parentNode}},t.prototype.handleActionOutsideScope=function(e){var t=e.target;if(13===e.keyCode||void 0==e.keyCode){for(var i=!0,o=void 0;t;)if(t=t.parentElement,o=t&&t.className){if(null==t||-1==o.indexOf("phs-global-search"))i=!0;else if(o.indexOf("phs-global-search")>=0){i=!1;break}}else t||(i=!0);i&&this.handleBlur()}else 27!=e.keyCode&&9!=e.keyCode||this.handleBlur()},t.prototype.handleBlur=function(){this.showDropDown=this.showAllJobCategories=this.showJobSuggestions=!1},t.prototype.handleSuggestedKeysArrowKeysData=function(){function e(){return t=document.querySelectorAll(".phs-keyword-suggestions li a"),i=t.length-1,o>=i?o=i:o<0&&(o=0),t[o]}var t,i,o=-1;return{next:function(){return o+=1,e()},prev:function(){return o-=1,e()}}},t.prototype.handleCategoryArrowKeysData=function(){function e(e){r=0==e&&0==r?n:0,o=i==o+1?0:o+1,n=t[o]?t[o].length-1:n}var t=this.allJobCategories,i=t.length,o=0,r=-1,s=1,n=t[o].length-1;return{next:function(){return s=1,r==n?e(s):r++,{column:o,delta:r}},prev:function(){return s=0,0==r?e(s):r--,{column:o,delta:r}},reset:function(){r=s?r-1:r+1}}},t.prototype.searchValueChanged=function(t){var i=e.prototype.getSearchKeyword.call(this);if(this.preFillSearchedKey&&!this.avoidInitialValueChanged&&this.searchValue==i)return void(this.avoidInitialValueChanged=!0);var o=this,r=o.searchValue||"",s=r&&r.length>0;s&&(o.showDropDown=!0),o.showDropDown&&(s?(o.showAllJobCategories||o.showJobSuggestions)&&(this.isMilitarySearch?(this.fetchMilitaryJobSuggestions(),this.mosVisibleCategories&&o.fetchJobSuggestions()):o.fetchJobSuggestions()):o.fetchJobCategories()),o.isDisabled=!s},t.prototype.handleCategoryOptions=function(e,t){var i,o;switch(e.keyCode){case 37:case 39:break;case 38:this.arrowNavigation&&(o=t.prev(),(i=document.querySelector("#phs-lia_"+o.column+"_"+o.delta))&&i.focus());break;case 40:this.arrowNavigation&&(o=t.next(),(i=document.querySelector("#phs-lia_"+o.column+"_"+o.delta))&&i.focus())}},t.prototype.handleSuggestedKeyOptions=function(e,t){var i;switch(e.keyCode){case 38:this.arrowNavigation&&(i=t.prev())&&i.focus();break;case 40:this.arrowNavigation&&(i=t.next())&&i.focus()}},t.prototype.keyUpCallback=function(e){if(9===e.keyCode){var t=document.querySelectorAll(".ph-suggestion-focus-block");if(t.length)for(var i=0,o=t;i<o.length;i++){var r=o[i],s=r&&r.contains(document.activeElement);s?this.itemSBHasFocus=!0:(this.handleBlur(),this.itemSBHasFocus=!1)}}if(27===e.keyCode)return this.handleBlur(),!0},t.prototype.arrowKeyUp=function(e){var t=null;if(13!==e.keyCode||!1!==this.itemSBHasFocus||this.isClearsearch)1==this.showJobSuggestions?(t=this.allSuggestions.boundaries,this.handleSuggestedKeyOptions(e,t)):1==this.showAllJobCategories&&(t=this.allJobCategories.boundaries,this.handleCategoryOptions(e,t));else{var i=e.target&&e.target.href||"";""===i&&this.handleSubmitClick(i)}},t.prototype.handleItemFocus=function(e){switch(e.type){case"focus":console.info("hello")}},t.prototype.clearBackdrop=function(e){var t=this.element.querySelectorAll(".ph-search-group"),i=this.element.querySelector(".form-group"),o=this.element.querySelector(".ph-mobile-search-enabled");if(t&&i&&o){o.classList.remove("ph-mobile-search-enabled"),i.classList.contains("ph-mobile-search")&&i.classList.remove("ph-mobile-search");for(var r=0;r<t.length;r++)t[r].classList.contains("ph-mobile-search")&&t[r].classList.remove("ph-mobile-search");if(this.showDropDown=!1,document.body.style.overflow="",e&&e.target){var s=document.querySelector(a),n=this.element.querySelector(".phs-search-submit");s&&this.gsFeature&&this.gsFeature.mobileSearch&&this.gsFeature.mobileSearchWithHeaderIcon?n=s:document.body.style.overflow="initial",n&&n.focus()}}},t.prototype.handleFocus=function(e){var t=this,i=t.searchValue||"";switch(e.type){case"focus":i.length>0?t.isMilitarySearch?t.fetchMilitaryJobSuggestions():t.fetchJobSuggestions():t.isMilitarySearch?this.mosVisibleCategories&&t.isMilitarySearch&&t.fetchJobCategories():t.fetchJobCategories()}var o=document.querySelector("#searchSuggest");o&&o.classList.contains("hide")&&(o.classList.remove("hide"),o.classList.add("show"))},t.prototype.isFull=function(e){return null!=e&&"object"==typeof e&&Object.keys(e).length>0},t.prototype.clearSearch=function(e){var t=this;if(this.isClearsearch=!0,setTimeout(function(){t.isClearsearch=!1},200),this.reloadOnClear){var i=window.location.origin+window.location.pathname;window.location.assign(i)}else e.preventDefault(),this.isDisabled=!0,this.showDropDown=!1,this.searchValue="",this.gsClrTxt=1,this.element.querySelector(l)&&(this.element.querySelector(l).focus(),setTimeout(function(){t.searchBoxBackdrop=!0},100))},t.prototype.isEmpty=function(e){return!e||0==e.length},t.prototype.fetchJobSuggestions=function(){var e=this,t={},i=this.allSuggestions;t.searchValue=this.searchValue,this.condition&&this.condition.length>0&&(t.condition=this.condition);var o=this.fetchMilitaryJobSuggestions(!0),r=this.globalSearchService.getSearchResults(p.elementTag,s.WidgetConfig[p.version][p.ddoKeyEvent],t).then(function(t){if(e.suggestedJobs=t.jobTitles.data.titles,e.suggestedKeywords=t.jobTitles.data.suggestions||[],i.keywords=e.suggestedKeywords,e.suggestedJobs){for(var o=0;o<e.suggestedJobs.length;o++){var r=e.suggestedJobs[o].title.replace(/<em>/g,"");r=r.replace(/<\/em>/g,"")}i.jobs=e.suggestedJobs}if(t.jobLocations&&t.jobLocations.locations){if(e.suggestedLocations=[],t.jobLocations.locations.city)for(var s=0;s<t.jobLocations.locations.city.length;s++)e.suggestedLocations.push(t.jobLocations.locations.city[s]);if(t.jobLocations.locations.country)for(var s=0;s<t.jobLocations.locations.country.length;s++)e.suggestedLocations.push(t.jobLocations.locations.country[s]);if(t.jobLocations.locations.state)for(var s=0;s<t.jobLocations.locations.state.length;s++)e.suggestedLocations.push(t.jobLocations.locations.state[s]);i.locations=t.jobLocations.locations}if(e.suggestedCategories=t.jobCategories.data.agg,e.suggestedCategories){for(var s=0;s<e.suggestedCategories.length;s++)e.suggestedCategories[s].key=e.suggestedCategories[s].category;i.categories=e.suggestedCategories}return e.populateRecentSearches(),document.activeElement===e.element.querySelector(l)&&(e.showDropDown=!0),e.showAllJobCategories=!1,e.showJobSuggestions=!0,i.show=i.updateShow(),e.isEmpty(e.suggestedJobs)&&e.isEmpty(e.suggestedLocations)&&e.isEmpty(e.suggestedCategories)&&!(e.keywordsSearched&&e.keywordsSearched.length>0)&&e.isEmpty(e.suggestedKeywords)||(e.element.querySelector(".job-filter"),e.element.querySelector(".phs-keywords"),e.element.querySelectorAll(".phs-keyword-suggestions li")),e.suggestedJobResults=[],e.suggestedJobResultsNames.length&&e.suggestedJobResultsNames.map(function(t){e.suggestedJobResults="keywordsSearched"==t?e.suggestedJobResults.concat(e[t].slice(0,3)):e.suggestedJobResults.concat(e[t])}),e.allSuggestions.searched&&(e.suggestedJobResults=e.suggestedJobResults.concat(e.allSuggestions.searched.slice(0,3))),e.suggestedJobResults},function(e){new Error(e)});return Promise.all([r,o]).then(function(t){return e.resultsUpdated=!0,setTimeout(function(){e.resultsUpdated=!1},1e3),t[0].concat(t[1])})},t.prototype.setMOSKeyword=function(e,t){this.setMOSKeywordValue(e,t),t&&"click"==t.type&&this.handleSubmitClick()},t.prototype.setMOSKeywordValue=function(e,t){if(e){var i="";e.title&&(i=e.title),this.isDisabled=!1,this.searchValue=i.replace(/<(?:.|\n)*?>/gm,""),this.mosCode=e.mos_code}},t.prototype.setMOSFocusField=function(e){-1==e&&(e=0);var t=!1;if(!this.isMOSClick&&this.searchValue.length&&this.suggestedMOSKeywords&&this.suggestedMOSKeywords.length){this.showDropDown=!1;for(var i=0;i<this.suggestedMOSKeywords.length;i++)this.searchValue==this.suggestedMOSKeywords[i]&&(t=!0);t||(e=e||0==e?e:0,this.suggestedMOSKeywords[e]&&this.suggestedMOSKeywords[e].title&&this.suggestedMOSKeywords[e].title.length&&(this.searchValue=this.suggestedMOSKeywords[e].title),this.suggestedMOSKeywords[e]&&this.suggestedMOSKeywords[e].mos_code&&(this.mosCode=this.suggestedMOSKeywords[e].mos_code))}},t.prototype.fetchMilitaryJobSuggestions=function(e){var t=this;if(!this.isMOSSearchEnabled)return new Promise(function(e,t){e([])});"undefined"!=typeof event&&"object"==typeof event&&(this.focusedElement=event&&event.target),this.isMOSClick=!1;var i=(this.allSuggestions,{});return i.size=3,i.keywords=this.searchValue,this.isMilitarySearch&&(i.size=5),this.condition&&this.condition.length>0&&(i.condition=this.condition),this.globalSearchService.getMOSSearchResults(p.elementTag,s.WidgetConfig[p.version][p.ddoKeyMOSSEARCH],i).then(function(i){return i=i&&i.data||{},i&&i.results&&i.results.length?(t.suggestedMOSKeywords=i.results,t.isDisabled=!1):i.searchConfig&&(t.suggestedMOSKeywords=[],t.isDisabled=!0,t.isMOSSearchEnabled=i.searchConfig.isMOSSearchEnabled),document.activeElement===t.element.querySelector(l)&&(t.showDropDown=!0),e||(t.resultsUpdated=!0,setTimeout(function(){t.resultsUpdated=!1},1e3)),t.suggestedMOSKeywords})},t.prototype.fetchJobCategories=function(){var e=this,t={};return t.searchValue=this.searchValue,this.condition&&this.condition.length>0&&(t.condition=this.condition),t.locationSize=this.locationSize,this.globalSearchService.getSearchResults(p.elementTag,s.WidgetConfig[p.version][p.ddoKey],t).then(function(t){return t.data.category&&t.data.category.forEach(function(e){e.key||(e.key=e.category)}),document.activeElement===e.element.querySelector(l)&&(e.showDropDown=!0),e.populateRecentSearches(),e.allJobCategories=e.singleArrayChunk(t.data.category,e.categoryColumnCount),e.showAllJobCategories=!0,e.showJobSuggestions=!1,e.suggestedJobResults=[],e.keywordsSearched=e.keywordsSearched.slice(0,3),e.suggestedJobResults=e.suggestedJobResults.concat(t.data.category),e.resultsUpdated=!0,setTimeout(function(){e.resultsUpdated=!1},1e3),e.allJobCategories},function(e){new Error(e)})},t.prototype.onError=function(e){o.logger.debug("ph-global-search: error..."+e)},t.prototype.chunk=function(e,t){var i,o=[],r=t,s=Math.floor(e.length/r),n=e.length%r,a=0;for(n>0&&(s+=1);r;)i=1==r?e.length:a+s,o.push(e.slice(a,i)),a=i,r--;return o},t.prototype.handleSubmitClick=function(t,i){var r=this;if(i&&i.preventDefault(),this.isMilitarySearch){if(!this.suggestedMOSKeywords.length&&!this.isEmptyredirection)return;if(this.suggestedMOSKeywords.length){var s=!1;this.suggestedMOSKeywords.forEach(function(e){e.title==r.searchValue&&(!r.mosCode&&e.mos_code&&(r.mosCode=e.mos_code),s=!0)}),s||(this.searchValue=this.suggestedMOSKeywords[0].title,this.mosCode=this.suggestedMOSKeywords[0].mos_code)}}if(this.showError=!1,this.searchValue&&this.isEnterClick||!this.checkValidation){this.checkValidation=!1,this.isEnterClick=!1,this.mosCode||(this.updateLocalStrWithRecentSearchDetails(this.searchValue,!0),this.storeKeywordsForRecommendation());var n={};n.trait6=this.searchValue;try{this.commonService.processTrackingEvent("page_search",void 0,n)}catch(i){o.logger.debug(i.message)}var a=void 0,l="";if(this.mosCode&&(l="&ms=true&moscode="+this.mosCode),"search-results"==this.searchUrl)a=e.prototype.getUrl.call(this,null,this.searchUrl,{},"keywords="+this.searchValue+l);else{var c=-1==this.searchUrl.indexOf("?")?"?keywords=":"&keywords=";a=this.commonService.getBaseUrl()+this.searchUrl+c+this.searchValue+l}this.userLocation&&this.userLocation.coords&&(this.userLocation.coords.latitude||this.userLocation.coords.longitude)&&(a+=-1==a.indexOf("?")?"?":"&",a+="uLatitude="+this.userLocation.coords.latitude+"&uLongitude="+this.userLocation.coords.longitude),this.rk&&this.rk.length&&(a+=-1==a.indexOf("?")?"?":"&",a+="rk="+this.rk),window.location.assign(a)}else this.showError=!0},t.prototype.updateLocalStorage=function(){var e=this.localStorage.getItem("globalSearch")||[];-1==e.indexOf(this.searchValue)&&(e.push(this.searchValue),this.localStorage.setItem("globalSearch",e)),this.recentSearchStorage=e},t.prototype.populateRecentSearches=function(){null!=this.commonService.getSpecificTrackCtx(p.globalSearchKeywords)?(this.allSuggestions.searched=this.commonService.getSpecificTrackCtx(p.globalSearchKeywords),this.showRecentSearches=!0):this.showRecentSearches=!1},t.prototype.getCategoryUrl=function(e){return"/us/en/c/"+e.toLowerCase()+"-jobs"},t.prototype.updateLocalStrWithRecentSearchDetails=function(e,t){if(!0===t||!1===this.inlineSearch){null!=e&&e.length>0&&(this.searchValue=e);var i=[];null!=this.commonService.getSpecificTrackCtx(p.globalSearchKeywords)&&(i=this.commonService.getSpecificTrackCtx(p.globalSearchKeywords)),this.searchValue&&this.searchValue.length&&(-1==i.indexOf(this.searchValue)?i.unshift(this.searchValue):(i.splice(i.indexOf(this.searchValue),1),i.unshift(this.searchValue)),this.commonService.setSpecificTrackCtx(p.globalSearchKeywords,i))}return!0},t.prototype.storeKeywordsForRecommendation=function(){var e=[];if(null!=this.commonService.getSpecificTrackCtx(p.searchKeywords)&&(e=this.commonService.getSpecificTrackCtx(p.searchKeywords)),this.searchValue&&this.searchValue.length){if(null!=e){for(var t in e)if(e[t].keyword==this.searchValue){e.splice(t,1);break}}else e=[];e.unshift({keyword:this.searchValue,timeStamp:(new Date).toUTCString()}),this.commonService.setSpecificTrackCtx(p.searchKeywords,e)}},t.prototype.detached=function(){if(this.element.firstElementChild&&this.element.firstElementChild.classList.contains("ph-mobile-search-backdrop")){window.removeEventListener("resize",this.handleSearchOnWindowResize);for(var e=this.element.querySelectorAll("input.ph-input-search"),t=0;t<e.length;t++)e[t].removeEventListener("focusin",this.handleInputFocus)}this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.getWidgetBundleValue=function(e,t,i){return this.widgetBundle&&this.widgetBundle[e]?this.widgetBundle[e]:i?i.getAttribute(t):void 0},t.prototype.singleArrayChunk=function(e,t){window.innerWidth<=767&&(t=1);for(var i=[],o=[],r=Math.floor(e.length/t),s=e.length%t,n=0;n<t;n++){for(var a=[],l=0;l<r;l++){var c=l+n*r;a.push(e[c])}s>=1&&(a.push(e[e.length-(n+1)]),s-=1),i.push(a)}if(i.length){for(var p=0;p<i[0].length;p++)for(var d=0;d<i.length;d++)i[d][p]&&o.push(i[d][p]);i=o}return i},t.prototype.setKeywordSuggested=function(e){this.suggestedJobResultsNames=e},t.prototype.getFieldOptions=function(e){var t=this;switch(e){case"typehead":return this.searchValue.length>0?this.isMilitarySearch?this.fetchMilitaryJobSuggestions():this.fetchJobSuggestions():(this.isSearchInFocus=!0,this.isMilitarySearch?(this.resultsUpdated=!0,setTimeout(function(){t.resultsUpdated=!1},1e3),[]):this.fetchJobCategories())}},t.prototype.setFieldValue=function(e,t){switch(e){case"typehead":if(this.searchValue.length){if(this.isMilitarySearch){if(this.suggestedMOSKeywords.length&&this.suggestedMOSKeywords[t]){this.setMOSKeyword(this.suggestedMOSKeywords[t]),this.mosCode=this.suggestedMOSKeywords[t].mos_code,this.isMOSClick=!0;var i=this.element.querySelector(".listitem-focused a");this.fireClick(i)}else if(this.suggestedMOSKeywords.length&&-1==t){this.setMOSKeyword(this.suggestedMOSKeywords[0]),this.mosCode=this.suggestedMOSKeywords[0].mos_code,this.isMOSClick=!0;var i=this.element.querySelectorAll(".phs-suggested-mos-keywords-list li a");this.fireClick(i[0])}}else if(this.suggestedJobResults.length&&this.suggestedJobResults[t]){var i=this.element.querySelector(".listitem-focused a");this.fireClick(i)}}else if(this.isMilitarySearch){if(this.allSuggestions.searched.length&&this.allSuggestions.searched[t]){this.setMOSKeyword(this.allSuggestions.searched[t]),this.mosCode=this.suggestedMOSKeywords[t].mos_code,this.isMOSClick=!0;var i=this.element.querySelector(".listitem-focused a");this.fireClick(i)}}else if(this.allJobCategories.length&&this.allJobCategories[t]){var i=this.element.querySelector(".listitem-focused a");this.fireClick(i)}}},t.prototype.fireClick=function(e){if(document.createEvent&&e){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}else document.createEventObject&&e?e.fireEvent("onclick"):e&&"function"==typeof e.onclick&&e.onclick()},t.prototype.getActiveIndex=function(e){var t=this,i=-1;switch(e){case"typehead":return this.searchValue.length>0?this.isMilitarySearch?this.suggestedMOSKeywords.forEach(function(e,o){e.title==t.searchValue&&(i=o)}):this.suggestedJobResults.forEach(function(e,o){var r=e&&e.key||e&&e.category;r&&r==t.searchValue&&(i=o)}):this.allJobCategories&&this.allJobCategories.length&&this.allJobCategories.forEach(function(e,o){e.key==t.searchValue&&(i=o)}),i}return i},t.prototype.clearFieldValue=function(e){},t.prototype.getActiveIndexOnBlur=function(e,t){this.gsClrTxt=0,this.isSearchInFocus=!1,this.element.querySelector(l)!=document.activeElement&&(this.searchBoxBackdrop=!1),this.showDropDown=!1,this.isMilitarySearch&&this.setMOSFocusField(e)},t.prototype.setFocusField=function(e,t){this.focusedField=e,t?(this.focusedField=void 0,this.showDropDown=!1):this.isMilitarySearch&&this.searchValue.length>0&&0==this.suggestedMOSKeywords.length?this.handleBlur():document.activeElement===this.element.querySelector(l)&&(this.showDropDown=!0)},t.prototype.getUrl=function(t,i,o,r,s){if(this.partnerUrl){var n=this.commonService.getParam("partnersUrl")||"",a=e.prototype.getUrl.call(this,t,i,o,r,s);return a=a.replace(this.commonService.getBaseUrl(),n)}if("job"==i||"search-results"==this.searchUrl||"category"==i){if(this.rk&&this.rk.length&&"job"!=i&&(r+="&rk="+this.rk),"category"==i&&"search-results"!=this.searchUrl){r=r+"&category="+encodeURIComponent(o.key||o.name||"");var l=e.prototype.getUrlQueryString.call(this,t,this.searchUrl,o,r,s),c=-1==this.searchUrl.indexOf("?")?"?":"&",a=this.commonService.getBaseUrl()+this.searchUrl+c+l;return a}return e.prototype.getUrl.call(this,t,i,o,r,s)}var l=e.prototype.getUrlQueryString.call(this,t,this.searchUrl,o,r,s),c=-1==this.searchUrl.indexOf("?")?"?":"&",a=this.commonService.getBaseUrl()+this.searchUrl+c+l;return a},t.version="v3",t.ddoKey="ddoKey",t.ddoKeyEvent="ddoKeyEvent",t.ddoKeyMOSSEARCH="ddoKeyMOSSEARCH",t.ddoKeyGlobalSearchConfig="ddoKeyGlobalSearchConfig",t.elementTag="ph-global-search-"+p.version,t.globalSearchKeywords="globalSearch_keywords",t.searchKeywords="keywords",t.ddoKeyAgp="ddoKeyAgp",t.ddoKeyEagerLoad="ddoKeyEagerLoad",__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",String)],t.prototype,"placeholderText",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"showTitle",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"showCaption",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"searchValue",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"arrowNavigation",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"mosVisibleCategories",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"isEmptyredirection",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"reloadOnClear",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"checkValidation",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"searchUrl",void 0),__decorate([i.bindable,__metadata("design:type",Number)],t.prototype,"isLandingPage",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"rk",void 0),__decorate([i.bindable,__metadata("design:type",Number)],t.prototype,"categoryColumnCount",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"partnerUrl",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"inlineSearch",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"preFillSearchedKey",void 0),t=p=__decorate([i.customElement(p.elementTag),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(d=void 0!==o.CommonService&&o.CommonService)&&d||Object,n.GlobalSearchService,r.EventAggregator,"function"==typeof(f=void 0!==o.LocalStorageAPI&&o.LocalStorageAPI)&&f||Object,Object,"function"==typeof(h=void 0!==o.GeoLocationService&&o.GeoLocationService)&&h||Object])],t);var p,d,f,h}(o.PhenomWidget);t.GlobalSearch=p}),define("text!v3/ph-global-search.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-social-share-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"jobDetails",ddoKey2:"googleShortUrl",ddoKeyShareDetails:"getSocialSharingDetails",ddoShareOption:"jobsharewidgetsettings",ddoBaseUrls:"baseUrls"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){
if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-social-share-service",["require","exports","aurelia-framework","ph-common","./ph-social-share-config"],function(e,t,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,i){this.commonService=e,this.WidgetConfig=t,this.serviceRequest=i,this.hashtagsText=""}return e.prototype.getShortUrl=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e.googleShortUrl&&e.googleShortUrl.status&&"failed"==e.googleShortUrl.status?"#":encodeURIComponent(e.googleShortUrl.shortUrl)})},e.prototype.getSocialUrls=function(e,t,i,o){var s=this;if(this.jobDetails=t,"internal"!=this.commonService.getSiteType()){var n=this.commonService.getUrl("job",t);return n=this.removeLastCharIfExists(n,"/"),n+="/?",this.getShareUrl(e,"googleShortUrl",n,i).then(function(e){return e})}var a={jobSeqNo:t.jobSeqNo,jobId:t.jobId,medium:"social-share",campaign:"social",source:i.name};o&&(a.siteType=o);var l=r.WidgetConfig.v3.ddoKeyShareDetails;return this.commonService.getDDO(e,l,a).then(function(t){if(t&&t[l]&&t[l].status&&"SUCCESS"==t[l].status.toUpperCase()&&t[l].data&&t[l].data.jdUrl){var o=t[l].data.jdUrl;return o=s.removeLastCharIfExists(o,"/"),o+="/?",t[l].data.referrerToken&&(o+="referrerToken="+t[l].data.referrerToken+"&"),s.getShareUrl(e,"googleShortUrl",o,i).then(function(e){return e})}return console.info("Error getting url"),"#"})},e.prototype.getShareUrl=function(e,t,i,o){var r=this;i+="utm_source="+o.name+"&utm_campaign=job-share&utm_medium=social-share";var s={url:i};return"whatsapp"!=o.name?this.getShortUrl(e,t,s).then(function(e){return r.updateReqParamsToUrl(o,e)}):new Promise(function(e,t){e(r.updateReqParamsToUrl(o,r.shareInfoText+" "+i))})},e.prototype.updateReqParamsToUrl=function(e,t){var i=""+e.baseUrl+t;if(e.settings.params){var o=e.settings.params;o.hasOwnProperty("media")&&(this.tagValue=this.getTagValue());for(var r in o)o.hasOwnProperty(r)&&this[o[r]]&&(i+="&"+r+"="+this[o[r]]);return i}return i},e.prototype.removeLastCharIfExists=function(e,t){return e.length&&e[e.length-1]==t&&(e=e.substring(0,e.length-1)),e},e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e?e[t]:{}})},e.prototype.getTagValue=function(){return document.querySelector("meta[property='og:image']").content},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object,Object,"function"==typeof(s=void 0!==o.ServiceRequest&&o.ServiceRequest)&&s||Object])],e);var t,s}();t.SocialShareService=s});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-social-share",["require","exports","aurelia-framework","ph-common","./ph-social-share-config","./ph-social-share-service","aurelia-event-aggregator"],function(e,t,i,o,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="ph-social-share-v3",l=function(e){function t(t,i,o,r){var s=e.call(this,t,i,a)||this;return s.element=t,s.commonService=i,s.socialShareService=o,s.eventAggregator=r,s.currentJobObj={},s.showMailTo=!1,s.isErrorMsgReqd=!1,s.isShareIcon=!0,s.isPopup=!1,s.showTitle=!0,s.detailObj={},s.loadingText="Loading ...",s.replaceJobSeqNo=!1,s.showCopySuccessMessage=!1,s.shareObj={},s.showErrorMsg=!1,s.sociaurl=[],s.showEmailView=!1,s.shareInfoText="Interesting Job Posting at {{category}}, {{location}}, {{title}}",s.isPopupOpened=!1,s.jobLink="",s.selectedPopup="",s.showCopySuccess=!1,s.isEmailClientEnabled=!1,s}return __extends(t,e),t.prototype.attached=function(){if(document.addEventListener("touchstart",function(e){}),e.prototype.hideLoader.call(this),e.prototype.attached.call(this),this.fetchJobObj(),"e"==e.prototype.getQueryParam.call(this,"vt")&&(this.siteType="external"),this.isEmailClientEnabled=this.commonService.getSiteSettings("isNativeEmailClient"),this.configureShare(),this.showMailTo){var t=encodeURIComponent(window.location.href);this.strMailtoProto="mailto:?subject=Check out this job!&body=Hi,%0A%0AI noticed a Job Opportunity at "+t+"%0A%0A"}},t.prototype.created=function(){var t=this;this.eventAggregator.subscribe("updateJob",function(i){(!t.jobSeqNo||i.jobSeqNo&&t.jobSeqNo!=i.jobSeqNo)&&(e.prototype.showContainer.call(t),t.replaceJobSeqNo&&(i.jobSeqNo=i.jobId),t.currentJobObj=i,t.jobSeqNo=t.currentJobObj.jobSeqNo,t.category=t.currentJobObj.category)})},t.prototype.fetchJobObj=function(){Object.keys(this.detailObj)&&Object.keys(this.detailObj).length?this.currentJobObj=this.detailObj:this.currentJobObj=this.commonService.getCachedDDO("jobDetail"),this.currentJobObj&&this.currentJobObj.data&&(this.currentJobObj=this.currentJobObj.data.job,this.currentJobObj&&(this.jobSeqNo=this.currentJobObj.jobSeqNo,this.category=this.currentJobObj.category))},t.prototype.configureShare=function(){var t=this;try{this.shareOption=this.shareOption?JSON.parse(this.shareOption):{};var i=!0;this.shareOption&&this.shareOption.options&&this.shareOption.options.length||(i=!1,this.socialShareService.makeDDORequest(a,r.WidgetConfig.v3.ddoShareOption,{}).then(function(i){e.prototype.hideLoader.call(t),i&&i.data?(t.shareOption=i.data||{},t.shareOption.options=t.shareOption.options||[]):t.shareOption.options=[],t.checkEmailExists()},function(i){new Error(i),e.prototype.hideLoader.call(t),t.handleError("")})),i&&this.checkEmailExists()}catch(e){}},t.prototype.checkEmailExists=function(){this.isShareEmailFound=this.shareOption.options.findIndex(function(e){return"email"==e.name}),this.isShareEmailFound=-1!=this.isShareEmailFound},t.prototype.closeShareJob=function(e,t){var i=this;t||this.isPopupOpened?(this.shareTimer&&clearTimeout(this.shareTimer),this.isShareIcon=!0,this.currentJobObj&&(this.currentJobObj.toggleOpen=!0)):(this.shareTimer&&clearTimeout(this.shareTimer),this.shareTimer=setTimeout(function(){i.isShareIcon=!1,i.currentJobObj&&(i.currentJobObj.toggleOpen=!1)},300))},t.prototype.handlePopup=function(t){var i=this;this.widgetBundle.shareInfoText&&(this.shareInfoText=this.widgetBundle.shareInfoText),this.shareInfoText=this.shareInfoText.replace("{{categoryName}}","{{category}}"),this.socialShareService.shareInfoText=this.commonService.getTranslation(this.shareInfoText,this.currentJobObj,!0),this.socialShareService.shareInfoText=this.socialShareService.shareInfoText.replace(/%250A/g,"%0A"),this.socialShareService.hashtagsText=this.widgetBundle.hashtagsText,e.prototype.unhideLoader.call(this);var o={},r={};if(o.trait5=this.jobSeqNo,o.trait14=this.category,t.eventName&&this.commonService.processTrackingEvent(t.eventName,void 0,o),"email"==t.name)if(this.isEmailClientEnabled)this.handleEmailClientOrJob();else{this.showEmailView=!this.showEmailView,o.params={toggle:this.showEmailView};var s=document.querySelector('[as-element^="ph-email-job"]');if(s){if(this.commonService.smoothScroll&&"internal"==this.commonService.getSiteType()){var n=window.pageYOffset,l=this.commonService.getNearestSectionElemOffsetTop(s);n<l?this.commonService.smoothScroll(n,l,!0,30):this.commonService.smoothScroll(n,l,!1,30)}else s.scrollIntoView(!1);if(s.au&&s.au.controller&&s.au.controller.viewModel&&!s.au.controller.viewModel.isPopupReqd){var c=s.au.controller.viewModel,p=c.element.querySelector(".ph-a11y-email-job-heading");p&&p.focus()}}this.showEmailView&&e.prototype.raiseEvent.call(this,"show-email-job",{})}else"copylink"==t.name?this.handelCopyJobLink():(r=window.open("","",t.settings.popUpParams),this.isPopupOpened=!0,setTimeout(function(){i.isPopupOpened=!1},100));"email"!=t.name&&"copylink"!=t.name&&(r.document.body.innerHTML=this.loadingText,this.socialShareService.getSocialUrls(a,this.currentJobObj,t,this.siteType).then(function(t){e.prototype.hideLoader.call(i),r.location.href=t},function(t){new Error(t),e.prototype.hideLoader.call(i),i.handleError("")}))},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getLocalWidgetBundle=function(){return{"google-plus":"google-plus",facebook:"facebook",linkedin:"linkedin",twitter:"twitter",email:"share via mail",xing:"xing",pinterest:"pinterest",vk:"vk",whatsapp:"whatsapp",weibo:"weibo"}},t.prototype.handleEmailClientOrJob=function(){var t=this.widgetBundle.emailClientBody||"Check out this job:";try{t=decodeURIComponent(t)}catch(e){o.logger.error(e)}var i=this.widgetBundle.emailClientSubject||"{{title}} at {{companyName}}",r=this.commonService.getTranslation(i,this.currentJobObj),s=this.commonService.getTranslation(t,this.currentJobObj),n=e.prototype.getUrl.call(this,"","job",this.currentJobObj);n&&n.length&&(n=n.replace("/i/","/")),window.location.href="mailto:?subject="+encodeURIComponent(r)+"&body="+encodeURIComponent(s)+n},t.prototype.handelCopyJobLink=function(){this.jobLink=this.commonService.getUrl("job",this.currentJobObj),this.selectedPopup="copyLinkPopup";var t=this.element.querySelector(".ph-a11y-popup-selector"),i=this.element.querySelector(".ph-a11y-popup-selector"),o=this.element.querySelector("ph-a11y-copyLinkClose-popup");e.prototype.openDialogPopup.call(this,t,o,i),this.element.querySelector(".input-copy-link").value=this.jobLink},t.prototype.copyLink=function(){var e=this;this.element.querySelector(".input-copy-link").select(),document.execCommand("copy"),this.showCopySuccessMessage&&(this.showCopySuccess=!0,setTimeout(function(){e.showCopySuccess=!1},5e3))},t.prototype.copyLinkCancelAction=function(){this.showCopySuccess=!1,e.prototype.closeDialogPopup.call(this)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],t.prototype,"currentJobObj",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],t.prototype,"showMailTo",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTitle",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"hideSubTitle",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"shareOption",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isShareIcon",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isPopup",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"showTitle",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],t.prototype,"detailObj",void 0),__decorate([i.bindable(),__metadata("design:type",String)],t.prototype,"loadingText",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"replaceJobSeqNo",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"showCopySuccessMessage",void 0),t=__decorate([i.customElement(a),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==o.CommonService&&o.CommonService)&&l||Object,s.SocialShareService,n.EventAggregator])],t);var l}(o.PhenomWidget);t.SocialShare=l}),define("text!v3/ph-social-share.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v3/views/ph-social-share-v3/default/view.html",["module"],function(e){e.exports='<template>\n<div class="phs-share-job-area ph-widget-box" role="region" key-role="regionRole" aria-label="Social share" key-aria-label="socialShare">\n    <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\n    <div class="widget-container">\n        <div class="phs-widget-heading">\n            <h2>\n                <ppc-content key="socialShareHeading" data-ph-at-id="heading-text">Share this Opportunity</ppc-content>\n            </h2>\n        </div>\n        <div class="content-block">\n            <ul data-ph-at-id="share-options-list">\n               \n                <li repeat.for="eachIndicator of shareOption">\n                    <a class="${eachIndicator}" click.trigger="handlePopup(eachIndicator)" aria-label="Share via ${eachIndicator}" key-aria-label="share${eachIndicator}"\n                        href="javascript:void(0)" data-ph-at-id="share-${eachIndicator}-link" title="Share via ${eachIndicator}"  \n                        key-title="share${eachIndicator}Title" target="_blank" blur.trigger="closeShareJob($event, true)">\n                        <i class="icon icon-${eachIndicator}"></i> ${widgetBundle[eachIndicator] | pht}\n                        <span class="sr-only">\n                            <ppc-content key="share${eachIndicator}Text" data-ph-at-id="share-${eachIndicator}s-text">  ${widgetBundle[eachIndicator] | pht}</ppc-content>\n                        </span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-cookie-popup-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"cookiePopup",storeOneTrustCookieSession:"storeOneTrustCookieSession"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-cookie-popup-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.CookiePopupService=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-cookie-popup",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-cookie-popup-service"],function(e,t,i,o,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ph-cookie-popup-v2",a=window,l="top",c='[as-element^="ph-cookie-popup"] .ph-sticky-header',p="ph:gdpr:OptanonWrapperUpdated",d='[as-element*="header"] .ph-sticky-header, .header-layout .pcs-sticky-header ,.header-layout .ph-sticky-block-fixed',f={top:"cookie-popup-top",bottom:"cookie-popup-bottom"},h={C0001:"essential",1:"essential",C0002:"performance",2:"performance",C0003:"functional",3:"functional",C0004:"analytics",4:"analytics",C0005:"social",5:"social"},u={1:"essential",2:"functional",3:"analytics",4:"social",TA001:"essential",TA002:"functional",TA003:"analytics",TA004:"social"},g=function(e){function t(t,i,o,r,s,c){var d=e.call(this,t,i,n)||this;return d.element=t,d.commonService=i,d.cookiePopupService=o,d.cookieManager=r,d.eventAggregator=s,d.localStorageContext=c,d.doNotHide=!1,d.showDeclineButton=!0,d.showCookieSettingsButton=!1,d.showCookiePopup=!0,d.cookieValue="",d.position=l,d.isAccepted=!0,d.cookieType="",d.cookieWindowType="default",d.subscriptions=[],d.cookieCategoryConfig=h,d.trustArcCookieCategoryConfig=u,d.handleExternalCookie=function(e,t){t=t||{};var i=[],o=e.availOnAllowedCookies||[],r=t.groups||a.OnetrustActiveGroups,s=!0;if(r){r=r.split(",");for(var n=0;n<o.length;n++)if(o[n]&&-1===r.indexOf(o[n])){s=!1;break}d.cookieValue="d",s&&(d.cookieValue="a"),d.setCookie();var l={};if(e.trackCookieMap&&e.trackCookieMap.cookieMap){var c=d.getEnabledCookies(r);i=d.getDisabledCookies(e.trackCookieMap.cookieMap,c),l.disabledCookies=i,l.cookieMap=e.trackCookieMap.cookieMap,d.addCareerSiteCookies(e,c),d.deleteCareerSiteCookies(e,i),d.addOneTrustSessionData(e,i)}d.raiseActionEvent(p,l)}},d.handleTrustArcCookie=function(e,t){var i=t.data;if("string"==typeof i&&(i=JSON.parse(i)),"submit_preferences"==i.message||"remove_iframe"==i.message){var o=a.phApp.baseDomain||e.currentDomain;o=o.replace(/https?:\/\//g,"");var r=a.truste.cma.callApi("getGDPRConsentDecision",o),s=d.trustArcMappedGroups(r.consentDecision);d.handlingTrustArcUserConsent(e,s)}},d.handlingTrustArcUserConsent=function(e,t){for(var i=[],o=e.availOnAllowedCookies||[],r=!0,s=0;s<o.length;s++)if(o[s]&&-1===t.indexOf(o[s])){r=!1;break}d.cookieValue="d",r&&(d.cookieValue="a"),d.setCookie();var n={};if(e.trackCookieMap&&e.trackCookieMap.cookieMap){var a=d.getTrustArcEnabledCookies(t);i=d.getDisabledCookies(e.trackCookieMap.cookieMap,a),n.disabledCookies=i,n.cookieMap=e.trackCookieMap.cookieMap,d.addCareerSiteCookies(e,a),d.deleteCareerSiteCookies(e,i),d.addOneTrustSessionData(e,i)}d.raiseActionEvent(p,n)},d.trustArcMappedGroups=function(e){var t=[];return e.forEach(function(e){e&&t.push(e.toString())}),t},d}return __extends(t,e),t.prototype.created=function(){var e=this,t=this.commonService.getSiteSettings("externalCookieConfig"),i=this.commonService.getSiteSettings("externalCookieTrustArcConfig"),o=this.commonService.getSiteSettings("ignoreCookiePages")||[],r=this.commonService.getPageName();if(-1===o.indexOf(r))return t?void this.initiateExternalCookie(t):i?void this.initiateExternalCookieTrustArc(i):void this.subscriptions.push(this.eventAggregator.subscribe("close_cvd_popup",function(){e.setCookieBodyHeight()}))},t.prototype.attached=function(){var t=this;if(!this.isExternalCookieEnabled||this.doNotHide){e.prototype.attached.call(this);var i=this.commonService.getSiteSettings("gdpr")||{};this.cookieType=i&&i.hasOwnProperty("cookieTypeV1")?i.cookieTypeV1:i.cookieType,this.cookieWindowType=i&&i.cookieWindowType||"default",this.position=i&&i.position||l,this.cookieValue=this.cookieManager.get("PHPPPE_GCC"),i&&i.hasOwnProperty("showDecline")&&(this.showDeclineButton=i.showDecline),i&&i.hasOwnProperty("showCookieSettings")&&(this.showCookieSettingsButton=i.showCookieSettings),this.showCookiePopup="s"==this.cookieValue||!1,this.piiConsentEnabled=i.piiConsent,this.cookieValue?(("tentative"==this.cookieType&&"u"==this.cookieValue||"sticky"==this.cookieType&&"s"==this.cookieValue)&&(this.doNotHide&&(this.cookieValue="d","tentative"==this.cookieType?this.setGdprCookie(!0):this.setGdprCookie(!1),this.setCookie(),this.commonService.removeRecomContentFromLocalStorage()),this.handleCookieArea()),this.isAccepted="a"==this.cookieValue,this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)):setTimeout(function(){t.showCookiePopup=!0,t.handleCookieArea()},10),this.subscriptions.push(this.eventAggregator.subscribe("close_cookie_popup",function(e){t.doNotHide||(t.showCookiePopup=!1,t.setCookieAction(!1)),t.isAccepted=!(!e||!e.cookieValue||"a"!=e.cookieValue)}));var o=this.cookieManager.get("PHPPPE_PC");this.piiConsentEnabled&&!o&&this.triggerPiiConsentPopup()}},t.prototype.initiateExternalCookie=function(e){var t=this;this.isExternalCookieEnabled=!0,e.scriptUrl&&!e.scriptUrl.startsWith("http")&&(e.scriptUrl=this.commonService.getCdnUrl()+"/"+e.scriptUrl),this.cookieCategoryConfig=e.cookieCategoryConfig||h,this.loadDependentStyle(e);var i=document.createElement("script");i.src=e.scriptUrl,i.setAttribute("data-document-language","true"),i.type="text/javascript",i.setAttribute("async",""),i.setAttribute("data-domain-script",e.domainKey),i.setAttribute("charset","UTF-8"),e.dataLanguage&&i.setAttribute("data-language",e.dataLanguage),e.ignoreOverrideOptanon?e.ignoreOverrideOptanon&&(a.phApp.OptanonWrapper=this.handleExternalCookie.bind(this,e)):a.OptanonWrapper=this.handleExternalCookie.bind(this,e),i.onload=function(){t.loadDependentScript(e,i)};var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o)},t.prototype.loadDependentScript=function(t,i){t.dependentScriptUrl&&(t.dependentScriptUrl=t.dependentScriptUrl.startsWith("http")?t.dependentScriptUrl:this.commonService.getCdnUrl()+"/"+t.dependentScriptUrl,e.prototype.loadScript.call(this,t.dependentScriptUrl,function(){},[],!0))},t.prototype.loadDependentStyle=function(e){if(e.styleUrl){e.styleUrl=e.styleUrl.startsWith("http")?e.styleUrl:this.commonService.getCdnUrl()+"/"+e.styleUrl;var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e.styleUrl),document.head.appendChild(t)}},t.prototype.initiateExternalCookieTrustArc=function(e){var t=this;if(this.isExternalCookieEnabled=!0,!document.getElementById("consent_blackbar")){var i=document.createElement("div");i.setAttribute("id","consent_blackbar"),document.body.appendChild(i)}e.scriptUrl&&!e.scriptUrl.startsWith("http")&&(e.scriptUrl=this.commonService.getCdnUrl()+"/"+e.scriptUrl),this.trustArcCookieCategoryConfig=e.cookieCategoryConfig||u,this.loadDependentStyle(e);var o=document.createElement("script");o.src=e.scriptUrl,o.setAttribute("data-document-language","true"),o.type="text/javascript",o.setAttribute("async",""),o.setAttribute("charset","UTF-8");var r=a.phApp.baseDomain||e.currentDomain;r=r.replace(/https?:\/\//g,"");var s={PrivacyManagerAPI:{action:"getConsent",timestamp:(new Date).getTime(),self:r}},n=JSON.stringify(s);window.top.postMessage(n,"*"),o.onload=function(){window.addEventListener("message",t.handleTrustArcCookie.bind(t,e)),setTimeout(function(){var i=t.cookieManager.get("notice_gdpr_prefs");if(i){i=i.slice(0,-1),i=i.split(",");for(var o=0;o<i.length;o++)i[o]=Number(i[o])+1}var r=t.trustArcMappedGroups(i||[]);t.handlingTrustArcUserConsent(e,r)},150)};var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(o,l)},t.prototype.getTrustArcEnabledCookies=function(e){for(var t=[],i=0;i<e.length;i++)""!=e[i]&&t.push(this.getTrustArcCookieName(e[i]));return t},t.prototype.addOneTrustSessionData=function(e,t){var i={},o=[];e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&(t.forEach(function(t){(e.trackCookieMap.csCookies[t]||[]).forEach(function(e){o.includes(e)||o.push(e)})}),i.onetrustDisabledCookies=o,this.cookiePopupService.makeDDORequest(n,"storeOneTrustCookieSession",i))},t.prototype.deleteCareerSiteCookies=function(e,t){var i=this;e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&t.forEach(function(t){(e.trackCookieMap.csCookies[t]||[]).forEach(function(e){i.cookieManager.delete(e)})})},t.prototype.addCareerSiteCookies=function(e,t){var i=this,o=new Date;o.setTime(o.getTime()+7776e6);var r={expires:o,path:"/"};e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&t.forEach(function(t){var o=e.trackCookieMap.csCookies[t];o&&o.forEach(function(e){"VISITED_VARIANT"!=e&&"external"!=i.getCareerSiteCookieValue(e)&&i.cookieManager.set(e,i.getCareerSiteCookieValue(e),r)})})},t.prototype.getCareerSiteCookieValue=function(e){var t=a.phApp.locale;switch(t=t.split("_"),e){case"VISITED_COUNTRY":return t[1];case"VISITED_LANG":return t[0];case"VISITED_VARIANT":return this.getSiteVariant(window.phApp.siteType)}},t.prototype.getSiteVariant=function(e){return e&&"internal"==e?"i":e||void 0},t.prototype.getEnabledCookies=function(e){for(var t=[],i=0;i<e.length;i++)if(""!=e[i]){var o=this.getCookieName(e[i]);o&&t.push(this.getCookieName(e[i]))}return t},t.prototype.getDisabledCookies=function(e,t){var i=[];for(var o in e)t.includes(o)||i.push(o);return i},t.prototype.getCookieName=function(e){if(e)return this.cookieCategoryConfig[e]},t.prototype.getTrustArcCookieName=function(e){if(e)return this.trustArcCookieCategoryConfig[e]},t.prototype.handleCookieArea=function(){var e=this,t=this.commonService.getSiteSettings("gdpr");this.doNotHide||this.toggleBodyClass(),t&&!this.cookieValue&&this.setGdprCookie(!0),setTimeout(function(){e.setCookieBodyHeight()},0),window.addEventListener("resize",function(){e.setCookieBodyHeight()}),this.addModalPopup()},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.setCookieBodyHeight=function(e){var t=this;if(this.showCookiePopup){var i=document.querySelector(".ph-header"),o=document.querySelector("body"),r=document.querySelector(c),s=document.querySelector('[as-element^="ph-cvd"][placement="header"] .ph-sticky-header'),n=document.querySelector(d);for(this.element.contains(n)&&(n=void 0);i&&r;)if(i&&i.firstElementChild&&window.getComputedStyle(i).position,!(i=i.firstElementChild)){var a=s&&s.offsetHeight||0,l=r&&r.offsetHeight;"bottom"==this.position?(o.style.paddingBottom=l+"px",r&&(r.style.bottom=0),r&&(r.style.top="auto")):(o.style.paddingTop=a+l+"px",r&&(r.style.top=a+"px"),n&&(n.style.top=a+l+"px",n.style.marginTop="0px")),n&&!e&&setTimeout(function(){t.setCookieBodyHeight(!0)},5e3)}}else window.removeEventListener("resize",function(){t.setCookieBodyHeight()})},t.prototype.addModalPopup=function(){var t=this;this.element.querySelector(".ph-a11y-modal-area")&&setTimeout(function(){var i=t.element.querySelector(".ph-a11y-popup-start-focus");t.closePopupCallback(i,"ph-a11y-modal-area"),e.prototype.openDialogPopup.call(t,"ph-a11y-modal-area",document.body,i)},0)},t.prototype.closePopupCallback=function(t,i){var o=this;document.addEventListener("keyup",function(t){"Escape"!=t.key&&27!==t.keyCode&&27!==t.which||e.prototype.closeDialogPopup.call(o)})},t.prototype.removeCookieBodyHeight=function(){var e=document.querySelector("body"),t=document.querySelector(c),i=document.querySelector('[as-element^="ph-cvd"][placement="header"] .ph-sticky-header'),o=document.querySelector(d),r=document.querySelector(".header-layout .pcs-sticky-header");if(i||t.offsetHeight)if("bottom"==this.position)e.style.paddingBottom=t.offsetHeight+"px";else{var s=e.style.paddingTop;s=parseInt(s)-t.offsetHeight+"px",e.style.paddingTop=s,i&&(i.style.top="0px"),o&&(o.style.top=e.style.paddingTop)}else e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),o&&(o.style.top="0px",r&&(r.style.top="0px"),o.style.marginTop=null)},t.prototype.setCookie=function(e,t){var i=new Date;i.setTime(i.getTime()+7776e6);var o={expires:i,path:"/",secure:!0},r=this.commonService.getSiteSettings("gdpr");r&&r.parentDomainCookie&&(r.parentDomain?o.domain=r.parentDomain:o.domain=this.getParentDomain(".com")),this.cookieManager.set(e||"PHPPPE_GCC",t||this.cookieValue,o)},t.prototype.getParentDomain=function(e){var t=window.location.hostname.indexOf(".");return t<window.location.hostname.indexOf(".com")?window.location.hostname.substring(-1==t?0:t+1):window.location.hostname},t.prototype.setGdprCookie=function(e){var t=this,i=!!this.cookieValue;e?"tentative"==this.cookieType?this.cookieValue?this.cookieValue="a":this.doNotHide?(this.cookieValue="d",this.isAccepted=!1,this.commonService.removeRecomContentFromLocalStorage()):this.cookieValue="u":"sticky"!=this.cookieType||i?this.cookieValue="a":(this.doNotHide&&(this.isAccepted=!1),this.cookieValue="s"):this.cookieValue="d",this.setCookie(),(!e||i&&"u"!=this.cookieValue)&&setTimeout(function(){t.eventAggregator.publish("close_cookie_popup",{cookieValue:t.cookieValue})},1e3),e&&"s"!=this.cookieValue||this.commonService.removeRecomContentFromLocalStorage();var o={},r=e?"cookies_allow_click":"cookies_decline_click";this.commonService.processTrackingEvent(r,void 0,o),this.raiseGdprActionEvent()},t.prototype.acceptAndClose=function(){this.setGdprCookie(!0),this.showCookiePopup=!1,this.setCookieAction(!0),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)},t.prototype.declineAndClose=function(){this.setGdprCookie(!1),this.showCookiePopup=!1,this.setCookieAction(!0),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)},t.prototype.raiseGdprActionEvent=function(){"d"==this.cookieValue?this.raiseActionEvent("ph:gdpr:cookie:declined"):"a"==this.cookieValue&&this.raiseActionEvent("ph:gdpr:cookie:accepted")},t.prototype.raiseActionEvent=function(e,t){var i=new CustomEvent(e,{bubbles:!0,detail:t||{}});document.dispatchEvent(i)},t.prototype.setCookieAction=function(t){this.toggleBodyClass(),this.removeCookieBodyHeight(),e.prototype.hideContainer.call(this)},t.prototype.toggleBodyClass=function(){var e=this.showCookiePopup,t=document.querySelector("body");t&&(e?t.classList.contains(f[this.position])||(t.className=t.className+" "+f[this.position]):t.className=t.className.replace(f[this.position],""))},t.prototype.triggerPiiConsentPopup=function(){var t=this;this.piiCosentPopup=!0,setTimeout(function(){var i=t.element.querySelector(".ph-a11y-allow-consent");e.prototype.openDialogPopup.call(t,"ph-a11y-modal-dialog-area",document.body,i,void 0,!0)},100)},t.prototype.acceptConsent=function(){this.piiCosentPopup=!1,e.prototype.closeDialogPopup.call(this),this.setCookie("PHPPPE_PC","a")},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"doNotHide",void 0),t=__decorate([i.customElement(n),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(g=void 0!==o.CommonService&&o.CommonService)&&g||Object,s.CookiePopupService,"function"==typeof(m=void 0!==o.CookieManager&&o.CookieManager)&&m||Object,r.EventAggregator,"function"==typeof(y=void 0!==o.LocalStorageContext&&o.LocalStorageContext)&&y||Object])],t);var g,m,y}(o.PhenomWidget);t.CookiePopup=g}),define("text!v2/ph-cookie-popup.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-recently-viewed-jobs-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"recentlyViewedJobs",ddoKeyJobWidgetSettings:"jobwidgetsettings"}}}),define("v3/ph-recently-viewed-jobs-model",["require","exports"],function(e,t){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.reqObjForJobStatus={fieldName:"jobSeqNo",fieldValue:[],outputFields:["jobSeqNo","title","category","location","active","expiryDate","postedDate","positionLevel","customField1","industry","department","jobVisibility","industry","externalApply","visibilityType","fitLevel","matchedSkills","jobId","reqId","cmsJobId","applyUrl","cityState","type","cityStateCountry"]}}return e}();t.RecentlyViewedJobsModel=i});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-recently-viewed-jobs-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.commonService=e}return e.prototype.fetchJobsStatus=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.makeDDoRequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.RecentlyViewedJobsService=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-recently-viewed-jobs",["require","exports","aurelia-framework","ph-common","./ph-recently-viewed-jobs-config","./ph-recently-viewed-jobs-service","./ph-recently-viewed-jobs-model"],function(e,t,i,o,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="ph-recently-viewed-jobs-v3",l=function(e){function t(t,i,o,r){var s=e.call(this,t,i,a)||this;return s.element=t,s.commonService=i,s.recentlyViewedJobsService=o,s.recentlyViewedJobsModel=r,s.showExpiredJobs=!1,s}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this.jobWidgetSettingsPromise?this.jobWidgetSettingsPromise.then(function(e){t.fetchRecentlyViewedJobs()}):this.fetchJobFieldsAndActions()},t.prototype.fetchJobFieldsAndActions=function(){var e=this;try{this.jobFields=JSON.parse(this.element.getAttribute("job-fields"))||[]}catch(e){console.error(e)}this.jobFields.length?this.fetchRecentlyViewedJobs():this.recentlyViewedJobsService.makeDDoRequest(a,r.WidgetConfig.v3.ddoKeyJobWidgetSettings,{}).then(function(t){t&&t.data&&(e.jobFields=t.data.fields||[],e.jobActions=t.data.actions||[]),e.fetchRecentlyViewedJobs()})},t.prototype.fetchRecentlyViewedJobs=function(){var t=this;e.prototype.unhideLoader.call(this);var i=this.commonService.getSpecificTrackCtx("jobsViewed")||[];if(!i||0==i.length)return void e.prototype.handleError.call(this,"");for(var o=this.recentlyViewedJobsModel.reqObjForJobStatus,s=0;s<i.length;s++)o.fieldValue.push(i[s].jobSeqNo);if(this.jobFields&&this.jobFields.length)for(var n=0;n<this.jobFields.length;n++)-1==o.outputFields.indexOf(this.jobFields[n].name)&&o.outputFields.push(this.jobFields[n].name);this.recentlyViewedJobsService.fetchJobsStatus(a,r.WidgetConfig.v3.ddoKey,o).then(function(o){if(e.prototype.hideLoader.call(t),t.jobsStatus=o&&o.data&&o.data.jobs,t.jobsStatus&&Object.keys(t.jobsStatus).length)for(var r in i){var s=i[r].jobSeqNo;i[r].active=t.jobsStatus[s][0].active,1==i[r].active&&(i[r]=t.jobsStatus[s][0])}if(!t.showExpiredJobs){for(var n=[],a=0;a<i.length;a++)i[a].active&&n.push(i[a]);i=n}t.jobResults=i,t.onDataChange("recently_viewed_job_click")},function(i){new Error(i),e.prototype.hideLoader.call(t),e.prototype.handleError.call(t,"")})},t.prototype.onDataChange=function(t){e.prototype.onDataChange.call(this,t)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"showExpiredJobs",void 0),t=__decorate([i.customElement(a),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==o.CommonService&&o.CommonService)&&l||Object,s.RecentlyViewedJobsService,n.RecentlyViewedJobsModel])],t);var l}(o.PhenomJobWidget);t.RecentlyViewedJobs=l}),define("text!v3/ph-recently-viewed-jobs.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-candidate-login-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKeyCandidateSignIn:"candidateLogin",ddoKeyCandidateRegistration:"candidateRegister",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyMergedProfile:"mergedProfileV2",ddoKeyLogout:"jwtLogout",ddoKeyEagerLoad:"eagerLoadFyfSession",ddoKeyResetPassword:"candidateResetPassword",ddoKeySendResetPasswordLink:"candidateResetPasswordLink",ddoKeyIsValidToken:"validateOtp",ddoKeyGetPiiConsentConfig:"getPiiConsentConfig"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-candidate-login-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.CandidateLoginService=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-candidate-login",["require","exports","aurelia-framework","ph-common","./ph-candidate-login-config","./ph-candidate-login-service","aurelia-event-aggregator"],function(e,t,i,o,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="ph-candidate-login-v1",l=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/,p="signIn",d={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8},f={upperCase:{regex:/(.*[A-Z].*)/,literal:"",hasError:!1},lowerCase:{regex:/(.*[a-z].*)/,literal:"",hasError:!1},numeric:{regex:/(.*\d.*)/,literal:"",hasError:!1},passwordLength:{regex:/(.{8,})/,literal:"",hasError:!1}},h={headerSignIn:"signInPopUpHeading",headerSignup:"createAccountPopUpHeading",fyf_signIn:"fyfFlowSignInHeading",fyf_signUp:"fyfFlowSignUpHeading",apply_signIn:"applyFlowSignInHeading",apply_signUp:"applyFlowSignUpHeading",visitor_saved_jobs_signUp:"savedJobsSignUpHeading",visitor_saved_jobs_signIn:"savedJobsSignInHeading"},u=function(e){function t(t,i,o,r){var s=e.call(this,t,i,a)||this;return s.commonService=i,s.candidateLoginService=o,s.eventAggregator=r,s.isDisabled=!1,s.isPasswordVisible=!1,s.staySignIn=!0,s.privacyDataConsent=!1,s.privacyConsentError=!1,s.privacyConsentReqFlag=!1,s.profileDetails={},s.isLoggedIn=!1,s.isDialogOpen=!1,s.signInModel={email:"",password:""},s.hasErrors=!1,s.errors={email:{},password:{},server:{}},s.step=p,s.isValidEmail=!1,s.isValidPassword=!1,s.isDropdownOpen=!1,s.socialProvider="",s.invalidCredentials=!1,s.subscriptions=[],s.resendEmail=!1,s.resetPasswordModel={rpToken:"",newPassword:""},s.pwdRegexMap=f,s.isHeadingDisabled=!1,s.cvUploaded=!1,s.tokenInvalid=!1,s.anonymousEmail="",s.showPasswordSrOnly=!1,s.passwordErrorSrOnly=!1,s.passwordInstructSrOnly=!1,s.isFirstTimeUser=!0,s.userState="",s.isProfileDataAvailable=!1,s.registeredSuccessfully=!1,s.piiConsentData={},s.piiConsentError=!1,s.piiConsentContext={},s.showConsentsForm=!1,s.submitData=!1,s.consentPrefill=!0,s.socialLoginContext={},s.preferredName=!1,s.privacyConsentPreCheck=!1,s.handleEscape=function(e){var t=s.element.querySelector(".ph-a11y-modal-area");"Escape"!=e.key&&27!==e.keyCode&&27!==e.which&&e.target!=t||s.closePopup()},s.handleDropdownOutsideScope=function(){var e=s.handleOutsideScopeEvents(event,"post-sign-in-action-area");void 0!=e&&(s.isDropdownOpen=e)},s.handleOutsideScopeEvents=function(e,t){var i,o,r=e.target,s=!1;if(e.keyCode===d.RETURN||e.keyCode==d.TAB||void 0==e.keyCode)for(;r;)if(r=r.parentElement,o=r&&r.classList)if(null!=r&&o.contains(t)){if(o.contains(t)){s=!1;break}}else s=!0;else r||(s=!0);return(s||e.keyCode==d.ESC)&&(i=!1),i},s.resetProfileData=function(){s.anonymousEmail="",s.signInModel.email=""},s.element=t,s}return __extends(t,e),t.prototype.attached=function(){var e=this,t=this.commonService.getSiteSettings("videoAssessmentApply"),i=this.commonService.getPageName();this.preferredName=this.commonService.getSiteSettings("preferredName");var o=this.widgetContext&&this.widgetContext.context;if(t&&"applythankyou"==i&&"header"!=o)return void this.eventAggregator.subscribe("triggercandidatelogin",function(t){e.initCandidateInfo()});this.initCandidateInfo()},t.prototype.initCandidateInfo=function(){var t=this,i=this.commonService.getSiteSettings("navItems");if(i&&i.candidateHome){e.prototype.attached.call(this),this.getPiiConsentData(),0==this.commonService.getSiteSettings("consentPrefill")&&(this.consentPrefill=!1),this.widgetContext=this.widgetContext||{},this.userState=this.commonService.getSegmentedUserState&&this.commonService.getSegmentedUserState();var o=window.location.hash;this.subscriptions.push(this.eventAggregator.subscribe("ph:hash:triggerCandidatePopup",function(e){t.ignoreMulTriggerHashPopup=!0,setTimeout(function(){t.isEventRaisedForTriggerHashPopup&&!t.isLoggedIn&&("#profilelogin"===o?t.handleDialogModal("signIn"):"#createprofile"===o&&t.handleDialogModal("signUp"))},150)})),this.fetchValidateJwtToken().then(function(){t.getContextBasedHeading(),t.getStateBasedHeading();var i=t.widgetContext.context;"fyf"==i&&e.prototype.focusElement.call(t,".ph-a11y-focus",200),t.isLoggedIn||"header"!==i||t.isEventRaisedForTriggerHashPopup||t.ignoreMulTriggerHashPopup||(t.isEventRaisedForTriggerHashPopup=!0,t.eventAggregator.publish("ph:hash:triggerCandidatePopup",{}))}),this.subscribeEvents(),this.isPrivacyDataConsentCheckBoxRequired(),this.flowType=this.flowType||"signUp",this.initialFlowType=this.flowType,window.localStorage&&window.localStorage.getItem("_li")&&(this.isFirstTimeUser=!1),document.addEventListener("mouseup",this.handleDropdownOutsideScope,!0),document.addEventListener("keyup",this.handleDropdownOutsideScope,!0),"resetPassword"==this.initialFlowType&&this.checkValidToken()}},t.prototype.getPiiConsentData=function(){var e=this,t=r.WidgetConfig.v1.ddoKeyGetPiiConsentConfig;this.candidateLoginService.makeDDORequest(a,t).then(function(i){if(i&&i.status&&"success"==i.status&&i.data)window.phApp&&window.phApp.ddo&&(window.phApp.ddo[t]=i),e.piiConsentData=i.data,e.handleConsentData();else{var o=e.commonService.getSiteSettings("piiConsentConfig");o&&(e.piiConsentData=JSON.parse(JSON.stringify(o)),e.handleConsentData())}})},t.prototype.handleConsentData=function(){this.piiConsentData&&this.piiConsentData.length&&(this.piiConsentContext={},this.piiConsentContext.consentData=this.piiConsentData,this.piiConsentContext.submit=this.signUp.bind(this),this.piiConsentContext.submitFocus=this.element.querySelector(".submit"),this.socialLoginContext.consentData=this.piiConsentData,this.socialLoginContext.checkConsentError=this.hasPiiErrors.bind(this),this.socialLoginContext.handleError=this.socialLoginError.bind(this))},t.prototype.socialLoginError=function(){this.piiConsentError&&(this.piiConsentContext&&this.piiConsentContext.triggerPopup&&this.piiConsentContext.triggerPopup(),e.prototype.trackWidgetClick.call(this,"pii-popup-trigger",{}),this.consentsForm())},t.prototype.isPrivacyDataConsentCheckBoxRequired=function(){this.privacyConsentReqFlag=this.commonService.getSiteSettings("privacyDataConsentCheckBox"),this.commonService.getSiteSettings("privacyDataConsentPreCheck")&&(this.privacyDataConsent=!0,this.privacyConsentPreCheck=!0)},t.prototype.widgetContextChanged=function(e,t){e&&e.triggerPopup&&(this.isHeadingDisabled=!0,this.handleDialogModal(this.flowType,e.closeSelector)),e&&e.profile&&e.profile.email&&(this.anonymousEmail=e.profile.email)&&(this.signInModel.email=this.anonymousEmail),e&&e.resumeUploaded&&(this.cvUploaded=!0),this.getContextBasedHeading()},t.prototype.getContextBasedHeading=function(){if(this.widgetContext&&this.widgetContext.context&&this.widgetContext.context.length&&this.widgetBundle)switch(this.widgetContext.context){case"fyf":case"fyf_container":this.widgetBundle[h.fyf_signIn]&&(this.widgetBundle[h.headerSignIn]=this.widgetBundle[h.fyf_signIn]),this.widgetBundle[h.fyf_signUp]&&(this.widgetBundle[h.headerSignup]=this.widgetBundle[h.fyf_signUp]);break;case"apply":this.widgetBundle[h.apply_signIn]&&(this.widgetBundle[h.headerSignIn]=this.widgetBundle[h.apply_signIn]),this.widgetBundle[h.apply_signUp]&&(this.widgetBundle[h.headerSignup]=this.widgetBundle[h.apply_signUp])}},t.prototype.getStateBasedHeading=function(){(!this.widgetContext||this.widgetContext&&"apply"!=this.widgetContext.context)&&("visitor"==this.userState&&!this.isProfileDataAvailable&&this.widgetBundle?(this.widgetBundle[h.visitor_saved_jobs_signIn]&&(this.widgetBundle[h.headerSignIn]=this.widgetBundle[h.visitor_saved_jobs_signIn]),this.widgetBundle[h.visitor_saved_jobs_signUp]&&(this.widgetBundle[h.headerSignup]=this.widgetBundle[h.visitor_saved_jobs_signUp])):this.isProfileDataAvailable&&this.widgetBundle&&(this.widgetBundle[h.fyf_signIn]&&(this.widgetBundle[h.headerSignIn]=this.widgetBundle[h.fyf_signIn]),this.widgetBundle[h.fyf_signUp]&&(this.widgetBundle[h.headerSignup]=this.widgetBundle[h.fyf_signUp])))},t.prototype.setValueInLocalStorage=function(){window.localStorage&&!window.localStorage.getItem("_li")&&window.localStorage.setItem("_li","1")},t.prototype.hasPiiErrors=function(){var e=this;return this.piiConsentError=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.piiConsentError=!0)}),this.piiConsentError},t.prototype.isButtonDisabled=function(){var e=this;this.isDisabled=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.isDisabled=!0)}),!this.isButtonDisabled&&(this.piiConsentError=!1)},t.prototype.signIn=function(){var t=this,i=this.validateEmail(!0),o=this.validatePassword(this.signInModel.password,!0,i);this.hasErrors=i||o,this.errors.server={};var s=this.widgetContext&&this.widgetContext.context||"";if(this.hasErrors)this.focusToErrorField();else{var n={email:this.signInModel.email,password:this.signInModel.password};!this.staySignIn&&(n.unTrustedDevice=!0),"apply"===s&&e.prototype.trackWidgetClick.call(this,"ch_signin_trigger_apply_ty"),this.candidateLoginService.makeDDORequest(a,r.WidgetConfig.v1.ddoKeyCandidateSignIn,n).then(function(i){if(i&&"success"==i.status&&200==i.code){t.setEagerLoadFlowType();var o={context:s||t.commonService.getPageName()};e.prototype.trackWidgetClick.call(t,"profile_signIn_click",o),"resetPassword"==t.initialFlowType?window.location.href=t.commonService.getBaseUrl():(t.fetchValidateJwtToken(!0),t.closePopup(),t.resetErrorFields()),t.setValueInLocalStorage(),"apply"===s&&e.prototype.trackWidgetClick.call(t,"ch_signin_apply_ty")}else i&&"failure"==i.status&&405==i.code&&i.data?(t.isValidEmail=!1,t.errors.email.error=!0,t.errors.email.code="E103",t.errors.email.socialProvider=i.data.socialProvider,t.focusToField("[ref='loginEmail']")):i&&"failure"==i.status&&404==i.code?(t.isValidPassword=!1,t.errors.password.error=!0,t.errors.password.code="E103",t.focusToField("[ref='loginPassword']")):i&&"failure"==i.status&&401==i.code?(t.isValidEmail=!1,t.errors.email.error=!0,t.errors.email.code="E105",t.focusToField("[ref='loginEmail']")):t.showErrorMsg("E500")})}},t.prototype.fetchValidateJwtToken=function(t){var i=this;return t=t||!1,e.prototype.unhideLoader.call(this),this.candidateLoginService.makeDDORequest(a,r.WidgetConfig.v1.ddoKeyValidateJwtToken,{}).then(function(o){return o&&o.data?(i.isLoggedIn=o.data.isValidToken&&!o.data.isAnonymous,o.data.isSocialLogin&&i.setValueInLocalStorage(),i.isLoggedIn?(i.isProfileDataAvailable=!0,i.fetchProfileData(t,!1)):o.data.isAnonymous?(i.isProfileDataAvailable=!0,i.fetchProfileData(t,!0)):e.prototype.hideLoader.call(i)):e.prototype.hideLoader.call(i),!0},function(t){new Error(t),e.prototype.hideLoader.call(i)})},t.prototype.fetchProfileData=function(t,i){var o=this;this.candidateLoginService.makeDDORequest(a,r.WidgetConfig.v1.ddoKeyMergedProfile,{}).then(function(r){if(r&&Object.keys(r).length&&"success"==r.status){if(i?(o.anonymousEmail=r.email,o.anonymousEmail&&(o.signInModel.email=o.anonymousEmail)):o.profileDetails.profile=r,t){o.publishSignInEvents(r);var s={context:"candidateProfile"};o.widgetContext=o.widgetContext||{context:"header"},s.widgetContext=o.widgetContext.context,o.eventAggregator.publish("getUserProfileData",s)}o.piiConsentData&&o.piiConsentData.length&&o.consentPrefill&&o.piiConsentData.forEach(function(e){r&&r[e.type]&&(e.isChecked=!0)})}else o.isLoggedIn=!1;e.prototype.hideLoader.call(o)},function(t){new Error(t),e.prototype.hideLoader.call(o)})},t.prototype.publishSignInEvents=function(e){this.eventAggregator.publish("ph:candidateLoggedinEvent",e),this.eventAggregator.publish("jobCartUpdatedCount"),this.commonService.raiseCustomEvent&&(this.commonService.raiseCustomEvent("ph:candidateLoggedinEvent",e),this.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount",""))},t.prototype.checkEmailValidation=function(){this.isValidEmail=l.test(this.signInModel.email)},t.prototype.checkPasswordValidation=function(e){var t=this,i=this.element.querySelector('[id="createPassword"]');i&&i.removeAttribute("aria-describedby"),e=e||this.signInModel.password,this.isValidPassword=c.test(e),this.errors.password.error?(i&&i.setAttribute("aria-describedby","errorCreatePasswordSrOnly"),this.passwordErrorSrOnly=!0):i&&i.setAttribute("aria-describedby","errorCreatePassword"),setTimeout(function(){t.passwordErrorSrOnly=!1},1e3)},t.prototype.validateEmail=function(e){var t=this;this.errors.email.error=!1,this.errors.email.srHidden=!!e;var i=!1;return this.signInModel.email?l.test(this.signInModel.email)?(this.errors.email.code=void 0,i=!1):(this.errors.email.code="E102",i=!0):(this.errors.email.code="E101",i=!0),setTimeout(function(){t.errors.email.error=i},0),i},t.prototype.validatePassword=function(e,t,i){var o=this;e=e||this.signInModel.password,this.errors.password.error=!1,this.errors.password.srHidden=!!i;var r=!1;return t?e.length?(this.errors.password.code=void 0,r=!1):(this.errors.password.code="E101",r=!0):c.test(e)?(this.errors.password.code=void 0,Object.keys(this.pwdRegexMap).forEach(function(e){o.pwdRegexMap[e].hasError=!1}),r=!1):(Object.keys(this.pwdRegexMap).forEach(function(t){o.pwdRegexMap[t].regex.test(e)?o.pwdRegexMap[t].hasError=!1:o.pwdRegexMap[t].hasError=!0}),r=!0),this.errors.password.error=r,r},t.prototype.validateNewPassword=function(){return this.validatePassword(this.resetPasswordModel.newPassword)},t.prototype.forgotPassword=function(){var t=this;this.resetErrorFields(),e.prototype.unhideLoader.call(this),e.prototype.hideLoader.call(this),this.step="forgotPassword",setTimeout(function(){t.focusToField("[ref='loginEmail']")},100)},t.prototype.sendPswdResetLink=function(){var t=this;if(this.hasErrors=this.validateEmail(!0),this.hasErrors)this.focusToField("[ref='loginEmail']");else{var i={email:this.signInModel.email};this.candidateLoginService.makeDDORequest(a,r.WidgetConfig.v1.ddoKeySendResetPasswordLink,i).then(function(i){i&&("success"==i.status||200==i.status||"failure"==i.status&&401==i.code)?(e.prototype.trackWidgetClick.call(t,"reset_password_link_click"),t.resetErrorFields(),e.prototype.unhideLoader.call(t),e.prototype.hideLoader.call(t),t.step="resetPasswordLink",setTimeout(function(){t.focusToField(".ph-a11y-popup-start-focus ")},100),t.tokenInvalid=!1):t.showErrorMsg("E500")})}},t.prototype.resendPswrdResetLink=function(){this.resendEmail=!0,this.sendPswdResetLink()},t.prototype.changeFlowType=function(e,t){var i=this;this.resetErrorFields(),this.flowType=e,this.step=t||p,this.signInModel.password="",this.resetPasswordModel.newPassword="",this.isPasswordVisible=!1,this.isValidPassword=!1,this.staySignIn=!0,this.privacyConsentError=!1,Object.keys(this.pwdRegexMap).forEach(function(e){i.pwdRegexMap[e].hasError=!1}),setTimeout(function(){i.focusToField("[ref='loginEmail']")},100)},t.prototype.isPrivacyConsentChecked=function(){this.privacyDataConsent&&(this.privacyConsentError=!1)},t.prototype.handleDialogModal=function(e,t){this.isDialogOpen=!0,t?(this.isDialogOpen=!0,this.addModalPopup("[ref='loginEmail']",t)):(this.flowType=e,this.initialFlowType=e,this.isDialogOpen=!0,"signIn"==e?this.addModalPopup("[ref='loginEmail']",".sign-in-link"):"signUp"==e&&this.addModalPopup("[ref='loginEmail']",".create-account-link"))},t.prototype.addModalPopup=function(t,i){var o=this;setTimeout(function(){var r="string"==typeof i?o.element.querySelector(i):i,s=o.element.querySelector(t);o.element.addEventListener("keyup",o.handleEscape),o.element.addEventListener("click",o.handleEscape),e.prototype.openDialogPopup.call(o,"ph-a11y-modal-area",r,s)},0),setTimeout(function(){o.element.querySelector("[ref='loginEmail']")&&o.anonymousEmail&&o.anonymousEmail.length&&(o.element.querySelector("[ref='loginEmail']").value=o.anonymousEmail)},50)},t.prototype.closePopup=function(){this.isDialogOpen=!1,e.prototype.closeDialogPopup.call(this),this.signInModel.password="",this.signInModel.email="",this.resetPasswordModel.newPassword="",this.step=p,this.flowType=this.initialFlowType,this.isValidEmail=!1,this.isValidPassword=!1,this.resendEmail=!1,this.isPasswordVisible=!1,this.cvUploaded=!1,this.piiConsentError=!1,this.showConsentsForm=!1,this.resetErrorFields(),this.privacyConsentError=!1,this.widgetContext&&"fyf_container"==this.widgetContext.context&&this.widgetContext.widgetRef&&this.widgetContext.widgetRef.closePopup&&this.widgetContext.widgetRef.closePopup(),this.element.removeEventListener("keyup",this.handleEscape),this.element.removeEventListener("click",this.handleEscape)},t.prototype.toggleDropDown=function(){this.isDropdownOpen=!this.isDropdownOpen},t.prototype.consentsForm=function(t){var i=this;this.piiConsentData&&this.piiConsentData.length>=3&&(e.prototype.unhideLoader.call(this),e.prototype.hideLoader.call(this),this.showConsentsForm=!0,this.submitData=!!t,this.isButtonDisabled(),setTimeout(function(){i.focusToField(".back-btn")},100))},t.prototype.closeConsentsForm=function(t){var i=this;this.showConsentsForm=!1,t?e.prototype.trackWidgetClick.call(this,"pii-consent-submit",{}):e.prototype.trackWidgetClick.call(this,"pii-consent-done",{}),setTimeout(function(){i.focusToField(".consents-link")},100)},t.prototype.signUp=function(){var t=this;this.privacyConsentError=!1;var i=this.validateEmail(!0),o=this.validatePassword(this.signInModel.password,!1,i);this.hasErrors=i||o,this.errors.server={};var s=this.widgetContext&&this.widgetContext.context||"";if(this.hasPiiErrors(),this.piiConsentError&&!this.hasErrors)return this.piiConsentContext&&this.piiConsentContext.triggerPopup&&this.piiConsentContext.triggerPopup(!0),e.prototype.trackWidgetClick.call(this,"pii-popup-trigger",{}),void this.consentsForm(!0);if(this.hasErrors){if(this.privacyConsentReqFlag&&!this.privacyDataConsent)return void(this.privacyConsentError=!0);this.focusToErrorField()}else{if(this.closeConsentsForm(!0),this.submitData=!1,this.privacyConsentReqFlag&&!this.privacyDataConsent&&(!this.piiConsentData||!this.piiConsentData.length))return void(this.privacyConsentError=!0);var n={email:this.signInModel.email,password:this.signInModel.password};!this.staySignIn&&(n.unTrustedDevice=!0),"apply"===s&&e.prototype.trackWidgetClick.call(this,"ch_signup_trigger_apply_ty"),n.profile={},this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(n.profile[e.type]=!!e.isChecked)}),this.candidateLoginService.makeDDORequest(a,r.WidgetConfig.v1.ddoKeyCandidateRegistration,n).then(function(i){if(i&&"success"==i.status&&200==i.code){t.setEagerLoadFlowType();var o={context:s||t.commonService.getPageName()};e.prototype.trackWidgetClick.call(t,"profile_signUp_click",o),t.closePopup(),t.fetchValidateJwtToken(!0),t.resetErrorFields(),t.setValueInLocalStorage(),e.prototype.focusElement.call(t,".uploadSuccess",300),"apply"===s&&e.prototype.trackWidgetClick.call(t,"ch_signup_apply_ty"),setTimeout(function(){t.registeredSuccessfully=!0,setTimeout(function(){t.registeredSuccessfully=!1},2e3)},1e3)}else i&&"failure"==i.status&&405==i.code&&i.data?(t.isValidEmail=!1,t.errors.email.error=!0,t.errors.email.code="E103",t.errors.email.socialProvider=i.data.socialProvider,t.focusToField("[ref='loginEmail']")):i&&"failure"==i.status&&402==i.code?(t.isValidEmail=!1,t.errors.email.error=!0,t.errors.email.code="E104",t.focusToField("[ref='loginEmail']")):t.showErrorMsg("E500")})}},t.prototype.detached=function(){document.removeEventListener("mouseup",this.handleDropdownOutsideScope,!0),document.removeEventListener("keyup",this.handleDropdownOutsideScope,!0),document.removeEventListener("ph:site:removeProfile",this.resetProfileData),document.removeEventListener("ph:bot:removeProfile",this.resetProfileData),this.subscriptions.forEach(function(e){e.dispose()}),this.changeFlowType(this.initialFlowType)},t.prototype.resetErrorFields=function(){var e=this;setTimeout(function(){e.errors.email={},e.errors.password={},e.errors.server={},e.socialProvider="",Object.keys(e.pwdRegexMap).length&&Object.keys(e.pwdRegexMap).forEach(function(t){e.pwdRegexMap[t]&&(e.pwdRegexMap[t].hasError=!1)})},0)},t.prototype.showErrorMsg=function(e){this.errors.server.error=!0,this.errors.server.code=e},t.prototype.subscribeEvents=function(){var e=this;this.subscriptions.push(this.eventAggregator.subscribe("candidateProfileUpdated",function(t){e.profileDetails.profile=t,e.isLoggedIn=!0})),this.subscriptions.push(this.eventAggregator.subscribe("ph:candidateLoggedinEvent",function(t){e.profileDetails.profile=t,e.isLoggedIn=!0})),this.subscriptions.push(this.eventAggregator.subscribe("getUserProfileData",function(t){"candidateProfile"!=t.context&&e.fetchProfileData(!1,!0)})),document.addEventListener("ph:site:removeProfile",this.resetProfileData),document.addEventListener("ph:bot:removeProfile",this.resetProfileData)},t.prototype.checkValidToken=function(){var t=this;this.resetPasswordModel.rpToken=e.prototype.getQueryParam.call(this,"rp");var i={rpToken:this.resetPasswordModel.rpToken};this.candidateLoginService.makeDDORequest(a,r.WidgetConfig.v1.ddoKeyIsValidToken,i).then(function(e){e&&"success"==e.status?t.tokenInvalid=!1:e&&"failure"==e.status&&403==e.code&&(t.tokenInvalid=!0,t.changeFlowType("signIn","forgotPassword"))},function(e){new Error(e)})},t.prototype.resetPassword=function(){var t=this;if(this.hasErrors=!this.tokenInvalid&&this.validateNewPassword(),this.errors.server={},this.hasErrors||this.tokenInvalid)this.focusToField("[ref='loginPassword']");else{this.resetPasswordModel.rpToken=this.resetPasswordModel.rpToken||e.prototype.getQueryParam.call(this,"rp");var i={rpToken:this.resetPasswordModel.rpToken,newPassword:this.resetPasswordModel.newPassword};this.candidateLoginService.makeDDORequest(a,r.WidgetConfig.v1.ddoKeyResetPassword,i).then(function(i){i&&"success"==i.status?(e.prototype.trackWidgetClick.call(t,"reset_password_click"),t.resetErrorFields(),t.resetPasswordModel.password="",t.changeFlowType("signIn")):i&&"failure"==i.status&&403==i.code?(t.resetPasswordModel.password="",t.tokenInvalid=!0):t.showErrorMsg("E500")})}},t.prototype.setEagerLoadFlowType=function(){var e={};e.flowType="candidateProfile",this.candidateLoginService.makeDDORequest(a,r.WidgetConfig.v1.ddoKeyEagerLoad,e).then(function(e){})},t.prototype.showHidePassword=function(){var e,t=this;this.isPasswordVisible=!this.isPasswordVisible,clearTimeout(e),this.showPasswordSrOnly=!0,e=setTimeout(function(){t.showPasswordSrOnly=!1},50)},t.prototype.focusToField=function(e){this.element.querySelector(e)&&this.element.querySelector(e).focus()},t.prototype.focusToErrorField=function(){var e=this;setTimeout(function(){if(e.errors.email.error)e.focusToField("[ref='loginEmail']");else if(e.errors.password.error){var t=document.querySelector('[id="createPassword"]');t.setAttribute("aria-describedby","errorCreatePasswordSrOnly"),e.focusToField("[ref='loginPassword']")}},0)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",String)],t.prototype,"flowType",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],t.prototype,"widgetContext",void 0),t=__decorate([i.customElement(a),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(u=void 0!==o.CommonService&&o.CommonService)&&u||Object,s.CandidateLoginService,n.EventAggregator])],t);var u}(o.PhenomWidget);t.CandidateLogin=u}),define("text!v1/ph-candidate-login.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-candidate-login-v1/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}
}),define("v1/base-step-provider",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8},o=function(){function e(e,t,o,r,s,n){var a=this;this.destroy=function(){},this.handleActionOutsideScope=function(e){var t,o=e.target,r=!1;if(e.keyCode===i.RETURN||e.keyCode==i.TAB||void 0==e.keyCode)for(;o;)if(o=o.parentElement,!(t=o&&o.className)||t.constructor!=Array&&t.constructor!=String)o||(r=!0);else if(null==o||-1==t.indexOf("ph-combobox-dropdown-area"))r=!0;else if(t.indexOf("ph-combobox-dropdown-area")>=0){r=!1;break}if(r||e.keyCode==i.ESC){var s=a.element.querySelector(".search-dropdown-list");s&&(s.scrollTop=0),a.handleBlur()}},this.handleKeyup=function(e){var t=e.target;if(t){switch(e.which||e.keyCode){case i.UP:case i.DOWN:case i.RETURN:case i.ESC:return void e.preventDefault();case i.BACKSPACE:if(!t.value)return void a.onBackspace()}a.handleStepKeyup(t)}},this.handleKeydown=function(e){var t=e.target;if(t){switch(e.which||e.keyCode){case i.DOWN:a.moveDown(t);break;case i.UP:a.moveUp(t);break;case i.RETURN:return void a.onEnter(t)}a.handleStepKeydown()}},this.element=e,this.widgetRef=r,this.stepConfig=s,this.elementTag=t,this.version=o,this.a11yAutoComplete=n}return e.prototype.makeDdoRequest=function(e,t,i){return this.widgetRef.makeDdoRequest(e,t,i)},e.prototype.handleFyfActions=function(e,t){this.widgetRef.handleFyfActions(e,t)},e.prototype.fetchAutoCompleteInput=function(e){var t=this;setTimeout(function(){var i=t.element.querySelectorAll(".ph-autocomplete-input-wrapper");if(i)for(var o=0;o<i.length;o++)i[o];t.inputField=t.element.querySelector("[data-ph-autocomplete-input]"),t.inputField&&t.setupEventListeners(t.inputField),e&&e()},300)},e.prototype.setupEventListeners=function(e){},e.prototype.focusToStepBlock=function(){var e=this;setTimeout(function(){var t=e.element.querySelector(".ph-common-slection-area");t&&(t.scrollTop=t.scrollHeight);var i=e.element.querySelector(".ph-a11y-fyf-step-block");if(i)return i.focus(),i.setActive&&i.setActive(),document.activeElement===i},500)},e.prototype.focusSearch=function(){var e=this;this.widgetRef.showFocus=!0,setTimeout(function(){e.inputField&&e.inputField.focus()},150)},e.prototype.addSelectionRemovalSronly=function(e){var t=this;this.widgetRef.selectionRemovalSrText=e,this.widgetRef.selectionRemovalSronly=!0,setTimeout(function(){t.widgetRef.selectionRemovalSronly=!1},100)},e}();t.BaseStepProvider=o}),define("v1/ph-find-your-fit-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyStepConfig:"fyfConfig",ddokeyStepPosition:"",ddoKeyProfileData:"mergedProfileV2",ddoKeyCiProfileUpdate:"ciProfileUpdate",ddoKeyFreshProfileCreation:"uploadCvMergeFlow",ddoKeyCategories:"categories",ddoKeyMasterDataV2:"categoryMasterDataV2",ddoKeyRecentTitles:"fyfTitles",ddoKeySkills:"fyfSkills",ddoKeySkillSuggestions:"fyfSkillSuggestions",ddoKeyworkExperience:"",ddoKeyLocations:"fyfLocations",ddoKeyPreferredLocations:"ddoKeyPreferredLocations",ddoKeyContactInfo:"ddoKeyContactInfo",ddoKeySubCategories:"subCategories",ddoKeyGetPiiConsentConfig:"getPiiConsentConfig"}}});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-authorise",["require","exports","./base-step-provider"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.focusToStepBlock.call(this)},t.prototype.handlePrevStep=function(){this.widgetRef.fyfStepConfig.prevStepRef("firstStep")},t}(i.BaseStepProvider);t.FyfStepAuthorise=o});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-category",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){var e=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.categories||[]));this.widgetRef.fyfStepConfig.categories={},this.widgetRef.fyfStepConfig.categories.selectedCategories=[],this.widgetRef.fyfStepConfig.categories.selectedCategories=e,this.getCategories()},t.prototype.getCategoryMasterData=function(t){var i=this;this.widgetRef.unhideLoader(),this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyMasterDataV2,{}).then(function(o){o=o.data||{},i.widgetRef.stepData=i.widgetRef.stepData||{},i.widgetRef.stepData.categories=i.mergeMasterCatWithSearchCat(o,t),i.widgetRef.stepData.categories.length?i.widgetRef.noCategories=!1:i.widgetRef.fyfStepConfig.showEmptyCategories?i.widgetRef.noCategories=!0:"next"==i.widgetRef.handleEmptyCatFlow?i.widgetRef.fyfStepConfig.funRef(!1):i.widgetRef.fyfStepConfig.prevStepRef(!1),e.prototype.focusToStepBlock.call(i),i.widgetRef.hideLoader()})},t.prototype.getCategories=function(){var e=this;this.widgetRef.unhideLoader(),this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyCategories,{}).then(function(t){t&&t.data&&t.data.category&&(e.getCategoryMasterData(t.data.category),e.widgetRef.hideLoader())})},t.prototype.mergeMasterCatWithSearchCat=function(e,t){var i=[],o=[],r=[],s=[];if(this.widgetRef.fyfStepConfig.orderType&&"default"!=this.widgetRef.fyfStepConfig.orderType?"custom"==this.widgetRef.fyfStepConfig.orderType&&(i=e.categories||[],o=t):(i=t,o=e.categories||[]),i.length){var n=void 0,a=void 0,l=void 0,c=void 0,p=void 0;for(a=0;a<i.length;a++)r.push(i[a].internalId);for(l=0;l<o.length;l++)s.push(o[l].internalId);for(c=0;c<r.length;c++)if(i[c].isRemoveEle=!0,-1!=(n=s.indexOf(r[c]))){i[c].isRemoveEle=!1,p=o[n];for(var d in p)(void 0==i[c][d]&&p.hasOwnProperty(d)||p.hasOwnProperty(d)&&!i[c].hasOwnProperty(d))&&(i[c][d]=p[d])}i.length&&i.forEach(function(e){e.key||(e.key=e.category)})}return i||[]},t.prototype.handleActions=function(){var e=!1,t=this.widgetRef.fyfStepConfig.categories.selectedCategories||[],i=this.widgetRef.fyfStepConfig.profileData.categories||[];if(t.length){if(t.length==i.length){for(var o=0;o<t.length;o++)!function(o){var r=t[o];-1==i.findIndex(function(e){return e==r})&&(e=!0)}(o);t=e?t:"unChanged"}}else t=!1,i&&i.length>0&&(t=[]);this.handleFyfActions(t)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.categories.selectedCategories||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t}(i.BaseStepProvider);t.FyfStepCategory=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-contactInfo-v1",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.errors={},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.fyfStepConfig.contactInfo={},this.widgetRef.fyfStepConfig.contactInfo.information={},this.widgetRef.fyfStepConfig.profileData.lastName?(this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName+" "+this.widgetRef.fyfStepConfig.profileData.lastName,this.widgetRef.fyfStepConfig.profileData.lastName=""):this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName,this.widgetRef.fyfStepConfig.contactInfo.information.email=this.widgetRef.fyfStepConfig.profileData.email,this.widgetRef.fyfStepConfig.contactInfo.information.phone=this.widgetRef.fyfStepConfig.profileData.phone,this.widgetRef.preferredName&&(this.widgetRef.fyfStepConfig.contactInfo.information.preferredName=this.widgetRef.fyfStepConfig.profileData.preferredName),this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.stepData.name={},this.widgetRef.preferredName&&(this.widgetRef.stepData.preferredName={}),this.widgetRef.stepData.email={},this.widgetRef.stepData.phone={},this.widgetRef.stepData.name.validField=!1,this.widgetRef.stepData.email.validField=!1,this.widgetRef.stepData.phone.validField=!1,this.widgetRef.piiConsentError=!1,this.widgetRef.fyfStepConfig.contactInfo.information.firstName&&this.nameFieldValidation(),this.widgetRef.preferredName&&this.widgetRef.fyfStepConfig.contactInfo.information.preferredName&&this.preferredNameFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.email&&this.emailFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.phone&&this.phoneFieldValidation(),e.prototype.focusToStepBlock.call(this)},t.prototype.fetchContactInfo=function(){var e=this;this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyContactInfo,{}).then(function(t){t&&t.data&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.contactInfo=t.data)})},t.prototype.handleActions=function(){this.validation()},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.contactInfo.information;this.widgetRef.fyfStepConfig.prevStepRef(e)},t.prototype.fieldValidation=function(e){switch(e){case"name":this.nameFieldValidation();break;case"email":this.emailFieldValidation();break;case"phone":this.phoneFieldValidation();break;case"preferredName":this.preferredNameFieldValidation()}},t.prototype.nameFieldValidation=function(){return this.widgetRef.stepData.name={},this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.contactInfo.information.firstName?this.widgetRef.fyfStepConfig.contactInfo.information.firstName.trim():"",this.widgetRef.fyfStepConfig.contactInfo.information.firstName?(this.widgetRef.stepData.name.error=!1,this.hasErrors=!1,this.widgetRef.stepData.name.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.name.code="E101",this.widgetRef.stepData.name.error=!0,this.widgetRef.stepData.name.validField=!1),this.hasErrors},t.prototype.preferredNameFieldValidation=function(){return this.widgetRef.stepData.preferredName={},this.widgetRef.fyfStepConfig.contactInfo.information.preferredName?(this.widgetRef.stepData.preferredName.error=!1,this.hasErrors=!1,this.widgetRef.stepData.preferredName.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.preferredName.code="E101",this.widgetRef.stepData.preferredName.error=!0,this.widgetRef.stepData.preferredName.validField=!1),this.hasErrors},t.prototype.emailFieldValidation=function(){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return this.widgetRef.stepData.email={},this.widgetRef.fyfStepConfig.contactInfo.information.email?e.test(this.widgetRef.fyfStepConfig.contactInfo.information.email)?(this.widgetRef.stepData.email.error=!1,this.hasErrors=!1,this.widgetRef.stepData.email.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E102",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E101",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1),this.hasErrors},t.prototype.phoneFieldValidation=function(){this.widgetRef.stepData.phone={};var e=/^(\+?[0-9\-\(\) ]+)?$/;if(this.widgetRef.fyfStepConfig.contactInfo.information.phone){var t=this.widgetRef.fyfStepConfig.contactInfo.information.phone,i=this.widgetRef.fyfStepConfig.contactInfo.information.phone.replace(/[^0-9]/g,"");return e.test(t)&&t.length<=20&&i.length>6&&i.length<=13?this.widgetRef.stepData.phone.validField=!0:(this.widgetRef.stepData.phone.code="E101",this.widgetRef.stepData.phone.error=!0,this.hasErrors=!0,this.widgetRef.stepData.phone.validField=!1),this.hasErrors}return!1},t.prototype.termsValidation=function(){return this.widgetRef.termsError=!1,this.widgetRef.piiConsentError=!1,!(!this.widgetRef.gdprConsent||this.widgetRef.acceptTerms||(this.widgetRef.termsError=!0,0))},t.prototype.hasPiiErrors=function(){var e=this;this.widgetRef.piiConsentError=!1,this.widgetRef.termsError=!1;var t=!1;return this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length&&this.widgetRef.piiConsentData.forEach(function(i){i.optional||i.isChecked||(e.widgetRef.piiConsentError=!0,t=!0)}),t},t.prototype.validation=function(){var e=!1;this.widgetRef.preferredName&&(e=this.preferredNameFieldValidation());var t=this.nameFieldValidation(),i=this.emailFieldValidation(),o=this.phoneFieldValidation(),r=!1;if(r=this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length?this.hasPiiErrors():this.termsValidation(),this.hasErrors=!!(e||t||i||o),r&&!this.hasErrors)return this.hasErrors=!0,void(this.widgetRef.piiConsentContext&&this.widgetRef.piiConsentContext.triggerPopup&&(this.widgetRef.piiConsentContext.triggerPopup(!0),this.widgetRef.trackWidgetClick&&this.widgetRef.trackWidgetClick("pii-popup-trigger",{})));if(this.hasErrors){var s=!1;this.widgetRef.preferredName&&this.widgetRef.stepData.preferredName.error?(this.widgetRef.focusElement(".ph-a11y-form-control-preferred-name",50),s=!0):this.widgetRef.stepData.name.error?(this.widgetRef.focusElement(".ph-a11y-form-control-name",50),s=!0):this.widgetRef.stepData.email.error&&!s?(this.widgetRef.focusElement(".ph-a11y-form-control-email",50),s=!0):this.widgetRef.stepData.phone.error&&!s&&this.widgetRef.focusElement(".ph-a11y-form-control-phone",50)}else this.handleFyfActions(this.widgetRef.fyfStepConfig.contactInfo.information)},t}(i.BaseStepProvider);t.FyfStepContactInfoV1=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-contactInfo",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.errors={},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.fyfStepConfig.contactInfo={},this.widgetRef.fyfStepConfig.contactInfo.information={},this.widgetRef.acceptTerms=this.widgetRef.fyfStepConfig.profileData&&this.widgetRef.fyfStepConfig.profileData.privacyConsent||!1,this.widgetRef.termsError=!1,this.widgetRef.preferredName&&(this.widgetRef.fyfStepConfig.contactInfo.information.preferredName=this.widgetRef.fyfStepConfig.profileData.preferredName),this.widgetRef.fyfStepConfig.profileData.lastName?(this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName+" "+this.widgetRef.fyfStepConfig.profileData.lastName,this.widgetRef.fyfStepConfig.profileData.lastName=""):this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.profileData.firstName,this.widgetRef.fyfStepConfig.contactInfo.information.email=this.widgetRef.fyfStepConfig.profileData.email,this.widgetRef.fyfStepConfig.contactInfo.information.phone=this.widgetRef.fyfStepConfig.profileData.phone,this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.preferredName&&(this.widgetRef.stepData.preferredName={}),this.widgetRef.stepData.name={},this.widgetRef.stepData.email={},this.widgetRef.stepData.phone={},this.widgetRef.stepData.name.validField=!1,this.widgetRef.stepData.email.validField=!1,this.widgetRef.stepData.phone.validField=!1,this.widgetRef.piiConsentError=!1,this.widgetRef.preferredName&&this.widgetRef.fyfStepConfig.contactInfo.information.preferredName&&this.preferredNameFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.firstName&&this.nameFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.email&&this.emailFieldValidation(),this.widgetRef.fyfStepConfig.contactInfo.information.phone&&this.phoneFieldValidation(),e.prototype.focusToStepBlock.call(this)},t.prototype.fetchContactInfo=function(){var e=this;this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyContactInfo,{}).then(function(t){t&&t.data&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.contactInfo=t.data)})},t.prototype.handleActions=function(){this.validation()},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.contactInfo.information;this.widgetRef.fyfStepConfig.prevStepRef(e)},t.prototype.fieldValidation=function(e){switch(e){case"preferredName":this.preferredNameFieldValidation();break;case"name":this.nameFieldValidation();break;case"email":this.emailFieldValidation();break;case"phone":this.phoneFieldValidation()}},t.prototype.nameFieldValidation=function(){return this.widgetRef.stepData.name={},this.widgetRef.fyfStepConfig.contactInfo.information.firstName=this.widgetRef.fyfStepConfig.contactInfo.information.firstName?this.widgetRef.fyfStepConfig.contactInfo.information.firstName.trim():"",this.widgetRef.fyfStepConfig.contactInfo.information.firstName?(this.widgetRef.stepData.name.error=!1,this.hasErrors=!1,this.widgetRef.stepData.name.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.name.code="E101",this.widgetRef.stepData.name.error=!0,this.widgetRef.stepData.name.validField=!1),this.hasErrors},t.prototype.preferredNameFieldValidation=function(){return this.widgetRef.stepData.preferredName={},this.widgetRef.fyfStepConfig.contactInfo.information.preferredName?(this.widgetRef.stepData.preferredName.error=!1,this.hasErrors=!1,this.widgetRef.stepData.preferredName.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.preferredName.code="E101",this.widgetRef.stepData.preferredName.error=!0,this.widgetRef.stepData.preferredName.validField=!1),this.hasErrors},t.prototype.emailFieldValidation=function(){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return this.widgetRef.stepData.email={},this.widgetRef.fyfStepConfig.contactInfo.information.email?e.test(this.widgetRef.fyfStepConfig.contactInfo.information.email)?(this.widgetRef.stepData.email.error=!1,this.hasErrors=!1,this.widgetRef.stepData.email.validField=!0):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E102",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1):(this.hasErrors=!0,this.widgetRef.stepData.email.code="E101",this.widgetRef.stepData.email.error=!0,this.widgetRef.stepData.email.validField=!1),this.hasErrors},t.prototype.phoneFieldValidation=function(){this.widgetRef.stepData.phone={};var e=/^(\+?[0-9\-\(\) ]+)?$/;if(this.widgetRef.fyfStepConfig.contactInfo.information.phone){var t=this.widgetRef.fyfStepConfig.contactInfo.information.phone,i=this.widgetRef.fyfStepConfig.contactInfo.information.phone.replace(/[^0-9]/g,"");return e.test(t)&&t.length<=20&&i.length>6&&i.length<=13?this.widgetRef.stepData.phone.validField=!0:(this.widgetRef.stepData.phone.code="E101",this.widgetRef.stepData.phone.error=!0,this.hasErrors=!0,this.widgetRef.stepData.phone.validField=!1),this.hasErrors}return!1},t.prototype.termsValidation=function(){return this.widgetRef.termsError=!1,this.widgetRef.piiConsentError=!1,!(!this.widgetRef.gdprConsent||this.widgetRef.acceptTerms||(this.widgetRef.termsError=!0,0))},t.prototype.hasPiiErrors=function(){var e=this;this.widgetRef.piiConsentError=!1,this.widgetRef.termsError=!1;var t=!1;return this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length&&this.widgetRef.piiConsentData.forEach(function(i){i.optional||i.isChecked||(e.widgetRef.piiConsentError=!0,t=!0)}),t},t.prototype.validation=function(){var e=!1;this.widgetRef.preferredName&&(e=this.preferredNameFieldValidation());var t=this.nameFieldValidation(),i=this.emailFieldValidation(),o=this.phoneFieldValidation(),r=!1;if(r=this.widgetRef.piiConsentData&&this.widgetRef.piiConsentData.length?this.hasPiiErrors():this.termsValidation(),this.hasErrors=!!(e||t||i||o),r&&!this.hasErrors)return this.hasErrors=!0,void(this.widgetRef.piiConsentContext&&this.widgetRef.piiConsentContext.triggerPopup&&(this.widgetRef.piiConsentContext.triggerPopup(!0),this.widgetRef.trackWidgetClick&&this.widgetRef.trackWidgetClick("pii-popup-trigger",{})));if(this.hasErrors){var s=!1;this.widgetRef.preferredName&&this.widgetRef.stepData.preferredName.error?(this.widgetRef.focusElement(".ph-a11y-form-control-preferred-name",50),s=!0):this.widgetRef.stepData.name.error?(this.widgetRef.focusElement(".ph-a11y-form-control-name",50),s=!0):this.widgetRef.stepData.email.error&&!s?(this.widgetRef.focusElement(".ph-a11y-form-control-email",50),s=!0):this.widgetRef.stepData.phone.error&&!s?this.widgetRef.focusElement(".ph-a11y-form-control-phone",50):this.widgetRef.termsError&&this.widgetRef.focusElement(".ph-a11y-terms-check-box",50)}else this.handleFyfActions(this.widgetRef.fyfStepConfig.contactInfo.information)},t}(i.BaseStepProvider);t.FyfStepContactInfo=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-location",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeIndex=-1,t.handleFieldFocus=function(e){var i=e&&e.target&&e.target.value;t.widgetRef.stepData.locations&&t.widgetRef.stepData.locations.length&&i&&(t.widgetRef.stepData.showLocationDropdown=!0,t.activeIndex=-1)},t.handleStepKeyup=function(e){var i=e.value;i&&i.length?t.fetchData():t.widgetRef.stepData.showLocationDropdown=!1},t.handleStepKeydown=function(e){},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.stepData=this.widgetRef.stepData||{};var t=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.preferredLocation||[]));this.widgetRef.fyfStepConfig.preferredLocation=t,this.widgetRef.fyfStepConfig.preferredLocationValue="",this.widgetRef.stepData.locations=[],this.widgetRef.showFocus=!1,this.constructSelectedLocationListOnInit(),e.prototype.fetchAutoCompleteInput.call(this),e.prototype.focusToStepBlock.call(this)},t.prototype.constructSelectedLocationListOnInit=function(){var e=this;this.widgetRef.fyfStepConfig.selectedLocation=[],this.widgetRef.fyfStepConfig.preferredLocation.forEach(function(t){e.widgetRef.fyfStepConfig.selectedLocation.push(t.location_display)})},t.prototype.handleBlur=function(){this.widgetRef.stepData.showLocationDropdown=!1,this.widgetRef.showFocus=!1},t.prototype.moveDown=function(e){if(this.widgetRef.stepData.showLocationDropdown){var t=this.widgetRef.stepData.locations||[];if(t.length){++this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveDown(this.widgetRef,e,"stepData",this.widgetRef.stepData.locations,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.moveUp=function(e){if(this.widgetRef.stepData.showLocationDropdown){var t=this.widgetRef.stepData.locations||[];if(t.length){--this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveUp(this.widgetRef,e,"stepData",this.widgetRef.stepData.locations,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.onEnter=function(e){var t=this;this.widgetRef.fyfStepConfig.preferredLocation=this.widgetRef.fyfStepConfig.preferredLocation||[];var i=this.widgetRef.stepData.locations||[];if(this.widgetRef.stepData.showLocationDropdown&&i.length){var o=!1;this.widgetRef.fyfStepConfig.preferredLocation.length&&this.widgetRef.fyfStepConfig.preferredLocation.forEach(function(e,r){e.location_display==i[t.widgetRef.stepData.activeIndex].location_display&&(o=!0)}),o||this.populateSelectedData(i[this.widgetRef.stepData.activeIndex])}},t.prototype.autoFillValue=function(){this.widgetRef.fyfStepConfig.preferredLocation=this.widgetRef.fyfStepConfig.preferredLocation||[];var e=this.widgetRef.stepData.locations||[];e.length&&this.widgetRef.stepData.showLocationDropdown&&this.widgetRef.fyfStepConfig.preferredLocation.length&&(this.widgetRef.fyfStepConfig.preferredLocationValue=e[this.widgetRef.stepData.activeIndex].location_display)},t.prototype.fetchData=function(){var e=this,t=this.widgetRef.fyfStepConfig.preferredLocationValue||"";if(t.length){var i=this.widgetRef.fyfStepConfig.locationKey||"",r=i.split(","),s={};return s.keywords=t,s.size=parseInt(this.widgetRef.fyfStepConfig.size)||10,this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyLocations,s).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.locations=[],t.data.results.forEach(function(t,i){r.find(function(e){return e.trim()==t.type})&&e.widgetRef.stepData.locations.push(t)})):e.widgetRef.stepData.locations=[],e.widgetRef.stepData.showLocationDropdown=!0,e.widgetRef.stepData.locations})}},t.prototype.populateSelectedData=function(t){this.widgetRef.fyfStepConfig.preferredLocation=this.widgetRef.fyfStepConfig.preferredLocation||[];var i={};-1==(this.widgetRef.fyfStepConfig.selectedLocation||[]).indexOf(t.location_display)&&(i.standardlocation=t.standardlocation||"",i.location_display=t.location_display||"",i.latlong=t.latlong||{},this.widgetRef.fyfStepConfig.preferredLocation.push(i),this.widgetRef.fyfStepConfig.selectedLocation.push(t.location_display),t.isLocationSelected=!0,this.widgetRef.fyfStepConfig.preferredLocationValue=""),this.widgetRef.stepData.showLocationDropdown=!1;var o=t.location_display+" location selected";e.prototype.addSelectionRemovalSronly.call(this,o),this.focusSearch()},t.prototype.clearSearch=function(){var e={};e.trait6=this.widgetRef.fyfStepConfig.preferredLocationValue,this.widgetRef.trackWidgetClick("clear_text_click",e),this.widgetRef.fyfStepConfig.preferredLocationValue="",this.widgetRef.stepData.showLocationDropdown=!1,this.focusSearch()},t.prototype.onBackspace=function(){this.widgetRef.fyfStepConfig.preferredLocationValue||this.clearSearch()},t.prototype.handleActions=function(){var e=this.widgetRef.fyfStepConfig.preferredLocation||[],t=this.widgetRef.fyfStepConfig.profileData.preferredLocation||[],i=!1;if(e.length){if(e.length==t.length){for(var o=0;o<e.length;o++)!function(o){var r=e[o].location_display;-1==t.findIndex(function(e){return e.location_display==r})&&(i=!0)}(o);e=i?e:"unChanged"}}else e=!1,t&&t.length>0&&(e=[]);this.handleFyfActions(e)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.preferredLocation||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t.prototype.removeSelectedData=function(t){var i=this;event.stopPropagation();var o=this.widgetRef.stepData.locations.findIndex(function(e){return e.location_display==i.widgetRef.fyfStepConfig.selectedLocation[t]}),r="removed location "+this.widgetRef.fyfStepConfig.selectedLocation[t];e.prototype.addSelectionRemovalSronly.call(this,r),setTimeout(function(){i.widgetRef.fyfStepConfig.preferredLocation.splice(t,1),i.widgetRef.fyfStepConfig.selectedLocation.splice(t,1),i.focusSearch()},500),-1!=o&&(this.widgetRef.stepData.locations[o].isLocationSelected=!1)},t.prototype.focusSearch=function(){e.prototype.focusSearch.call(this)},t}(i.BaseStepProvider);t.FyfStepLocation=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-recentTitle",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="clear_text_click",s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeIndex=-1,t.handleFieldFocus=function(e){var i=e&&e.target&&e.target.value;t.widgetRef.stepData.recentTitles&&t.widgetRef.stepData.recentTitles.length&&i&&(t.widgetRef.stepData.showRecentTitleDropdown=!0,t.activeIndex=-1)},t.handleStepKeyup=function(e){var i=e.value;i&&i.length?t.fetchData():t.widgetRef.stepData.showRecentTitleDropdown=!1},t.handleStepKeydown=function(e){},t.clearSearch=function(e){var i={};i.trait6=t.widgetRef.fyfStepConfig.recentTitle.value,t.widgetRef.stepData.recentTitles=[],t.widgetRef.fyfStepConfig.recentTitle.selectedTitle="",t.widgetRef.stepData.showRecentTitleDropdown=!1,t.widgetRef.fyfStepConfig.typed_recentTitle=[],t.widgetRef.fyfStepConfig.selected_recentTitle=[],e||(t.widgetRef.trackWidgetClick(r,i),t.focusSearch()),setTimeout(function(){t.widgetRef.fyfStepConfig.recentTitle.value=""},150)},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.fyfStepConfig.recentTitle=this.widgetRef.fyfStepConfig.recentTitle||{},this.widgetRef.stepData.recentTitles=[],this.widgetRef.fyfStepConfig.recentTitle.flag=1==this.widgetRef.fyfStepConfig.profileData.relevantExperience,this.widgetRef.fyfStepConfig.recentTitle.flag?(this.widgetRef.fyfStepConfig.recentTitle.selectedTitle="",this.widgetRef.fyfStepConfig.recentTitle.value=""):(this.widgetRef.fyfStepConfig.recentTitle.value=this.widgetRef.fyfStepConfig.profileData.recentTitle||"",this.widgetRef.fyfStepConfig.recentTitle.selectedTitle=this.widgetRef.fyfStepConfig.profileData.recentTitle||"",this.widgetRef.fyfStepConfig.recentTitle.value&&(this.widgetRef.fyfStepConfig.isClickOption=!0)),e.prototype.focusToStepBlock.call(this),e.prototype.fetchAutoCompleteInput.call(this)},t.prototype.handleBlur=function(){this.widgetRef.stepData.showRecentTitleDropdown=!1},t.prototype.moveDown=function(e){if(this.widgetRef.stepData.showRecentTitleDropdown){var t=this.widgetRef.stepData.recentTitles||[];if(t.length){++this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveDown(this.widgetRef,e,"stepData",this.widgetRef.stepData.recentTitles,this.activeIndex,this.element,i),
"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.moveUp=function(e){if(this.widgetRef.stepData.showRecentTitleDropdown){var t=this.widgetRef.stepData.recentTitles||[];if(t.length){--this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveUp(this.widgetRef,e,"stepData",this.widgetRef.stepData.recentTitles,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.onEnter=function(e){if(this.widgetRef.stepData.showRecentTitleDropdown){var t={};t.title=this.widgetRef.fyfStepConfig.recentTitle.value||"",t.title.length&&this.populateSelectedData(t)}},t.prototype.populateSelectedData=function(e,t){this.widgetRef.fyfStepConfig.recentTitle.selectedTitle=e.title,this.widgetRef.fyfStepConfig.recentTitle.value=e.title,this.widgetRef.stepData.showRecentTitleDropdown=!1,this.focusSearch()},t.prototype.autoFillValue=function(){var e=this.widgetRef.stepData.recentTitles;this.widgetRef.stepData.showRecentTitleDropdown&&e.length&&this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&(this.widgetRef.fyfStepConfig.recentTitle.value=e[this.widgetRef.stepData.activeIndex].title)},t.prototype.fetchData=function(){var e=this,t=this.widgetRef.fyfStepConfig.recentTitle.value;if(t.length){var i={};return i.keywords=t,i.size=parseInt(this.widgetRef.fyfStepConfig.size)||10,this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyRecentTitles,i).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.recentTitles=t.data.results):e.widgetRef.stepData.recentTitles=[],e.widgetRef.stepData.showRecentTitleDropdown=!0,e.widgetRef.stepData.recentTitles},function(e){new Error(e)})}},t.prototype.onBackspace=function(){this.widgetRef.fyfStepConfig.recentTitle.value||this.clearSearch()},t.prototype.hideDropDown=function(){var e=this;return setTimeout(function(){e.widgetRef.stepData.showRecentTitleDropdown=!1},150),!0},t.prototype.disableJobTitle=function(){this.widgetRef.fyfStepConfig.recentTitle.flag&&this.clearSearch(!0)},t.prototype.handleActions=function(){var e="false";this.widgetRef.fyfStepConfig.recentTitle.flag?e="true":!this.widgetRef.fyfStepConfig.profileData.hasOwnProperty("relevantExperience")||this.widgetRef.fyfStepConfig.profileData.relevantExperience==this.widgetRef.fyfStepConfig.recentTitle.flag&&this.widgetRef._tempProfileData.profile.relevantExperience==this.widgetRef.fyfStepConfig.recentTitle.flag?this.widgetRef.fyfStepConfig.profileData.hasOwnProperty("relevantExperience")&&this.widgetRef.fyfStepConfig.profileData.relevantExperience!=this.widgetRef.fyfStepConfig.recentTitle.flag||(e=this.widgetRef.fyfStepConfig.recentTitle.value?"false":""):e="false";var t=this.widgetRef.fyfStepConfig.recentTitle.value||this.widgetRef.fyfStepConfig.recentTitle.selectedTitle||"",i=this.widgetRef.fyfStepConfig.profileData.recentTitle||"";if(t?t==i&&(!this.widgetRef.fyfStepConfig.recentTitle.value.length&&this.widgetRef.fyfStepConfig.recentTitle.selectedTitle.length?(t="",e="false"):t="unChanged"):(t=!1,i&&i.length&&(t="",this.widgetRef.fyfStepConfig.profileData.recentTitle="","true"==e||(e="false"))),this.widgetRef.fyfStepConfig.recentTitle.value.length&&this.widgetRef.fyfStepConfig.recentTitle.value!=this.widgetRef.fyfStepConfig.profileData.recentTitle&&!this.widgetRef.fyfStepConfig.selected_recentTitle.length||this.widgetRef.fyfStepConfig.selected_recentTitle.length&&this.widgetRef.fyfStepConfig.selected_recentTitle[0]!=this.widgetRef.fyfStepConfig.recentTitle.value){var o=this.widgetRef.fyfStepConfig.recentTitle.value,r=!1;if(this.widgetRef.stepData.recentTitles.length)for(var s=this.widgetRef.stepData.recentTitles,n=0,a=s;n<a.length;n++){var l=a[n];l.title.toLowerCase()===o.toLowerCase()&&(this.widgetRef.fyfStepConfig.selected_recentTitle=[o],this.widgetRef.fyfStepConfig.typed_recentTitle=[],r=!0)}r||(this.widgetRef.fyfStepConfig.typed_recentTitle=[o],this.widgetRef.fyfStepConfig.selected_recentTitle=[])}this.handleFyfActions(t,e),this.widgetRef.stepData.showRecentTitleDropdown=!1},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.recentTitle.selectedTitle||"",t=this.widgetRef.fyfStepConfig.recentTitle.flag?"true":"false";this.widgetRef.fyfStepConfig.prevStepRef(e,t),this.widgetRef.stepData.showRecentTitleDropdown=!1},t.prototype.focusSearch=function(){e.prototype.focusSearch.call(this)},t}(i.BaseStepProvider);t.FyfStepRecentTitle=s});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-skills",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="clear_text_click",s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeIndex=-1,t.handleFieldFocus=function(e){var i=e&&e.target&&e.target.value;t.widgetRef.stepData.skills&&t.widgetRef.stepData.skills.length&&i&&(t.widgetRef.stepData.showSkillsDropdown=!0,t.activeIndex=-1)},t.handleStepKeyup=function(e){var i=e.value;i&&i.length?t.fetchData():t.widgetRef.stepData.showSkillsDropdown=!1},t.handleInputFieldLength=function(){var e=t.widgetRef.fyfStepConfig.skills&&t.widgetRef.fyfStepConfig.skills.value||"",i=t.widgetRef.widgetBundle.fyfSkillsPlaceHolderText||"";t.inputField&&(t.inputField.style.width=10*((e.length||i.length)+1)+"px")},t.handleStepKeydown=function(e){},t.clearSearch=function(){var e={};e.trait6=t.widgetRef.fyfStepConfig.skills.value,t.widgetRef.trackWidgetClick(r,e),t.widgetRef.stepData.showSkillsDropdown=!1,t.widgetRef.fyfStepConfig.skills.value="",t.focusSearch()},t}return __extends(t,e),t.prototype.init=function(){this.widgetRef.stepData=this.widgetRef.stepData||{};var t=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.skills||[]));this.widgetRef.fyfStepConfig.skills={},this.widgetRef.stepData.skills=[],this.widgetRef.stepData.suggestedSkills=[],this.widgetRef.fyfStepConfig.skills.selectedSkill=t,this.widgetRef.fyfStepConfig.typed_skills=this.widgetRef.fyfStepConfig.profileData.typed_skills||[],this.widgetRef.fyfStepConfig.selected_skills=this.widgetRef.fyfStepConfig.profileData.selected_skills||[],this.widgetRef.showFocus=!1,this.fetchSuggestedSkills(),e.prototype.fetchAutoCompleteInput.call(this,this.handleInputFieldLength),e.prototype.focusToStepBlock.call(this)},t.prototype.handleBlur=function(){this.widgetRef.stepData.showSkillsDropdown=!1,this.widgetRef.showFocus=!1},t.prototype.moveDown=function(e){if(this.widgetRef.stepData.showSkillsDropdown){var t=this.widgetRef.stepData.skills||[];if(t.length){++this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveDown(this.widgetRef,e,"stepData",this.widgetRef.stepData.skills,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.moveUp=function(e){if(this.widgetRef.stepData.showSkillsDropdown){var t=this.widgetRef.stepData.skills||[];if(t.length){--this.activeIndex,this.widgetRef.stepData.activeIndex>-1&&(t[this.widgetRef.stepData.activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0);var i=this.element.querySelector(".search-dropdown-list");this.a11yAutoComplete.moveUp(this.widgetRef,e,"stepData",this.widgetRef.stepData.skills,this.activeIndex,this.element,i),"true"==this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&this.autoFillValue()}}},t.prototype.onEnter=function(e){if(this.widgetRef.stepData.showSkillsDropdown){var t={};t.skill=this.widgetRef.fyfStepConfig.skills.value||"",t.skill.length&&this.populateSelectedData(t,"onEnter")}},t.prototype.populateSelectedData=function(e,t){-1==this.widgetRef.fyfStepConfig.skills.selectedSkill.indexOf(e.skill)&&(this.widgetRef.fyfStepConfig.skills.selectedSkill.push(e.skill),this.widgetRef.fyfStepConfig.skills.value="","onEnter"==t&&this.widgetRef.fyfStepConfig.typed_skills.push(e.skill)),e.isSkillSelected=!0,this.handleInputFieldLength(),this.focusSearch(),this.widgetRef.stepData.showSkillsDropdown=!1},t.prototype.autoFillValue=function(){var e=this.widgetRef.stepData.skills||[];this.widgetRef.stepData.showSkillsDropdown&&e.length&&this.widgetRef.fyfStepConfig.autoSuggestCompleteOnkeyUp&&(this.widgetRef.fyfStepConfig.skills.value=e[this.widgetRef.stepData.activeIndex].skill)},t.prototype.fetchSuggestedSkills=function(){var e=this,t={},i=this.widgetRef.fyfStepConfig.profileData.recentTitle;i=i?[i]:[],t.titles=i,t.categories=this.widgetRef.fyfStepConfig.profileData.categories||[],t.skills=this.widgetRef.fyfStepConfig.skills.selectedSkill||[],t.size=parseInt(this.widgetRef.fyfStepConfig.suggestedSkillSize)||7,this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeySkillSuggestions,t).then(function(t){t&&t.data&&t.data.results&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.suggestedSkills=t.data.results)})},t.prototype.fetchData=function(){var e=this,t=this.widgetRef.fyfStepConfig.skills.value||"";if(t.length){var i={},r=this.widgetRef.fyfStepConfig.skills.selectedSkill;return i.keywords=t,i.size=parseInt(this.widgetRef.fyfStepConfig.size)||10,i.addedSkills=r.length?r:[],this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeySkills,i).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.skills=t.data.results):e.widgetRef.stepData.skills=[],e.widgetRef.stepData.showSkillsDropdown=!0,e.widgetRef.stepData.skills},function(e){new Error(e)})}},t.prototype.onBackspace=function(){this.widgetRef.fyfStepConfig.skills.value||this.clearSearch()},t.prototype.handleActions=function(){if(this.widgetRef.fyfStepConfig.skills.value){var e=this.widgetRef.fyfStepConfig.skills.value;if(this.widgetRef.stepData.skills&&this.widgetRef.stepData.skills.length)for(var t=this.widgetRef.stepData.skills,i=0,o=t;i<o.length;i++){var r=o[i];r.skill.toLowerCase()===e.toLowerCase()&&this.widgetRef.fyfStepConfig.selected_skills.push(e)}this.widgetRef.fyfStepConfig.typed_skills.push(e),this.widgetRef.fyfStepConfig.skills.selectedSkill.push(this.widgetRef.fyfStepConfig.skills.value)}var s=this.widgetRef.fyfStepConfig.skills.selectedSkill||[],n=this.widgetRef.fyfStepConfig.profileData.skills||[],a=!1;if(s.length)if(s.length==n.length){for(var l=0;l<s.length;l++)!function(e){var t=s[e];-1==n.findIndex(function(e){return e==t})&&(a=!0)}(l);s=a?s:"unChanged"}else s.length&&(s=Array.from(new Set(s)));else s=!1,n&&n.length>0&&(s=[]);this.handleFyfActions(s),this.widgetRef.stepData.showSkillsDropdown=!1},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.skills.selectedSkill||"";this.widgetRef.fyfStepConfig.prevStepRef(e),this.widgetRef.stepData.showSkillsDropdown=!1},t.prototype.selectSuggestions=function(t,i){var o=this;if(this.widgetRef.fyfStepConfig.skills.selectedSkill=this.widgetRef.fyfStepConfig.skills.selectedSkill||[],-1==this.widgetRef.fyfStepConfig.skills.selectedSkill.indexOf(t)){this.widgetRef.fyfStepConfig.skills.selectedSkill.push(t),this.widgetRef.fyfStepConfig.selected_skills.push(t),this.widgetRef.stepData.suggestedSkills.splice(i,1);var r=this.element.querySelector(".ph-common-slection-area"),s=this.element.querySelector("[data-ph-autocomplete-input]"),n=t+" skill selected";e.prototype.addSelectionRemovalSronly.call(this,n),setTimeout(function(){s&&(s.focus(),o.widgetRef.fyfStepConfig.skills.value=""),r&&(r.scrollTop=r.scrollHeight)},150)}},t.prototype.removeSelectedData=function(t){var i=this;event.stopPropagation();var o=this.widgetRef.stepData.skills.findIndex(function(e){return e.skill==i.widgetRef.fyfStepConfig.skills.selectedSkill[t]}),r="removed skill "+this.widgetRef.fyfStepConfig.skills.selectedSkill[t];if(e.prototype.addSelectionRemovalSronly.call(this,r),setTimeout(function(){i.widgetRef.fyfStepConfig.skills.selectedSkill.splice(t,1),i.focusSearch()},500),-1!=o&&(this.widgetRef.stepData.skills[o].isSkillSelected=!1),this.widgetRef.fyfStepConfig.selected_skills&&this.widgetRef.fyfStepConfig.selected_skills.length){var s=this.widgetRef.fyfStepConfig.selected_skills.findIndex(function(e){return e==i.widgetRef.fyfStepConfig.skills.selectedSkill[t]});-1!=s&&this.widgetRef.fyfStepConfig.selected_skills.splice(s,1)}if(this.widgetRef.fyfStepConfig.typed_skills&&this.widgetRef.fyfStepConfig.typed_skills.length){var s=this.widgetRef.fyfStepConfig.typed_skills.findIndex(function(e){return e==i.widgetRef.fyfStepConfig.skills.selectedSkill[t]});-1!=s&&this.widgetRef.fyfStepConfig.typed_skills.splice(s,1)}},t.prototype.focusSearch=function(){e.prototype.focusSearch.call(this)},t}(i.BaseStepProvider);t.FyfStepSkills=s});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-workExperience",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.workExperience={data:{results:[{displayName:"0-3",min:0,max:3},{displayName:"4-8",min:4,max:8},{displayName:"9-14",min:9,max:14},{displayName:"15+",min:15,max:100}]}},t}return __extends(t,e),t.prototype.init=function(){var t=this;this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.stepData.workExperience=this.workExperience.data.results,this.widgetRef.fyfStepConfig.workExperience={},this.widgetRef.fyfStepConfig.profileData.workExperience=this.widgetRef.fyfStepConfig.profileData.workExperience||{},this.widgetRef.fyfStepConfig.workExperience.selectedExp=this.workExperience.data.results.find(function(e){return e.displayName==(t.widgetRef.fyfStepConfig.profileData.workExperience.displayName||"")}),e.prototype.focusToStepBlock.call(this)},t.prototype.fetchWorkExperience=function(){var e=this;this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeyworkExperience,{}).then(function(t){t&&t.data&&(e.widgetRef.stepData=e.widgetRef.stepData||{},e.widgetRef.stepData.workExperience=t.data)})},t.prototype.handleActions=function(){var e=this.widgetRef.fyfStepConfig.workExperience.selectedExp||{},t=this.widgetRef.fyfStepConfig.profileData.workExperience||{};Object.keys(e).length?e.displayName==t.displayName&&(e="unChanged"):(e=!1,t&&t.displayName&&(e={},this.widgetRef.fyfStepConfig.profileData.workExperience={})),this.handleFyfActions(e)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.workExperience.selectedExp||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t}(i.BaseStepProvider);t.FyfStepWorkExperience=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();define("v1/fyf-step-subCategory",["require","exports","./base-step-provider","./ph-find-your-fit-config"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){var e=JSON.parse(JSON.stringify(this.widgetRef.fyfStepConfig.profileData.subCategories||[]));this.widgetRef.fyfStepConfig.subCategories={},this.widgetRef.fyfStepConfig.subCategories.selectedSubCategories=[],this.widgetRef.fyfStepConfig.subCategories.selectedSubCategories=e,this.getSubCategories()},t.prototype.setSubCategories=function(t){this.widgetRef.unhideLoader(),this.widgetRef.stepData=this.widgetRef.stepData||{},this.widgetRef.stepData.subCategories=this.refineSubCategories(t),this.widgetRef.stepData.subCategories.length?this.widgetRef.noSubCategories=!1:this.widgetRef.fyfStepConfig.showEmptySubCategories?this.widgetRef.noSubCategories=!0:"next"==this.widgetRef.handleEmptyCatFlow?this.widgetRef.fyfStepConfig.funRef(!1):this.widgetRef.fyfStepConfig.prevStepRef(!1),e.prototype.focusToStepBlock.call(this),this.widgetRef.hideLoader()},t.prototype.refineSubCategories=function(e){return e.filter(function(e){return e.subCategory&&e.subCategory.length})},t.prototype.getSubCategories=function(){var e=this;this.widgetRef.unhideLoader();var t={field:"subCategory"};this.makeDdoRequest(this.elementTag,o.WidgetConfig[this.version].ddoKeySubCategories,t).then(function(t){t&&t.data&&t.data.subCategory&&(e.setSubCategories(t.data.subCategory),e.widgetRef.hideLoader())})},t.prototype.handleActions=function(){var e=!1,t=this.widgetRef.fyfStepConfig.subCategories.selectedSubCategories||[],i=this.widgetRef.fyfStepConfig.profileData.subCategories||[];if(t.length){if(t.length==i.length){for(var o=0;o<t.length;o++)!function(o){var r=t[o];-1==i.findIndex(function(e){return e==r})&&(e=!0)}(o);t=e?t:"unChanged"}}else t=!1,i&&i.length>0&&(t=[]);this.handleFyfActions(t)},t.prototype.handlePrevStep=function(){var e=this.widgetRef.fyfStepConfig.subCategories.selectedSubCategories||"";this.widgetRef.fyfStepConfig.prevStepRef(e)},t}(i.BaseStepProvider);t.FyfStepSubCategory=r}),define("v1/fyf-step-provider-factory",["require","exports","./fyf-step-category","./fyf-step-recentTitle","./fyf-step-skills","./fyf-step-workExperience","./fyf-step-location","./fyf-step-contactInfo","./fyf-step-authorise","./fyf-step-contactInfo-v1","./fyf-step-subCategory"],function(e,t,i,o,r,s,n,a,l,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(){}return e.createProvider=function(e,t,d,f,h,u){return"authorise"===t?new l.FyfStepAuthorise(e,d,f,h,t):"categories"===t?new i.FyfStepCategory(e,d,f,h,t):"recentTitle"===t?new o.FyfStepRecentTitle(e,d,f,h,t,u):"skills"===t?new r.FyfStepSkills(e,d,f,h,t,u):"workExperience"===t?new s.FyfStepWorkExperience(e,d,f,h,t):"preferredLocation"===t?new n.FyfStepLocation(e,d,f,h,t,u):"contactInfo"===t?new a.FyfStepContactInfo(e,d,f,h,t):"contactInfoWithSocialOptions"===t?new c.FyfStepContactInfoV1(e,d,f,h,t):"subCategories"===t?new p.FyfStepSubCategory(e,d,f,h,t):void 0},e}();t.FyfStepProvideFactory=d}),define("v1/ph-find-your-fit-data",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.profileData={profile:{categories:[],recentTitle:"",skills:[],workExperience:{displayName:"",min:"",max:""},preferedLocation:[],firstName:"",email:"",phone:""},editType:"mergeProfile"}});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-find-your-fit-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.FindYourFitService=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-find-your-fit",["require","exports","aurelia-framework","ph-common","./ph-find-your-fit-config","./ph-find-your-fit-service","./ph-find-your-fit-data","./fyf-step-provider-factory","aurelia-event-aggregator"],function(e,t,i,o,r,s,n,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c="ph-find-your-fit-v1",p="next_click",d="previous_click",f="registration_submit",h={find_your_fit_flow:"find_your_fit"},u="suggestions",g=function(e){function t(t,i,o,r,s,a){var l=e.call(this,t,i,c)||this;return l.element=t,l.commonService=i,l.findYourFitService=o,l.eventAggregator=r,l.a11yAutoComplete=s,l.localStorage=a,l.isLoggedIn=!1,l.isUserSocialLoggedIn=!1,l.isAnonymousUser=!1,l.isActiveSession=!1,l.stepsData=[],l._tempStepData=[],l.profileData=n.profileData,l._tempProfileData={},l.stepPosition=0,l.currentStep=0,l.fyfStatus=!1,l.isLastStep=!1,l.isFirstStepClick=!1,l.stepStatus=0,l.showOnRevelantExp=!0,l.isProfileSaveFails=!1,l.isShiftKey=!1,l.isTabKey=!1,l.stepLandingInfo={},l.fyfProvider={},l.nonEditableFields={},l.isErrorMsgReqd=!1,l.fyfInfo={},l.showErrorMsg=!1,l.isProfileJobsAvailable=!1,l.profileRecomDataObj=!0,l.userActions=!1,l.isSiteLogin=!1,l.recentStepType="",l.fyfSocialOptions=[],l.isClickOption=!1,l.fyfSteps={},l.ProfileSaveFailsMsg=!1,l.handleEmptyCatFlow="next",l.noCategories=!1,l.disableSocialLogin=!1,l.disableContactInfo=!1,l.disableUploadResumeFlow=!1,l.trackingLocally=!0,l.subscriptions=[],l.contactInfoV1Enabled=!1,l.resultUpdated=!1,l.isCandidateHomeEnabled=!0,l.selectionRemovalSrText="",l.selectionRemovalSronly=!1,l.gdprConsent=!1,l.acceptTerms=!1,l.termsError=!1,l.piiConsentError=!1,l.piiConsentContext={},l.consentPrefill=!0,l.preferredName=!1,l.uniformGdpr=!1,l.hideOptIn=!1,l.gdprPreCheck=!1,l.prevStep=function(t,i){var o={stepName:l.fyfStepConfig.stepType};if(e.prototype.trackWidgetClick.call(l,d,o),l.handleStepDestory(),l.recentStepType="",l.handleEmptyCatFlow="prev",0==l.currentStep){var r=l.profileData&&l.profileData.profile&&l.profileData.profile.flowType||l.userActions||l.isUserSocialLoggedIn?"Edit":"Start";l.eventAggregator.publish("getUserProfileData",{context:h.find_your_fit_flow,isFirstStep:r}),l.commonService.raiseCustomEvent("getUserProfileData",{context:h.find_your_fit_flow,isFirstStep:r})}else e.prototype.unhideLoader.call(l),t&&t.hasOwnProperty("email")&&!l.isProfileSaveFails?(l.profileData.profile.firstName=t.firstName,l.profileData.profile.email=t.email,l.profileData.profile.phone=t.phone):t&&(l.profileData.profile[l.fyfStepConfig.stepType]=t),i&&"true"==i?l.profileData.profile.relevantExperience=!0:i&&"false"==i&&(l.profileData.profile.relevantExperience=!1),l.currentStep>0&&(l.currentStep--,l.stepStatus--,l.handleNestedView()),l.hideLoader()},l.handleFyfActions=function(t,i){e.prototype.unhideLoader.call(l),l.handleStepDestory(),l.handleEmptyCatFlow="next",l.recentStepType="",l.piiConsentError=!1,l.isLastStep=l.currentStep==l.stepsData.length-1;var o=l.fyfStepConfig.stepType;"recentTitle"==o&&l.isLastStep&&"false"==i&&"workExperience"==l._tempStepData[l._tempStepData.length-1].stepType&&(l.isLastStep=!1);var r={stepName:l.fyfStepConfig.stepType},s={};if(s.editType="mergeProfile",s.profile={},!t&&(!l.isLastStep||l.isLastStep&&"contactInfo"!=o)&&(!i||"noSelection"==i)&&(!t&&!i||!l.ProfileSaveFailsMsg))return e.prototype.trackWidgetClick.call(l,p,r),l.isLastStep&&"contactInfo"!=o?(l.currentStep=0,l.stepStatus=0,l.eventAggregator.publish("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:l.isLastStep}),l.commonService.raiseCustomEvent("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:l.isLastStep})):(l.currentStep++,l.stepStatus++),l.handleNestedView(),void l.hideLoader();if("contactInfo"!=o&&"contactInfoWithSocialOptions"!=o||setTimeout(function(){l.profileRecomDataObj=!0},1e3),l.userActions=!0,l.profileRecomDataObj=!1,l.fyfStepConfig["typed_"+o]&&(l.profileData.profile["typed_"+o]=l.fyfStepConfig["typed_"+o]),l.fyfStepConfig["selected_"+o]&&(l.profileData.profile["selected_"+o]=l.fyfStepConfig["selected_"+o]),l.fyfStepConfig["typed_"+o]&&l.fyfStepConfig["typed_"+o].length||l.fyfStepConfig["selected_"+o]&&l.fyfStepConfig["selected_"+o].length){var n={stepName:o};if(l.fyfStepConfig["selected_"+o]&&l.fyfStepConfig["selected_"+o].length){l.fyfStepConfig["selected_"+o]=l.fyfStepConfig["selected_"+o].map(function(e){return e.toLowerCase()});var a=Array.from(new Set(l.fyfStepConfig["selected_"+o]));"skills"==o&&a.forEach(function(e,t){l.fyfStepConfig.profileData.skills&&-1!=l.fyfStepConfig.profileData.skills.indexOf(e)&&a.splice(t,1)}),a.length&&(n.selected_values=a)}else delete n.selected_values;if(l.fyfStepConfig["typed_"+o]&&l.fyfStepConfig["typed_"+o].length){l.fyfStepConfig["typed_"+o]=l.fyfStepConfig["typed_"+o].map(function(e){return e.toLowerCase()});var c=Array.from(new Set(l.fyfStepConfig["typed_"+o]));if("skills"==o){var d=!(!n.selected_values||!n.selected_values.length);c.forEach(function(e,t){l.fyfStepConfig.profileData.skills&&-1!=l.fyfStepConfig.profileData.skills.indexOf(e)&&c.splice(t,1),d&&c[t]&&c[t].length&&-1!=n.selected_values.indexOf(e)&&c.splice(t,1)})}c.length&&(n.typed_values=c)}else delete n.typed_values;Object.keys(n).length>1&&e.prototype.trackWidgetClick.call(l,u,n)}if(i){var g=!("true"==i);l.showOnRevelantExp=g,s.profile.relevantExperience=!g,l.profileData.profile.relevantExperience=!g,l.recentStepType=l.fyfStepConfig.stepType}if(l.isLastStep&&t.firstName){var m={email:t.email,firstName:t.firstName};s.profile={},s.profile.firstName=l.profileData.profile.firstName=t.firstName,s.profile.lastName=l.profileData.profile.lastName="",l.preferredName&&t.preferredName&&(s.profile.preferredName=l.profileData.profile.preferredName=t.preferredName,m.preferredName=t.preferredName),s.profile.email=l.profileData.profile.email=t.email,(t.phone&&t.phone.length>0||l.profileData.profile.phone)&&(s.profile.phone=l.profileData.profile.phone=t.phone,m.phone=t.phone),s.profile.finalStep=!0,l.profileData.profile.finalStep=!0,e.prototype.trackWidgetClick.call(l,f,m)}else t&&"unChanged"!=t&&"false"!=t||(t="unChanged"==t?l.profileData.profile[l.fyfStepConfig.stepType]:""),s.profile[l.fyfStepConfig.stepType]=t,l.profileData.profile[l.fyfStepConfig.stepType]=t,l.isLastStep?(s.profile.finalStep=!0,l.profileData.profile.finalStep=!0,e.prototype.trackWidgetClick.call(l,f,r)):(s.profile.finalStep=!1,l.profileData.profile.finalStep=!1,e.prototype.trackWidgetClick.call(l,p,r));l._tempProfileData.profile=l.getClonedObj(l.profileData.profile),!l.isLoggedIn||l.isLoggedIn&&l.isAnonymousUser&&!l.isActiveSession&&!l.isFirstStepClick?l.freshProfileCreation(s):(s.stepName=o,l.updateProfileData(s))},l.handleProfileUpdateSyncFromBot=function(e){var t=e&&e.detail;Object.keys(t).length&&l.isLoggedIn&&l.fetchProfileData()},l.handleSocialSkip=function(e,t,i){e&&e.length-1==t&&l.handleSkip(i)},l.handleSocialNextStep=function(e){l.handleNextKeyup(e)},l}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.unhideLoader.call(this),this.preferredName=this.commonService.getSiteSettings("preferredName"),this.getPiiConsentData(),this.subscribeToEventForExternalDepends(),0==this.commonService.getSiteSettings("consentPrefill")&&(this.consentPrefill=!1);var i=this.commonService.getSiteSettings("navItems");this.isCandidateHomeEnabled=i&&i.candidateHome,this.subscriptions.push(this.eventAggregator.subscribe("ph:candidateLoggedinEvent",function(e){t.profileData.profile=e})),this.subscriptions.push(this.eventAggregator.subscribe("getUserProfileData",function(e){"upload_resume"==e.context&&t.fetchValidateJwtToken()})),this.fetchValidateJwtToken(),this.fyfInfo&&this.fyfInfo.hasOwnProperty("isOptInChoosen")||(this.fyfInfo||(this.fyfInfo={}),this.fyfInfo.isOptInChoosen=e.prototype.getQueryParam.call(this,"optIn")||!1),this.subscriptions.push(this.eventAggregator.subscribe("ph:profileRecomData",function(e){e.jobs&&e.jobs.length?t.isProfileJobsAvailable=!0:t.isProfileJobsAvailable=!1,t.profileRecomDataObj=!0})),this.eventAggregator.publish("getUserProfileData",{context:h.find_your_fit_flow}),this.commonService.raiseCustomEvent("getUserProfileData",{context:h.find_your_fit_flow})},t.prototype.checkStepLanding=function(){var e,t=this.localStorage.getItem("fyfStepLandInfo");this.isUserSocialLoggedIn&&t?e=t.success&&t.success.value:t&&(e=t.failure&&t.failure.value),e&&(this.currentStep=this.stepsData.findIndex(function(t){return t.stepType==e})),this.localStorage.removeItem("fyfStepLandInfo")},t.prototype.getPiiConsentData=function(){var e=this,t=r.WidgetConfig.v1.ddoKeyGetPiiConsentConfig;this.findYourFitService.makeDDORequest(c,t).then(function(i){if(i&&i.status&&"success"==i.status&&i.data)window.phApp&&window.phApp.ddo&&(window.phApp.ddo[t]=i),e.piiConsentData=i.data,e.handleConsentData();else{var o=e.commonService.getSiteSettings("piiConsentConfig");o&&(e.piiConsentData=JSON.parse(JSON.stringify(o)),e.handleConsentData())}})},t.prototype.handleConsentData=function(){this.piiConsentData&&this.piiConsentData.length&&(this.piiConsentContext={},this.piiConsentContext.consentData=this.piiConsentData,this.piiConsentContext.submit=this.handleActions.bind(this),this.piiConsentContext.widgetRef=this)},t.prototype.fetchValidateJwtToken=function(t){var i=this;this.findYourFitService.makeDDORequest(c,r.WidgetConfig.v1.ddoKeyValidateJwtToken,{}).then(function(e){e.data&&(i.isLoggedIn=e.data.isValidToken,i.isUserSocialLoggedIn=e.data.isSocialLogin&&i.isLoggedIn,i.isAnonymousUser=e.data.isAnonymous,i.isActiveSession=e.data.isActiveSession,i.isSiteLogin=e.data.isSiteLogin,i.isAnonymousUser&&i.isActiveSession||i.isUserSocialLoggedIn||i.isSiteLogin?i.fetchProfileData():(i.userActions=!1,i.profileData.profile={},i._tempProfileData.profile={},i.fyfStepConfig={},i.fyfStepConfig.profileData={},i.fetchStepsList(),i.isProfileJobsAvailable=!1))},function(t){new Error(t),e.prototype.hideLoader.call(i)})},t.prototype.fetchStepsList=function(){var t,i=this;if(this.fyfSteps&&this.fyfSteps.steps&&this.fyfSteps.steps.length)try{t=this.getClonedObj(this.fyfSteps.steps),this.fetchingFyfRootKeyVAlues(this.fyfSteps),this.fetchStepsData(t)}catch(e){t=void 0,o.logger.error(e)}this.findYourFitService.makeDDORequest(c,r.WidgetConfig.v1.ddoKeyStepConfig,{}).then(function(e){t||(e&&e.data&&Array.isArray(e.data)?i.fetchStepsData(e.data):e&&e.data&&!Array.isArray(e.data)&&e.data.steps?(i.fetchingFyfRootKeyVAlues(e.data),i.fetchStepsData(e.data.steps)):i.handleError())},function(t){new Error(t),e.prototype.hideLoader.call(i)})},t.prototype.fetchingFyfRootKeyVAlues=function(e){this.fyfSocialOptions=this.getClonedObj(e.socialOptions)||[],
this.disableUploadResumeFlow=!(!e.disableUploadResumeFlow||"true"!=e.disableUploadResumeFlow),this.disableSocialLogin=!(!e.disableSocialLogin||"true"!=e.disableSocialLogin),this.disableContactInfo=!(!e.disableContactInfo||"true"!=e.disableContactInfo),this.gdprConsent=!(!e.gdprConsent||"true"!=e.gdprConsent&&"partial"!=e.gdprConsent&&"uniform"!=e.gdprConsent),"partial"==e.gdprConsent&&(this.fyfInfo.isOptInChoosen=!0,this.hideOptIn=!0),e.gdprConsent&&"precheck"==e.gdprConsent&&(this.gdprConsent=!0,this.acceptTerms=!0,this.gdprPreCheck=!0,this.profileData.profile&&(this.profileData.profile.privacyConsent=!0))},t.prototype.fetchStepsData=function(t){var i=this,o={stepType:"authorise",skip:"loggedIn"},r={stepType:"contactInfo",skip:"loggedIn"},s=[];t.forEach(function(e,t){e.isDisable||(s.push(e),"contactInfoWithSocialOptions"==e.stepType&&(i.isCandidateHomeEnabled&&s.pop(),!i.isCandidateHomeEnabled&&(i.contactInfoV1Enabled=!0)))}),t=s,this.stepsData=this.getClonedObj(t)||[],this._tempStepData=this.getClonedObj(t)||[],this.isCandidateHomeEnabled&&(this.disableSocialLogin=!0),this.disableSocialLogin||(this.stepsData.unshift(o),this._tempStepData.unshift(o)),this.disableContactInfo||(this.stepsData.push(r),this._tempStepData.push(r)),this.handleStepProcess(),this.checkStepLanding(),this.handleNestedView(),e.prototype.hideLoader.call(this)},t.prototype.fetchStepPosition=function(){var t=this;this.findYourFitService.makeDDORequest(c,r.WidgetConfig.v1.ddokeyStepPosition,{}).then(function(e){e&&e.data&&(t.stepPosition=e.data,t.fetchStepsList())},function(i){new Error(i),e.prototype.hideLoader.call(t)})},t.prototype.fetchProfileData=function(){var t=this;this.findYourFitService.makeDDORequest(c,r.WidgetConfig.v1.ddoKeyProfileData,{}).then(function(e){if(e&&Object.keys(e).length){e.profile?t.profileData=e:t.profileData.profile=e,t._tempProfileData=t.getClonedObj(t.profileData),t.profileData&&t.profileData.profile&&t.profileData.profile.optIn&&(t.fyfInfo.isOptInChoosen=t.profileData.profile.optIn),t.fetchStepsList();var i=e.nonEditableFields||[];t.piiConsentData&&t.piiConsentData.length&&t.consentPrefill&&t.piiConsentData.forEach(function(e){t.profileData&&t.profileData[e.type]&&(e.isChecked=!0)}),t.profileData&&t.profileData.privacyConsent&&(t.acceptTerms=!0),i.forEach(function(e){t.nonEditableFields[e]=e})}},function(i){new Error(i),e.prototype.hideLoader.call(t)})},t.prototype.handleStepProcess=function(){var e=this,t=[],i=0;this.stepsCount=0,this.isLastStep=!1,this.isUserSocialLoggedIn||this.isSiteLogin?(this.stepsData.forEach(function(o,r){"loggedIn"!=o.skip?t.push(o):("contactInfo"==o.stepType&&t.push(o),i++,e.stepsCount++)}),this.isLoggedIn&&(this.currentStep=(this.stepPosition||0)-i,this.currentStep=this.currentStep<0?this.currentStep=0:this.currentStep),this.stepsData=t,this._tempStepData=this.getClonedObj(this.stepsData),this.stepStatus=1):this.stepStatus=0,this.showOnRevelantExp=!(!this.profileData||!this.profileData.profile||this.profileData.profile.relevantExperience)||this.showOnRevelantExp,this.currentStep=this.fyfInfo&&this.fyfInfo.stepPosition?0:this.currentStep},t.prototype.handleNestedView=function(){var e=this,t=[],i=0;if(this.stepsData=this.getClonedObj(this._tempStepData),this.stepsCount=0,this.showOnRevelantExp=(!(this.profileData&&this.profileData.profile&&this.profileData.profile.relevantExperience)||0!=this.stepStatus&&0!=this.currentStep)&&this.showOnRevelantExp,this.stepsData.forEach(function(o,r){"true"!=o.showOnRevelantExp||e.showOnRevelantExp?(t.push(o),"loggedIn"!=o.skip&&e.stepsCount++,o.stepType!=e.recentStepType||e.ProfileSaveFailsMsg||(e.currentStep=e.isUserSocialLoggedIn||e.disableSocialLogin?e.stepsCount:e.stepsCount+1,e.stepStatus=e.disableSocialLogin&&!e.isUserSocialLoggedIn?e.stepsCount:e.stepsCount+1,e.recentStepType="")):i++}),this.stepsData=t,this.currentStep>this.stepsData.length-1)return this.currentStep=0,this.stepStatus=0,this.eventAggregator.publish("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:"true"}),void this.commonService.raiseCustomEvent("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:"true"});this.fyfStatus=!1,this.fyfStepConfig=this.stepsData[this.currentStep]||{},this.fyfStepConfig.profileData=this.profileData&&this.profileData.profile||{},this.fyfStepConfig.funRef=this.handleFyfActions,this.fyfStepConfig.prevStepRef=this.prevStep,this.fyfStepConfig.firstStep=!1,this.ProfileSaveFailsMsg=!1,this.currentStep==this.stepsData.length-1?this.fyfStepConfig.lastStep=!0:(0==this.currentStep&&(this.fyfStepConfig.firstStep=!0),this.fyfStepConfig.lastStep=!1);var o=this.currentStep+1;(o>this.stepsData.length-1||o<0)&&(o=0),this.stepStatus=0==this.stepStatus&&0!=this.currentStep?this.currentStep:this.stepStatus,this.stepLandingInfo={context:"fyf",failure:{key:"stepType",value:this.stepsData[this.currentStep].stepType},fyfFuncRef:this.handleSocialSkip,fyfNextStepFuncRef:this.handleSocialNextStep,optIn:this.fyfInfo.isOptInChoosen},this.contactInfoV1Enabled||(this.stepLandingInfo.success={key:"stepType",value:this.stepsData[o].stepType}),this.fyfSocialOptions&&this.fyfSocialOptions.length&&(this.stepLandingInfo.socialOptions=this.fyfSocialOptions||[]),this.loadStep()},t.prototype.skip=function(){var t={stepName:this.fyfStepConfig.stepType};e.prototype.trackWidgetClick.call(this,"skip_questions_click",t),this.handleStepDestory(),this.handleEmptyCatFlow="next",this.recentStepType="",this.currentStep==this.stepsData.length-1?(this.disableUploadResumeFlow&&!this.disableContactInfo&&(this.fyfInfo.isOptInChoosen=this.profileData.profile.optIn||!1),this.currentStep=0,this.stepStatus=0,this.eventAggregator.publish("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:"true"}),this.commonService.raiseCustomEvent("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:"true"})):(e.prototype.unhideLoader.call(this),this._tempProfileData.profile&&this._tempProfileData.profile[this.fyfStepConfig.stepType]&&!this.isProfileSaveFails&&(this.profileData.profile[this.fyfStepConfig.stepType]=this.getClonedObj(this._tempProfileData.profile[this.fyfStepConfig.stepType])),this.currentStep<this.stepsData.length-1&&(this.currentStep++,this.stepStatus++,this.handleNestedView()),this.hideLoader())},t.prototype.hideLoader=function(){var t=this;setTimeout(function(){e.prototype.hideLoader.call(t)},250)},t.prototype.handleStepDestory=function(){this.fyfProvider.destroy&&this.fyfProvider.destroy()},t.prototype.getClonedObj=function(e){if(e&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e?JSON.parse(JSON.stringify(e)):e},t.prototype.freshProfileCreation=function(t){var i=this;e.prototype.unhideLoader.call(this);var o=t;o.flowType=h.find_your_fit_flow,this.profileData.profile.hasOwnProperty("optIn")&&this.profileData.profile.optIn==this.fyfInfo.isOptInChoosen||!this.profileData.profile.finalStep&&this.disableUploadResumeFlow||(o.profile.optIn=this.fyfInfo.isOptInChoosen||!1,this.profileData.profile.optIn=o.profile.optIn),this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(o.profile[e.type]=!!e.isChecked)}),this.findYourFitService.makeDDORequest(c,r.WidgetConfig.v1.ddoKeyFreshProfileCreation,o).then(function(e){i.handleProfileResponse(e)},function(t){new Error(t),e.prototype.hideLoader.call(i)})},t.prototype.updateProfileData=function(t){var i=this;e.prototype.unhideLoader.call(this);var o=t;o.flowType=h.find_your_fit_flow,this.profileData.profile.hasOwnProperty("optIn")&&this.profileData.profile.optIn==this.fyfInfo.isOptInChoosen||!this.profileData.profile.finalStep&&this.disableUploadResumeFlow||(o.profile.optIn=this.fyfInfo.isOptInChoosen||!1,this.profileData.profile.optIn=o.profile.optIn),!this.gdprConsent||this.piiConsentData&&this.piiConsentData.length||(o.profile.privacyConsent=this.acceptTerms),this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(o.profile[e.type]=!!e.isChecked)}),this.findYourFitService.makeDDORequest(c,r.WidgetConfig.v1.ddoKeyCiProfileUpdate,o).then(function(e){i.handleProfileResponse(e)},function(t){new Error(t),e.prototype.hideLoader.call(i)})},t.prototype.handleProfileResponse=function(t){t&&"success"==t.status?(this.isLastStep?(this.currentStep=0,this.stepStatus=0,this.handleNestedView()):(this.currentStep++,this.stepStatus++,this.handleNestedView()),this.eventAggregator.publish("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:this.isLastStep}),this.commonService.raiseCustomEvent("getUserProfileData",{context:h.find_your_fit_flow,isLastStep:this.isLastStep}),this.isFirstStepClick=!0,this.isLoggedIn=!0,this.isProfileSaveFails=!1,this.ProfileSaveFailsMsg=!1):!t||"failure"!=t.status&&"error"!=t.status&&500!=t.status||(this.isProfileSaveFails=!0,this.ProfileSaveFailsMsg=!0,this.isProfileJobsAvailable||(this.profileRecomDataObj=!0),this.isLastStep?(delete this.profileData.profile.firstName,delete this.profileData.profile.email,delete this.profileData.profile.phone):(delete this.profileData.profile[this.fyfStepConfig.stepType],this.recentStepType&&this.recentStepType.length&&delete this.profileData.profile.relevantExperience),this.focusFailureMessage()),e.prototype.hideLoader.call(this)},t.prototype.focusFailureMessage=function(){var e,t=this;setTimeout(function(){(e=t.element.querySelector(".ph-error-msg"))&&e.focus()},250)},t.prototype.loadStep=function(){var t=this;if(this.fyfProvider=a.FyfStepProvideFactory.createProvider(this.element,this.fyfStepConfig.stepType,c,"v1",this,this.a11yAutoComplete),this.fyfProvider){if(this.fyfProvider.init(),this.fyfStepConfig.selected_skills=[],this.fyfStepConfig.typed_skills=[],this.fyfStepConfig.selected_recentTitle=[],this.fyfStepConfig.typed_recentTitle=[],!this.isLastStep){var i=this.fyfStepConfig.stepType;e.prototype.trackWidgetClick.call(this,"fyf_step_loaded",{step:i})}var o=this.element.querySelector(".phs-step-count-block");if(o){var r=this.element.querySelector(".phs-aseertive");r&&!this.stepsData[this.currentStep].skip?setTimeout(function(){var e=t.element.querySelector(".ph-a11y-heading");r.innerHTML=e?o.innerText+" "+e.innerText:o.innerText,setTimeout(function(){r.innerHTML=""},1500)},300):r&&setTimeout(function(){var e=t.element.querySelector(".ph-a11y-heading");e&&(r.innerHTML=e.innerText),setTimeout(function(){r.innerHTML=""},1500)},300)}}},t.prototype.subscribeToEventForExternalDepends=function(){document.addEventListener("ph:site:fyfProfileUpdate",this.handleProfileUpdateSyncFromBot,!0)},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()}),document.removeEventListener("ph:site:fyfProfileUpdate",this.handleProfileUpdateSyncFromBot,!0)},t.prototype.makeDdoRequest=function(t,i,o){var r=this;return new Promise(function(s,n){r.findYourFitService.makeDDORequest(t,i,o).then(function(e){s(e)},function(t){new Error(t),e.prototype.hideLoader.call(r)})})},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.handleActions=function(){this.fyfProvider&&this.fyfProvider.handleActions&&this.fyfProvider.handleActions()},t.prototype.handlePrevStep=function(){this.fyfProvider&&this.fyfProvider.handlePrevStep&&this.fyfProvider.handlePrevStep()},t.prototype.fetchData=function(e){this.fyfProvider&&this.fyfProvider.fetchData&&this.fyfProvider.fetchData(e)},t.prototype.handleFocus=function(e){this.fyfProvider&&this.fyfProvider.handleFocus&&this.fyfProvider.handleFocus(e)},t.prototype.populateSelectedData=function(e,t){this.fyfProvider&&this.fyfProvider.populateSelectedData&&this.fyfProvider.populateSelectedData(e,t)},t.prototype.highlightSelectedData=function(e){this.fyfProvider&&this.fyfProvider.highlightSelectedData&&this.fyfProvider.highlightSelectedData(e)},t.prototype.hideDropDown=function(e){this.fyfProvider&&this.fyfProvider.hideDropDown&&this.fyfProvider.hideDropDown(e)},t.prototype.selectSuggestions=function(e,t){this.fyfProvider&&this.fyfProvider.selectSuggestions&&this.fyfProvider.selectSuggestions(e,t)},t.prototype.handleActionOutsideScope=function(e){this.fyfProvider&&this.fyfProvider.handleActionOutsideScope&&this.fyfProvider.handleActionOutsideScope(e)},t.prototype.handleBlur=function(){this.fyfProvider&&this.fyfProvider.handleBlur&&this.fyfProvider.handleBlur()},t.prototype.removeSelectedData=function(e){this.fyfProvider&&this.fyfProvider.removeSelectedData&&this.fyfProvider.removeSelectedData(e)},t.prototype.clearSearch=function(){this.fyfProvider&&this.fyfProvider.clearSearch&&this.fyfProvider.clearSearch()},t.prototype.focusSearch=function(){this.fyfProvider&&this.fyfProvider.focusSearch&&this.fyfProvider.focusSearch()},t.prototype.handleSkip=function(e){if(!this.isTabKey||!this.isShiftKey){var t=this.element.querySelector(".ph-a11y-skip");return t?(t.focus(),document.activeElement===t):void 0}},t.prototype.handleNextKeyup=function(e){return e&&(this.isTabKey=9===e.which,this.isShiftKey=e.shiftKey),!0},t.prototype.disableJobTitle=function(){this.fyfProvider&&this.fyfProvider.disableJobTitle&&this.fyfProvider.disableJobTitle()},t.prototype.fieldValidation=function(e){this.fyfProvider&&this.fyfProvider.fieldValidation&&this.fyfProvider.fieldValidation(e)},t.prototype.getFieldOptions=function(e){var t="";switch(e){case"skills":return t=this.fyfStepConfig.skills.value||"",this.isClickOption?(this.stepData.skills=[],this.isClickOption=!1,this.stepData.skills):t.length?this.fyfProvider.fetchData():(this.stepData.skills=[],this.stepData.skills);case"recentTitles":return t=this.fyfStepConfig.recentTitle.value||"",this.fyfStepConfig.isClickOption?(this.stepData.recentTitles=[],this.fyfStepConfig.isClickOption=!1,this.stepData.recentTitles):t.length?this.fyfProvider.fetchData():(this.stepData.recentTitles=[],this.stepData.recentTitles);case"locations":return t=this.fyfStepConfig.preferredLocationValue||"",this.isClickOption?(this.stepData.locations=[],this.isClickOption=!1,this.stepData.locations):t.length?this.fyfProvider.fetchData():(this.stepData.locations=[],this.stepData.locations)}},t.prototype.setFieldValue=function(e,t){var i=this;switch(e){case"skills":var o;if(this.stepData.skills.length&&this.stepData.skills[t]){if(o=this.stepData.skills[t].skill,this.fyfStepConfig[e].value=this.stepData.skills[t].skill,-1==this.fyfStepConfig[e].selectedSkill.indexOf(o.toLowerCase())){this.fyfStepConfig[e].selectedSkill.push(o),this.fyfStepConfig.selected_skills.push(o);var r=o+" skill selected";this.fyfProvider.addSelectionRemovalSronly(r),this.fyfProvider.focusSearch(),setTimeout(function(){i.fyfStepConfig.skills.value=""},150);var s=this.stepData.suggestedSkills.findIndex(function(e){return e.skill.toLowerCase()==o.toLowerCase()});-1!=s&&this.stepData.suggestedSkills.splice(s,1)}this.fyfProvider.handleInputFieldLength()}else if(this.fyfStepConfig[e].value.length&&-1==t){var n=this.fyfStepConfig.skills.value,a=!1;if(this.stepData.skills.length)for(var l=this.stepData.skills,c=0,p=l;c<p.length;c++){var d=p[c];d.skill.toLowerCase()===n.toLowerCase()&&(this.fyfStepConfig.selected_skills.push(n),a=!0)}if(!a){var f=void 0,h=void 0;this.fyfStepConfig.selected_skills&&this.fyfStepConfig.selected_skills.length&&(this.fyfStepConfig.selected_skills=this.fyfStepConfig.selected_skills.map(function(e){return e.toLowerCase()}),-1!=this.fyfStepConfig.selected_skills.indexOf(n.toLowerCase())&&(f=!0)),this.fyfStepConfig.profileData.skills&&this.fyfStepConfig.profileData.skills.length&&(this.fyfStepConfig.profileData.skills=this.fyfStepConfig.profileData.skills.map(function(e){return e.toLowerCase()}),-1!=this.fyfStepConfig.profileData.skills.indexOf(n)&&(h=!0)),f||h||this.fyfStepConfig.typed_skills.push(n)}if(-1==this.fyfStepConfig[e].selectedSkill.indexOf(n)){this.fyfStepConfig[e].selectedSkill.push(n);var r=n+" skill selected";this.fyfProvider.addSelectionRemovalSronly(r),this.fyfProvider.focusSearch(),setTimeout(function(){i.fyfStepConfig.skills.value=""},150);var s=this.stepData.suggestedSkills.findIndex(function(e){return e.skill.toLowerCase()==n.toLowerCase()});-1!=s&&this.stepData.suggestedSkills.splice(s,1)}this.fyfProvider.handleInputFieldLength()}break;case"recentTitles":if(this.stepData.recentTitles.length&&this.stepData.recentTitles[t]){var u=this.stepData.recentTitles[t].title;this.fyfStepConfig.recentTitle.value=u,this.fyfProvider.onEnter(this.stepData.recentTitles[t]),this.fyfStepConfig.selected_recentTitle=[u],this.fyfStepConfig.typed_recentTitle=[],this.fyfStepConfig.isClickOption=!0}else if(this.fyfStepConfig.recentTitle.value.length&&-1==t){var g=this.fyfStepConfig[e].value,a=!1;if(this.stepData.recentTitles.length)for(var m=this.stepData.recentTitles,y=0,v=m;y<v.length;y++){var S=v[y];S.title.toLowerCase()===g.toLowerCase()&&(this.fyfStepConfig.selected_recentTitle=[g],this.fyfStepConfig.typed_recentTitle=[],a=!0)}a||(this.fyfStepConfig.typed_recentTitle=[g],this.fyfStepConfig.selected_recentTitle=[])}break;case"locations":this.stepData.locations.length&&this.stepData.locations[t]&&(this.stepData.locations[t].standardlocation,this.fyfProvider.populateSelectedData(this.stepData.locations[t]))}},t.prototype.getActiveIndex=function(e){var t=this,i=-1;switch(e){case"skills":return this.stepData[e].forEach(function(o,r){o.skill==t.fyfStepConfig[e].value&&(i=r)}),this.stepData[e].length&&(this.resultUpdated=!1,setTimeout(function(){t.resultUpdated=!0},0)),i;case"recentTitles":return this.stepData[e].forEach(function(e,o){e.title==t.fyfStepConfig.recentTitle.value&&(i=o)}),this.stepData[e].length&&(this.resultUpdated=!1,setTimeout(function(){t.resultUpdated=!0},0)),i;case"locations":return this.stepData[e].forEach(function(e,o){e.location_display==t.fyfStepConfig.preferredLocationValue&&(i=o)}),this.stepData[e].length&&(this.resultUpdated=!1,setTimeout(function(){t.resultUpdated=!0},0)),i}},t.prototype.clearFieldValue=function(e){},t.prototype.setFocusField=function(e,t){switch(this.focusedField=e,e){case"skills":t?(this.focusedField=void 0,this.stepData.showSkillsDropdown=!1):this.stepData.showSkillsDropdown=!0;break;case"recentTitles":t?(this.focusedField=void 0,this.stepData.showRecentTitleDropdown=!1):this.fyfStepConfig.isClickOption||this.stepData.recentTitles.length||(this.stepData.showRecentTitleDropdown=!0);break;case"locations":t?(this.focusedField=void 0,this.stepData.showLocationDropdown=!1):this.stepData.showLocationDropdown=!0}},t.prototype.setActiveRadioChecked=function(e){var t=this,i=-1;return this.fyfStepConfig.workExperience.selectedExp&&this.stepData.workExperience.length&&this.stepData.workExperience.map(function(e,o){e.min==t.fyfStepConfig.workExperience.selectedExp.min&&(i=o)}),i},t.prototype.setRadioCheked=function(e){this.stepData.workExperience.length&&-1!=e&&(this.fyfStepConfig.workExperience.selectedExp=this.stepData.workExperience[e])},t.prototype.termsChanged=function(){this.acceptTerms&&(this.termsError=!1)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"fyfInfo",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"fyfSteps",void 0),t=__decorate([i.customElement(c),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(g=void 0!==o.CommonService&&o.CommonService)&&g||Object,s.FindYourFitService,l.EventAggregator,"function"==typeof(m=void 0!==o.A11yAutoComplete&&o.A11yAutoComplete)&&m||Object,"function"==typeof(y=void 0!==o.LocalStorageAPI&&o.LocalStorageAPI)&&y||Object])],t);var g,m,y}(o.PhenomWidget);t.FindYourFit=g}),define("text!v1/ph-find-your-fit.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/email-job-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.email="",this.name="",this.jobSeqNo="",this.siteType="external",this.referrerToken="",this.templateSiteType=""}return e}();t.EmailJobModel=i}),define("v1/ph-email-job-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"emailjob",jobDetailDDOKey:"jobDetail",ddoKeyShareDetails:"getSocialSharingDetails"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-email-job-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.commonService=e}return e.prototype.emailThisJob=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e})},e.prototype.getSocialUrls=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.EmailJobService=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-email-job",["require","exports","aurelia-framework","ph-common","./ph-email-job-config","./ph-email-job-service","./email-job-model"],function(e,t,i,o,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="ph-email-job-v1",l=function(e){function t(t,i,o,r){var s=e.call(this,t,i,a)||this;return s.element=t,s.commonService=i,s.emailJobService=o,s.emailJobModel=r,s.isPopupReqd=!1,s.isErrorMsgReqd=!1,s.replaceJobSeqNo=!1,s.disableName=!1,s.siteTypeExternal=!1,s.showSubTitle=!1,s.isDialog=!1,s.showDialogPopup=!1,s.showErrorMsg=!1,s.errors={},s.emailDomains=[],s.bodyclass="",s.isEmailClientEnabled=!1,s}return __extends(t,e),t.prototype.attached=function(){var t=this;this.isEmailClientEnabled=this.commonService.getSiteSettings("isNativeEmailClient"),this.isEmailClientEnabled||(e.prototype.attached.call(this),e.prototype.hideLoader.call(this),e.prototype.subscribeToEvent.call(this,"show-email-job",function(e){t.jobSeqNo||(t.jobSeqNo=e.jobSeqNo),t.openEmailDialog()}),e.prototype.subscribeToEvent.call(this,"JOB_DETAIL_OBJECT",function(e){e.visibilityType&&"Internal/External"==e.visibilityType?t.jobSeqNo=e.jobId:t.jobSeqNo=e.jobSeqNo,t.jobId=e.jobId}),e.prototype.subscribeToEvent.call(this,"updateJob",function(i){i.jobSeqNo&&(e.prototype.showContainer.call(t),t.replaceJobSeqNo?t.jobSeqNo=i.jobId:t.jobSeqNo=i.jobSeqNo,t.jobSiteType=i.siteType,t.jobLocation=i.location)}),this.fetchJobSeqNo())},t.prototype.getBodyClass=function(){this.bodyclass=document.body.className},t.prototype.fetchJobSeqNo=function(){if(this.jobSeqNo&&null!=this.jobSeqNo&&this.jobSeqNo.length>0);else{var t=this.commonService.getCachedDDO(r.WidgetConfig.v1.jobDetailDDOKey,a);t&&t.data&&t.data.job&&t.data.job.jobSeqNo?(this.replaceJobSeqNo&&t?this.jobSeqNo=t.data.job.jobId:this.jobSeqNo=t.data.job.jobSeqNo,this.category=t.data.job.category):(e.prototype.hideLoader.call(this),this.handleError(""))}},t.prototype.emailThisJob=function(){var t=this;if("internal"==this.commonService.getSiteType()){var i={jobSeqNo:this.jobSeqNo,jobId:this.jobId,medium:"email-share",campaign:"jobs-share",source:"email",siteType:"external",email:this.emailJobModel.email,jobSiteType:"internal"==this.jobSiteType?"external":this.jobSiteType,jobLocation:this.jobLocation,templateSiteType:this.commonService.getSiteType()};this.emailJobService.getSocialUrls(a,r.WidgetConfig.v1.ddoKeyShareDetails,i).then(function(i){e.prototype.hideLoader.call(t),i&&i.status&&"SUCCESS"==i.status.toUpperCase()&&i.data&&i.data.jdUrl&&(t.emailJobModel.referrerToken=i.data.referrerToken),t.emailJob()},function(i){new Error(i),e.prototype.hideLoader.call(t),t.handleError("")})}else this.emailJob()},t.prototype.emailJob=function(){var t=this;if(this.emailJobModel.jobSeqNo=this.jobSeqNo,this.emailDomains=this.commonService.getSiteSettings("emailDomains"),this.errors.name={},this.errors.email={},this.disableName&&delete this.emailJobModel.name,this.emailDomains){for(var i=!1,o=0,s=this.emailDomains;o<s.length;o++){var n=s[o];if(this.validateEmail(this.emailJobModel.email,n)){i=!0;break}}this.emailJobModel.name||this.disableName?(this.hasErrors=!1,this.errors.name.error=!1):(this.hasErrors=!0,this.errors.name.code="E101",this.errors.name.error=!0),this.emailJobModel.email?i?(this.hasErrors=!1,this.errors.email.error=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E102"):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E101")}else{var l=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.emailJobModel.name||this.disableName?(this.hasErrors=!1,this.errors.name.error=!1):(this.hasErrors=!0,this.errors.name.code="E101",this.errors.name.error=!0),this.emailJobModel.email?l.test(this.emailJobModel.email)?(this.hasErrors=!1,this.errors.email.error=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E102"):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E101")}(this.errors.name.error||this.errors.email.error)&&(this.hasErrors=!0,e.prototype.hideLoader.call(this)),this.hasErrors?setTimeout(function(){t.errors.name.error?t.element.querySelector(".ph-a11y-form-control-name").focus():!t.errors.name.error&&t.errors.email.error&&t.element.querySelector(".ph-a11y-form-control-email").focus()},50):(this.emailJobModel.templateSiteType=this.commonService.getSiteType(),this.jobSiteType&&("internal"==this.jobSiteType?this.emailJobModel.jobSiteType="external":this.emailJobModel.jobSiteType=this.jobSiteType),this.emailJobModel.jobLocation=this.jobLocation,this.emailJobService.emailThisJob(a,r.WidgetConfig.v1.ddoKey,this.emailJobModel).then(function(i){var o=t.element.querySelectorAll(".feedbackText")[0];if("success"==i.emailjob.status){var r={};r.trait15=t.emailJobModel.name?t.emailJobModel.name:"",r.trait27=t.emailJobModel.email,r.trait5=t.jobSeqNo,r.trait14=t.category,t.commonService.processTrackingEvent("email_job",void 0,r),e.prototype.hideLoader.call(t),t.showEmailSuccess=!0;var s=document.querySelector(".ph-a11y-email-submit"),n=t.element.querySelector(".success-hdlr button");s&&n&&e.prototype.openDialogPopup.call(t,"success-hdlr",s,n),t.emailJobModel.name="",t.emailJobModel.email=""}else{e.prototype.hideLoader.call(t),t.showEmailFailure=!0;var s=document.querySelector(".ph-a11y-email-submit"),n=t.element.querySelector(".failure-hdlr button");s&&n&&e.prototype.openDialogPopup.call(t,"failure-hdlr",s,n)}o&&o.setAttribute("tabindex","0"),setTimeout(function(){o&&o.focus()},50),t.isDialog&&(t.showDialogPopup=!0,t.emailJobModel.name="",t.emailJobModel.email="")},function(e){t.showEmailSuccess=!1,t.showEmailFailure=!1,t.closeEmailDialog()}))},t.prototype.onBtnBlurHandler=function(e){e.target.setAttribute("tabindex","-1")},t.prototype.validateEmail=function(e,t){var i=e.toLowerCase().match("^(.+)@"+t.toLowerCase()+".com$");if(null==i)return!1;if(null!=i[1]){var o=/^\"?[\w-_\.]*\"?$/;return null!=i[1].match(o)}return!1},t.prototype.detached=function(){e.prototype.hideLoader.call(this)},t.prototype.openEmailDialog=function(){if(this.isPopupReqd){this.showEmailDialog=!0;var t=document.getElementsByClassName("email")[0],i=this.element.querySelectorAll(".form-control")[0];t&&e.prototype.openDialogPopup.call(this,"modal",t,i),this.showEmailSuccess=!1,this.showEmailFailure=!1,this.getBodyClass();var o=this.bodyclass+" overflow-hidden";document.body.className=o}else{var r=document.querySelector('[as-element^="ph-email-job"]');if(r){var s=window.pageYOffset;if(this.commonService.smoothScroll){var n=this.commonService.getNearestSectionElemOffsetTop(r,"bottom");s<n?this.commonService.smoothScroll(s,n,!0,30):this.commonService.smoothScroll(s,n,!1,30);var a=r.querySelector("input");a&&a.focus()}else{r.scrollIntoView(!1);var l=document.querySelectorAll(".ph-sticky-header"),c=0,p=window.scrollY,d=0;if(l.length){for(var f=0;f<l.length;f++)c+=l[f].offsetHeight;p&&c>window.innerHeight/2&&(d=r.offsetHeight-(window.innerHeight-c),window.scroll(0,p-d))}}}}},t.prototype.closeEmailDialog=function(){if(this.showEmailDialog=!1,this.showEmailSuccess=!1,this.showEmailFailure=!1,e.prototype.closeDialogPopup.call(this),this.errors.name={},this.errors.email={},document.body.classList&&document.body.classList.contains("overflow-hidden")&&document.body.classList.remove("overflow-hidden"),this.shareHandler){this.shareHandler({share:{name:"email"}});var t={jobSeqNo:this.jobSeqNo};e.prototype.trackWidgetClick.call(this,"popup_close_click",t)}var i=this.element.querySelector(".ph-a11y-email-button");i&&i.focus()},t.prototype.closeFeedbackPopup=function(t){e.prototype.closeDialogPopup.call(this),t?this.closeEmailDialog():(this.errors.name={},this.errors.email={},this.errors.senderName={},this.emailJobModel.name="",this.emailJobModel.email="")},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"jobSeqNo",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"jobId",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"isPopupReqd",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"replaceJobSeqNo",void 0),__decorate([i.bindable(),__metadata("design:type",Function)],t.prototype,"shareHandler",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"disableName",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"siteTypeExternal",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"showSubTitle",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"isDialog",void 0),t=__decorate([i.customElement(a),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==o.CommonService&&o.CommonService)&&l||Object,s.EmailJobService,n.EmailJobModel])],t);var l}(o.PhenomWidget);t.EmailJob=l}),define("text!v1/ph-email-job.html",["module"],function(e){
e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-email-job-v1/default/view.html",["module"],function(e){e.exports='<template>\n  <div ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader" class="show-loader"></div>\n\t<a href="javascript:void(0)" class="btn default-button" click.delegate="openEmailDialog()">\n    \t<ppc-content>Email this Job</ppc-content>\n\t</a>\n  \t<div show.bind="showEmailDialog" class="phs-email-this-job-1 ph-widget-box">  \t\t\n  \t\t<div class="modal-backdrop fade in" click.delegate="closeEmailDialog()"></div>\n\t\t<div class="dialog-block">\n\t\t\t<div class="phs-widget-heading">\n\t\t\t\t<ppc-content type="icon">\n\t\t\t\t\t<i class="icon icon-send-masseg"></i>\n\t\t\t\t</ppc-content>\n\t\t\t\t<ppc-content type="icon">\n\t\t\t\t\t<i class="icon icon-cancel" click.delegate="closeEmailDialog()"></i>\n\t\t\t\t</ppc-content>\n\t\t\t\t<h2>\n\t\t\t\t\t<ppc-content>\n\t\t\t\t\t\tEmail this Job\n\t\t\t\t\t</ppc-content>\n\t\t\t\t</h2>\n\t\t\t\t<p>\n\t\t\t\t\t<ppc-content>\n\t\t\t\t\t\tTo access this job from another computer, email this information to yourself or a friend.\n\t\t\t\t\t</ppc-content>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class="widget-container">\n\t\t\t\t<div class="content-block">\n\t\t\t\t\t<form role = "form" submit.delegate = "emailThisJob()" class="form-inline">\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label for = "name"><ppc-content>From Name</ppc-content></label>\n\t\t\t\t\t\t\t<input type = "text" class="form-control" value.bind = "emailJobModel.name" placeholder = "Name" autocomplete="off">\n\t\t\t\t\t\t\t<span class="error" show.bind="errors.name.error && errors.name.code == \'E101\'"><ppc-content> Name should not empty </ppc-content> </span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t  \t\t<label for = "email"><ppc-content>To Email Address</ppc-content></label>\n\t\t\t\t\t  \t\t<input type = "text" class="form-control" value.bind = "emailJobModel.email" placeholder = "Email" autocomplete="off">\n\t\t\t\t\t  \t\t<span class="error" show.bind="errors.email.error && errors.email.code == \'E101\'"><ppc-content> Email should not empty </ppc-content> </span>\n\t\t\t\t\t  \t\t<span class="error" show.bind="errors.email.error && errors.email.code == \'E102\'"><ppc-content> Please enter email </ppc-content> </span>\n\t\t\t\t\t  \t</div>\n\t\t\t\t\t  \t<button type = "submit" class="btn primary-button"><ppc-content>Send</ppc-content></button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n  \t</div>\n  \t<div show.bind="showEmailSuccess" class="phs-email-this-job-1 ph-widget-box success-hdlr">\n  \t\t<div class="modal-backdrop fade in" click.delegate="closeEmailDialog()"></div>\n  \t\t<div class="hdlr-block">\n  \t\t\t<ppc-content type="icon">\n  \t\t\t\t<i class="icon icon-check"></i>\n  \t\t\t</ppc-content>\n  \t\t\t<h3>Success!</h3>\n  \t\t\t<p>Email has successfully sent</p>\n  \t\t</div>\n  \t</div>\n</template>\n'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-social-connect-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKeySiteConfig:"siteConfig",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyMergedProfile:"mergedProfile",ddoKeySaveProfile:"saveProfile",ddoKeyGetNextPage:"getOnBoardingNextStep",ddoKeyGetIMLandingPage:"getIMLandingPage",ddoKeySocialConnectOptions:"socialConnectOptions",ddoKeyCreateConsentProfile:"createConsentProfile",ddoKeyJwtLogout:"jwtLogout"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-social-connect-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.SocialConnectService=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-social-connect",["require","exports","aurelia-framework","ph-common","./ph-social-connect-config","./ph-social-connect-service"],function(e,t,i,o,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ph-social-connect-v1",a=function(e){function t(t,i,o,r,s){var a=e.call(this,t,i,n)||this;return a.element=t,a.commonService=i,a.socialConnectService=o,a.candidateLoginService=r,a.localStorage=s,a.fyfStepLandInfo={},a.piiconsent={},a.providerKey={FACEBOOK:"facebook",MICROSOFT:"microsoft",LINKEDIN:"linkedIn",GOOGLE:"google",LOGIN:"google-signin"},a.submitAction={NEXT:"next",PREV:"prev"},a.enabledSocial=["facebook","linkedin","live","google"],a.connectedState={},a.siteVariant="i",a.isLoggedIn=!1,a.showPopup=!1,a.externalEnabledSocial=[],a.internalEnabledSocial=[],a.providers={},a.redirectUri="",a.openMenuPopup=!1,a.privacyDataConsent=!1,a.privacyConsentReqFlag=!1,a.privacyConsentError=!1,a.privacyConsentPreCheck=!1,a.showLink=!1,a}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.unhideLoader.call(this),"internal"==this.commonService.getSiteType()&&this.getOnBoardingStepData(),this.isPrivacyDataConsentCheckBoxRequired(),this.getEnabledSocial(),this.getConnectedData(),this.handleLoginPage(),this.getJwtToken(),this.privacyConsentError=!1,e.prototype.subscribeToEvent.call(this,"social-logout",function(){t.isLoggedIn=!1}),e.prototype.subscribeToEvent.call(this,"secure-url-click",function(e){t.togglePopup(e),t.redirectUri=e.redirectUri}),this.onBoardingStepId=localStorage.onBoardingStepId;var i=e.prototype.getQueryParam.call(this,"atsRedirectUrl")||"";this.atsInternalLogin=decodeURIComponent(i),window.location.hash&&(this.showLink=!0)},t.prototype.isPrivacyDataConsentCheckBoxRequired=function(){this.privacyConsentReqFlag=this.commonService.getSiteSettings("privacyDataConsentCheckBox"),this.commonService.getSiteSettings("privacyDataConsentPreCheck")&&(this.privacyDataConsent=!0,this.privacyConsentPreCheck=!0)},t.prototype.profileLoginFlowChanged=function(e,t){this.profileLoginFlow=e,this.privacyConsentError=!1},t.prototype.piiconsentChanged=function(e,t){this.piiconsent=e},t.prototype.isPrivacySocialConsentChecked=function(){this.privacyDataConsent&&(this.privacyConsentError=!1)},t.prototype.togglePopup=function(t){var i,o;this.element.querySelector('[data-is-popup-view="true"]')&&(this.showPopup=!this.showPopup,this.showPopup?(e.prototype.trackWidgetClick.call(this,"signIn_click",{}),i=this.element.querySelector(".signin-link"),o=this.element.querySelector(".ph-a11y-sign-in"),e.prototype.openDialogPopup.call(this,"modal",i,o)):(e.prototype.trackWidgetClick.call(this,"signIn_popup_close_click",{}),e.prototype.closeDialogPopup.call(this)))},t.prototype.getOnBoardingStepData=function(){var e=this,t=r.WidgetConfig.v1.ddoKeyGetIMLandingPage;this.socialConnectService.makeDDORequest(n,t).then(function(t){e.onBoardingStepId=t.stepId||""},function(e){o.logger.debug(e)})},t.prototype.onBlurHandler=function(e,t){var i=this;return t?(this.blurTimers&&clearTimeout(this.blurTimers),this.openMenuPopup=!0):(this.blurTimers&&clearTimeout(this.blurTimers),this.blurTimers=setTimeout(function(){i.openMenuPopup=!1},300)),!0},t.prototype.getEnabledSocial=function(){var e=this,t=r.WidgetConfig.v1.ddoKeySocialConnectOptions,i=this.commonService.getSiteType();this.socialConnectService.makeDDORequest(n,t).then(function(t){t&&t.status&&"SUCCESS"==t.status.toUpperCase()?(e.enabledSocial=t.data,(t.data&&!t.data.external||!t.data.external.length)&&t.data[i]&&(e.enabledSocial.external=t.data[i]),e.fyfStepLandInfo.socialOptions&&e.fyfStepLandInfo.socialOptions.length||(e.fyfStepLandInfo.socialOptions=[],e.enabledSocial&&e.enabledSocial.external&&e.enabledSocial.external.forEach(function(t){e.fyfStepLandInfo.socialOptions.push(t.name)})),e.rearrangeSocials()):(e.rearrangeSocials(),o.logger.debug("social config not found"))})},t.prototype.rearrangeSocials=function(){var t=this;setTimeout(function(){var i=t.element.querySelector("#social-container");if(i){for(var o=[],r=i.children.length,s=0;s<r;s++){var n=i.children[0];o[s]=n,i.removeChild(n)}t.enabledSocial.internal.forEach(function(e){var t=o.find(function(t){return t.id==e.name});t&&i.appendChild(t)})}e.prototype.hideLoader.call(t)},250)},t.prototype.handleLoginPage=function(){var e=this.commonService.getSiteSettings("oauth");e?this.providers=e:o.logger.debug("siteconfig data not available...")},t.prototype.getConnectedData=function(){var e=this;this.socialConnectService.makeDDORequest(n,r.WidgetConfig.v1.ddoKeyMergedProfile).then(function(t){t&&t.socialAccounts&&(e.mergedProfile=t,t.socialAccounts.forEach(function(t){e.connectedState[t.social]=t.status}))})},t.prototype.getLoacale=function(){var e=this.commonService.getLocale();return e=e.split("_"),e="/"+e[1]+"/"+e[0]+"/"},t.prototype.getJwtToken=function(){var t=this,i={};this.candidateLoginService.getValidateJwtToken(n,r.WidgetConfig.v1.ddoKeyValidateJwtToken,i).then(function(e){e.data.isValidToken&&(t.isLoggedIn=!e.data.isAnonymous)},function(i){e.prototype.hideLoader.call(t),new Error(i)})},t.prototype.dologin=function(t){var i=e.prototype.getQueryParam.call(this,"qpage")||"";i=decodeURIComponent(i);var r=e.prototype.getQueryParam.call(this,"page")||"",s=this.providers[t],n=this.getLoacale(),a=this.commonService.getLocale(),l=window.location.pathname,c=this.redirectUri||window.location.href;i||(l+=window.location.search);var p={page:l,protocol:window.location.protocol,localePath:n,qpage:i,pagename:r,locale:a,siteVariant:this.siteVariant,rurl:encodeURIComponent(c)},d=new URLSearchParams(window.location.search),f=d.get("RelayState")||"";f&&f.length&&(p.RelayState=f),t==this.providerKey.LOGIN&&(p.so="gs"),s?(s.redirectUriPath=this.commonService.getRootDomain()+s.redirectUri,s.state=JSON.stringify(p),this.redirectToProvider(s,t)):o.logger.debug("provider doesnt exist")},t.prototype.redirectToProvider=function(e,t){var i=this.providerKey,o=e.loginUrl+"?response_type="+e.response_type+"&";switch(t){case i.MICROSOFT:case i.LINKEDIN:o+="client_id="+encodeURIComponent(e.clientId)+"&";break;case i.GOOGLE:case i.LOGIN:o+="client_id="+encodeURIComponent(e.clientId)+"&access_type=offline&approval_prompt=auto&";break;case i.FACEBOOK:o+="client_id="+encodeURIComponent(e.clientId)+"&"}t&&(o+="redirect_uri="+encodeURIComponent(e.redirectUriPath),e.scope&&(o+="&scope="+encodeURIComponent(e.scope)),e.state&&(o+="&state="+encodeURIComponent(e.state)),window.location.href=o)},t.prototype.submit=function(e){if(e==this.submitAction.NEXT||e==this.submitAction.PREV){var t=r.WidgetConfig.v1.ddoKeyGetNextPage,i={};i.stepId=this.onBoardingStepId,i.action=e,this.socialConnectService.makeDDORequest(n,t,i).then(function(e){e.pageUrl?window.location.href=e.pageUrl:o.logger.debug("Error fetching page URL")},function(e){o.logger.debug(e)})}else o.logger.debug("Invalid action :: "+e)},t.prototype.doProfileLogin=function(e){var t=this;if(this.piiconsent&&this.piiconsent.consentData&&this.piiconsent.consentData.length){if(this.piiconsent.checkConsentError&&this.piiconsent.checkConsentError()&&"signUp"==this.profileLoginFlow)return void(this.piiconsent.handleError&&this.piiconsent.handleError())}else if(this.privacyConsentReqFlag&&(this.privacyConsentError=!1,!this.privacyDataConsent&&"signUp"==this.profileLoginFlow))return void(this.privacyConsentError=!0);var i={},o={};i.trait213=e.name,this.commonService.processTrackingEvent("social_login_click",void 0,i),this.redirectPage&&this.redirectPage.length&&(this.redirectUri="/");var s={redirectUri:this.redirectUri,name:e.name};this.fyfStepLandInfo&&this.fyfStepLandInfo.optIn&&(o.optIn=this.fyfStepLandInfo.optIn);var a=this.candidateLoginService.socialLoginUrl(n,e.userType,s,o),l=this.commonService.getSiteSettings("ignoreLinkedInStateParam");if("linkedIn"==e.name&&!l){var c;try{c=JSON.parse(this.getQueryParam(a,"state")||"{}"),Object.keys(c).forEach(function(e){c[e]=decodeURIComponent(c[e])})}catch(e){}this.socialConnectService.makeDDORequest(n,"storeStateParams",{stateParams:c}).then(function(e){e&&e.data?window.location.href=t.setQueryParam(a,"state",e.data):window.location.href=a})}if(this.fyfStepLandInfo&&"fyf"==this.fyfStepLandInfo.context&&this.localStorage.setItem("fyfStepLandInfo",this.fyfStepLandInfo),this.piiconsent&&this.piiconsent.consentData&&this.piiconsent.consentData.length&&"signUp"==this.profileLoginFlow){var p={profile:{}};this.piiconsent.consentData.forEach(function(e){e.type&&(p.profile[e.type]=!!e.isChecked)}),this.socialConnectService.makeDDORequest(n,r.WidgetConfig.v1.ddoKeyCreateConsentProfile,p).then(function(e){a&&(window.location.href=a)})}else("linkedIn"!=e.name||l)&&a&&(window.location.href=a)},t.prototype.getQueryParam=function(e,t){for(var i=e.substr(1),o=i.split("&"),r=0;r<o.length;r++){var s=o[r];if(s=s.split("="),s.length>1&&s[0]==t)return decodeURIComponent(s[1])}},t.prototype.setQueryParam=function(e,t,i){var o=new RegExp("([?&])"+t+"=.*?(&|$)","i"),r=-1!==e.indexOf("?")?"&":"?";return e.match(o)?e.replace(o,"$1"+t+"="+i+"$2"):e+r+t+"="+i},t.prototype.guestLogin=function(){var t=e.prototype.getQueryParam.call(this,"qpage")||"";t=decodeURIComponent(t);var i;if(t.length&&(i=this.commonService.getRootDomain()+t+"&qGuest=true"),t){var o={};o.trait213="guest",this.commonService.processTrackingEvent("social_login_click",void 0,o),window.location.href=i}},t.prototype.doProfileLogout=function(){var t=this;e.prototype.trackWidgetClick.call(this,"logout_click",{}),this.candidateLoginService.doLogout(n,r.WidgetConfig.v1.ddoKeyJwtLogout).then(function(i){i&&"success"==i.status?(t.isLoggedIn=!1,e.prototype.raiseEvent.call(t,"social-logout",{})):o.logger.debug("Failure ",i)})},t.prototype.getLocalWidgetBundle=function(){return{profileCount:"{{profileCount}} previous profiles",profileCountSingler:"{{profileCount}} previous profile",duplicateProfileInfo:"{{profileCount}} duplicate profiles found",facebook:"Sign in with Facebook",google:"Sign in with Google",linkedIn:"Sign in with LinkedIn",mergeCount:"Merge selected ({{profileCount}})","google-sign":"Sign in with Google",duplicateProfileInfoSingler:"{{profileCount}} duplicate profile found"}},t.prototype.handleSkip=function(e,t,i){this.fyfStepLandInfo&&this.fyfStepLandInfo.fyfFuncRef&&this.fyfStepLandInfo.fyfFuncRef(e,t,i)},t.prototype.handleNextKeyup=function(e,t,i){return e&&e.length-1==t&&this.fyfStepLandInfo&&this.fyfStepLandInfo.fyfNextStepFuncRef&&this.fyfStepLandInfo.fyfNextStepFuncRef(i),!0},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"fyfStepLandInfo",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"redirectPage",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"profileLoginFlow",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"piiconsent",void 0),t=__decorate([i.customElement(n),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(a=void 0!==o.CommonService&&o.CommonService)&&a||Object,s.SocialConnectService,"function"==typeof(l=void 0!==o.CandidateLoginService&&o.CandidateLoginService)&&l||Object,"function"==typeof(c=void 0!==o.LocalStorageAPI&&o.LocalStorageAPI)&&c||Object])],t);var a,l,c}(o.PhenomWidget);t.SocialConnect=a}),define("text!v1/ph-social-connect.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-import-resume-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"siteConfig"}},t.ProviderKey={DropBox:"dropbox",GoogleDrive:"googledrive",OneDrive:"onedrive",LocalComputer:"localdrive",LocalComputerV2:"localdriveV2",LocalComputerV3:"localdriveV3"},function(e){e[e.Loaded=0]="Loaded",e[e.Errored=1]="Errored",e[e.InProgress=2]="InProgress"}(t.ScriptStatus||(t.ScriptStatus={}))});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-dropbox",["require","exports","aurelia-framework","./ph-import-resume-config","aurelia-event-aggregator"],function(e,t,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e){this.eventAggregator=e,this.provider={api:"https://www.dropbox.com/static/api/2/dropins.js",devkey:"",clientId:"",scope:[],sid:"dropboxjs",state:null,viewId:"dropbox",errorRequest:5,amd:!1,attr:[{name:"data-app-key",refId:"clientId"}]},this.scriptState=o.ScriptStatus,this.pickerOptions={success:this.handlePickerSuccess.bind(this),cancel:this.handlePickerCanceled.bind(this),linkType:"direct",multiselect:!1,extensions:[".doc",".docx",".pdf",".txt"]},this.eventAggregator=e}return e.prototype.handlePickerSuccess=function(e){var t=e[0],i=t.bytes/1048576,o={fileLocation:t.link,fileName:t.name,proceed:!1};i<=2&&(o.proceed=!0),this.eventAggregator.publish("fileAdded",o)},e.prototype.handlePickerCanceled=function(){this.eventAggregator.publish("fileErrored",{type:"cancel"})},e.prototype.loadScripts=function(e){var t=this,i=this.provider,o=document.getElementsByTagName("head")[0];if(!document.getElementById(i.sid)){var r=document.createElement("script");r.type="text/javascript",r.src=i.api,r.id=i.sid;for(var s=i.attr,n=0,a=s;n<a.length;n++){var l=a[n];r.setAttribute(l.name,this.provider[l.refId])}r.async=!0,r.onload=function(o){i.state=!0,t.drive=Dropbox,e(!0)},r.onerror=function(){if(console.info("errored"),i.errorRequest){i.errorRequest--;var e=document.getElementById(i.sid);e.parentNode.removeChild(e),setTimeout(function(){return t.loadScripts(i)},500),console.info("errored")}else i.state=null},o&&o.appendChild(r)}},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e.prototype.addPickerData=function(e){this.provider.clientId=e?e.clientId:"zxqem6bqrgopvs0"},e.prototype.launchDrive=function(e){!0===this.provider.state&&this.drive.choose(this.pickerOptions)},e=__decorate([i.autoinject(),__metadata("design:paramtypes",[r.EventAggregator])],e)}();t.ImportDropBox=s});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-onedrive",["require","exports","./ph-import-resume-config","aurelia-event-aggregator","aurelia-framework"],function(e,t,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e){this.eventAggregator=e,this.provider={api:"https://js.live.net/v5.0/OneDrive.js",devkey:"",clientId:"",scope:[],sid:"onedrive-js",state:null,errorRequest:5,amd:!0,viewId:"onedrive",attr:[{name:"client-id",ref:"clientId"}]},this.scriptState=i.ScriptStatus,this.fileFormats=[],this.supporteFileFormats="bmp, doc, docx, dot, dotx, gif, gz, htm, html, jpeg, jpg, msg, odp, ods, odt, pdf, png, ppt, pptx, rar, rtf, tif, tiff, txt, wpd, wri, xls, xlsx, xlt, xltx, or zip",this.pickerOptions={clientId:"",action:"download",multiSelect:!1,success:this.handlePickerSuccess.bind(this),error:this.handlePickerErrored.bind(this),cancel:this.handlePickerCanceled.bind(this),linkType:"downloadLink"},this.eventAggregator=e}return e.prototype.handlePickerSuccess=function(e){var t=e.values[0],i=t.size/1048576,o={fileLocation:t.link,fileName:t.fileName,proceed:!1};if(i<=2){o.proceed=!0;var r=o.fileName.split("."),s=r[r.length-1];this.supporteFileFormats.indexOf(s.toLowerCase())>=0?this.eventAggregator.publish("fileAdded",o):this.eventAggregator.publish("fileErrored",{type:"unsupported"})}else this.eventAggregator.publish("fileErrored",{type:"exceeds"})},e.prototype.handlePickerErrored=function(){this.eventAggregator.publish("fileErrored",{type:"errored"})},e.prototype.handlePickerCanceled=function(){this.eventAggregator.publish("fileErrored",{type:"cancel"})},e.prototype.loadScripts=function(e){var t=this,i=this.provider,o=document.getElementsByTagName("head")[0],r=document.getElementById(i.sid);if(r){for(var s=i.attr,n=0,a=s;n<a.length;n++){var l=a[n];r.setAttribute(l.name,this.provider[l.ref])}i.state=!0,this.drive=OneDrive,e(!0)}else{var c=document.createElement("script");c.type="text/javascript",c.src=i.api,c.id=i.sid;for(var s=i.attr,p=0,d=s;p<d.length;p++){var l=d[p];c.setAttribute(l.name,this.provider[l.ref])}c.async=!0,c.onload=function(o){i.state=!0,t.drive=OneDrive,e(!0)},c.onerror=function(){if(console.info("errored"),i.errorRequest){i.errorRequest--;var e=document.getElementById(i.sid);e.parentNode.removeChild(e),setTimeout(function(){return t.loadScripts(i)},500),console.info("errored")}else i.state=null},o&&o.appendChild(c)}},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e.prototype.addPickerData=function(e){e&&(this.provider.clientId=e.clientId,this.pickerOptions.clientId=e.clientId)},e.prototype.launchDrive=function(e){!0===this.provider.state?this.drive.open(this.pickerOptions):console.info("state:"+this.provider.state)},e=__decorate([r.autoinject(),__metadata("design:paramtypes",[o.EventAggregator])],e)}();t.ImportOneDrive=s});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-googledrive",["require","exports","./ph-import-resume-config","aurelia-event-aggregator","aurelia-framework"],function(e,t,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e){this.eventAggregator=e,this.provider={api:"https://apis.google.com/js/client.js",devkey:"",clientId:"",scope:["https://www.googleapis.com/auth/drive"],sid:"googledrivejs",state:null,errorRequest:5,amd:!1,viewId:"googledrive",attr:[]},this.scriptState=i.ScriptStatus,this.pickerApiLoaded=!1,this.oauthToken=!1,this.eventAggregator=e}return e.prototype.loadScripts=function(e){var t=this,i=this.provider,o=document.getElementsByTagName("head")[0];if(!document.getElementById(i.sid)){var r=document.createElement("script");r.type="text/javascript",r.src=i.api,r.id=i.sid;for(var s=i.attr,n=0,a=s;n<a.length;n++){var l=a[n];r.setAttribute(l.name,l.value)}r.async=!0,r.onload=function(t){i.state=!0,e(!0)},r.onerror=function(){if(console.info("errored"),i.errorRequest){i.errorRequest--;var e=document.getElementById(i.sid);e.parentNode.removeChild(e),setTimeout(function(){return t.loadScripts(i)},500),console.info("errored")}else i.state=null},o&&o.appendChild(r)}},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e.prototype.launchDrive=function(e){!0===this.provider.state?(gapi.auth.init(this.onAuthApiLoad.bind(this)),gapi.load("picker",{callback:this.onPickerApiLoad.bind(this)})):console.info("state:"+state)},e.prototype.onAuthApiLoad=function(){var e=this.provider;window.gapi.auth.authorize({client_id:e.clientId,scope:e.scope,immediate:!1},this.handleAuthResult.bind(this))},e.prototype.onPickerApiLoad=function(){this.pickerApiLoaded=!0},e.prototype.handleAuthResult=function(e){e&&!e.error&&(this.oauthToken=e.access_token,this.createPicker())},e.prototype.createPicker=function(){this.pickerApiLoaded&&this.oauthToken&&(new google.picker.View(google.picker.ViewId.DOCS).setMimeTypes("application/msword, application/pdf, application/rtf, text/plain, application/vnd.openxmlformats-officedocument.wordprocessingml.document, text/html, image/jpeg, image/png, image/jpg,application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/rar, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/zip, application/x-compressed-zip, image/bmp, application/vnd.openxmlformats-officedocument.wordprocessingml.template, image/gif, application/x-gzip, application/vnd.google-apps.photo, application/vnd.google.drive.ext-type.jpg, application/vnd.google.drive.ext-type.png"),(new google.picker.PickerBuilder).addViewGroup(new google.picker.ViewGroup(google.picker.ViewId.DOCS).addView(google.picker.ViewId.DOCUMENTS).addView(google.picker.ViewId.PHOTOS)).enableFeature(google.picker.Feature.NAV_HIDDEN).setOAuthToken(this.oauthToken).setDeveloperKey(this.provider.devkey).setCallback(this.pickerCallback.bind(this)).build().setVisible(!0))},e.prototype.pickerCallback=function(e){var t=this,i="";if(e[google.picker.Response.ACTION]==google.picker.Action.PICKED){var o=e[google.picker.Response.DOCUMENTS][0];i=o[google.picker.Document.URL];var r=o.sizeBytes/1048576,s={fileLocation:i,fileName:o.name,proceed:!1};if("file"==o.type||"photo"==o.type){var n=o.id,a=this.oauthToken;r<=10?(s.proceed=!0,gapi.client.request({path:"/drive/v3/files/"+n+"/permissions/",method:"POST",body:{role:"reader",type:"anyone"}}).execute(function(e){var i=new XMLHttpRequest;i.open("GET","https://www.googleapis.com/drive/v2/files/"+n),i.setRequestHeader("Authorization","Bearer "+a),i.addEventListener("load",function(){var e=JSON.parse(i.responseText);s.fileLocation=e.webContentLink,t.eventAggregator.publish("fileAdded",s)}),i.addEventListener("error",function(){t.eventAggregator.publish("fileErrored",{type:"common"})}),i.send()})):this.eventAggregator.publish("fileErrored",{type:"exceeds"})}else this.eventAggregator.publish("fileErrored",{type:"unsupported"})}else e[google.picker.Response.ACTION]==google.picker.Action.CANCEL&&this.eventAggregator.publish("fileErrored",{type:"cancel"})},e.prototype.addPickerData=function(e){e?(this.provider.clientId=e.clientId,this.provider.devkey=e.devkey):(this.provider.devkey="AIzaSyBFrajIgOC9E6vnLy9n1YheaHkzGX7x1Dc",this.provider.clientId="21747885378-4j2okdko0uuvqb4bacu2rvr1cjndt9l2.apps.googleusercontent.com")},e=__decorate([r.autoinject(),__metadata("design:paramtypes",[o.EventAggregator])],e)}();t.ImportGoogleDrive=s});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-localdrive",["require","exports","aurelia-framework","dropzone","aurelia-event-aggregator"],function(e,t,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e){this.provider={api:"",devkey:"",clientId:"",scope:[],sid:"",state:null,errorRequest:5,amd:!0,viewId:"localdrive",attr:[]},this.maxFileSize=10,this.fileObj={},this.ctx={uploadUrl:"/fileUpload",allowedFormats:".bmp, .doc, .docx, .dot, .dotx, .gif, .gz, .htm, .html, .jpeg, .jpg, .msg, .odp, .ods, .odt, .pdf, .png, .ppt, .pptx, .rar, .rtf, .tif, .tiff, .txt, .wpd, .wri, .xls, .xlsx, .xlt, .xltx, .zip",previewTemplate:""},this.eventAggregator=e}return e.prototype.handleFileUpload=function(){var e=this;try{if(o&&document.querySelector(".ph-dropzone-area")){o.options.phDropzone=!1,o.options.autoDiscover=!1;var t={url:phApp.baseDomain+this.ctx.uploadUrl,withCredentials:!0,clickable:""};this.ctx.allowedFormats&&(t.acceptedFiles=this.ctx.allowedFormats),t.maxFilesize=this.maxFileSize,this.dropzone&&this.dropzone.destroy(),t.clickable="#ph-dropzone",this.dropzone=new o(".ph-dropzone-area",t),this.dropzone.on("success",function(t,i){e.fileObj=t,e.fileObj.res=i,e.eventAggregator.publish("fileAddedLocalDrive",i)}),this.dropzone.on("addedfile",function(t){e.eventAggregator.publish("fileAddedLocalDriveInitiated",{view:e.provider.viewId})}),this.dropzone.on("canceled",function(t){var i={type:"cancel"};e.eventAggregator.publish("fileErrored",i)}),this.dropzone.on("uploadprogress",function(t){e.fileObj=t}),this.dropzone.on("error",function(i,r,s,n){var a=i.size/1048576,l={type:"common"};if(a>e.maxFileSize)l.type="exceeds",l.maxFileSize=e.maxFileSize;else if(i.type){var c=o.isValidFile(i,t.acceptedFiles);c||(l.type="unsupported")}e.eventAggregator.publish("fileErrored",l)}),this.eventAggregator.subscribe("ph:ir:lc:fileSizeChanged",function(t){t.fileSize&&(e.maxFileSize=t.fileSize)})}}catch(e){console.info(e.message)}},e.prototype.loadScripts=function(e){var t=this;this.provider.state=!0,setTimeout(function(){return t.handleFileUpload()},100),e(!0)},e.prototype.handleSuccess=function(e){},e.prototype.addPickerData=function(e){},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e=__decorate([i.autoinject(),__metadata("design:paramtypes",[r.EventAggregator])],e)}();t.ImportLocalDrive=s});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o
;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-localdriveV2",["require","exports","aurelia-framework","dropzone","aurelia-event-aggregator"],function(e,t,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e){this.provider={api:"",devkey:"",clientId:"",scope:[],sid:"",state:null,errorRequest:5,amd:!0,viewId:"localdriveV2",attr:[]},this.maxFileSize=10,this.fileObj={},this.ctx={uploadUrl:"/fileCommonUpload",allowedFormats:".bmp, .doc, .docx, .dot, .dotx, .gif, .gz, .htm, .html, .jpeg, .jpg, .msg, .odp, .ods, .odt, .pdf, .png, .ppt, .pptx, .rar, .rtf, .tif, .tiff, .txt, .wpd, .wri, .xls, .xlsx, .xlt, .xltx, .zip",previewTemplate:""},this.eventAggregator=e}return e.prototype.handleFileUpload=function(){var e=this;if(o&&document.querySelector(".ph-dropzone-areaV2")){o.options.phDropzone=!1,o.options.autoDiscover=!1;var t={url:phApp.baseDomain+this.ctx.uploadUrl,withCredentials:!0,clickable:!1};this.ctx.allowedFormats&&(t.acceptedFiles=this.ctx.allowedFormats),t.maxFilesize=this.maxFileSize,t.clickable="#ph-v2dropzone",this.dropzone&&this.dropzone.destroy(),this.dropzone=new o(".ph-dropzone-areaV2",t),this.dropzone.on("success",function(t,i){e.fileObj=t,e.fileObj.res=i,e.eventAggregator.publish("fileAddedLocalDrive",i)}),this.dropzone.on("addedfile",function(t){e.eventAggregator.publish("fileAddedLocalDriveInitiated",{view:e.provider.viewId})}),this.dropzone.on("canceled",function(t){var i={type:"cancel"};e.eventAggregator.publish("fileErrored",i)}),this.dropzone.on("uploadprogress",function(t){e.fileObj=t}),this.dropzone.on("error",function(i,r,s,n){var a=i.size/1048576,l={type:"common"};if(a>e.maxFileSize)l.type="exceeds",l.maxFileSize=e.maxFileSize;else if(i.type){var c=o.isValidFile(i,t.acceptedFiles);c||(l.type="unsupported")}e.eventAggregator.publish("fileErrored",l)}),this.eventAggregator.subscribe("ph:ir:lc:fileSizeChanged",function(t){t.fileSize&&(e.maxFileSize=t.fileSize)})}},e.prototype.loadScripts=function(e){var t=this;this.provider.state=!0,setTimeout(function(){return t.handleFileUpload()},100),e(!0)},e.prototype.handleSuccess=function(e){},e.prototype.addPickerData=function(e){},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e=__decorate([i.autoinject(),__metadata("design:paramtypes",[r.EventAggregator])],e)}();t.ImportLocalDriveV2=s});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-localdriveV3",["require","exports","aurelia-framework","dropzone","aurelia-event-aggregator","ph-common"],function(e,t,i,o,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.commonService=t,this.provider={api:"",devkey:"",clientId:"",scope:[],sid:"",state:null,errorRequest:5,amd:!0,viewId:"localdriveV3",attr:[]},this.maxFileSize=10,this.uploadingSronly=!1,this.fileObj={},this.profileMerge=!1,this.ctx={uploadUrl:"/uploadResumeS3andParse",allowedFormats:".doc, .docx, .pdf, .txt",previewTemplate:""},this.eventAggregator=e}return e.prototype.handleFileUpload=function(){var e=this;this.eventAggregator.subscribe("initiate_upload",function(t){"localdriveV3"===t.provideId&&e.dropzone.processQueue()});var t={},i=this.element||document;if(o&&i.querySelector(".ph-dropzone-area")){o.options.phDropzone=!1,o.options.autoDiscover=!1,this.ctx=this.fileCtx||this.ctx;var r={url:this.commonService.getBaseDomain()+this.ctx.uploadUrl,withCredentials:!0,clickable:!1};this.ctx.allowedFormats&&(r.acceptedFiles=this.ctx.allowedFormats),this.ctx.hasOwnProperty("maxFiles")&&(r.maxFiles=this.ctx.maxFiles),r.maxFilesize=this.ctx.maxFileSize?this.ctx.maxFileSize:this.maxFileSize,this.fileCtx&&(r.params={dk:this.fileCtx.dk||"fileUpload"}),this.profileMerge&&(r.params?r.params.profileMerge=!0:(r.params={},r.params.profileMerge=!0)),this.ctx&&this.ctx.clickable?r.clickable=this.ctx.clickable:r.clickable="#ph-dropzone";var s=sessionStorage.getItem("resumeAutoDiscover");this.profileMerge&&"false"===s&&(r.autoProcessQueue=!1),this.dropzone&&this.dropzone.destroy(),this.dropzone=new o(".ph-dropzone-area",r),this.dropzone.off("success").on("success",function(i,o){if(e.fileObj=i,e.fileObj.res=o,localStorage.processType?o.source=localStorage.processType:o.source="",o&&"success"==o.status)e.eventAggregator.publish("fileAddedLocalDrive",o),t.status="success",t.data=i;else{t.status="error";var r={type:"error"};t.data=r}e.eventAggregator.publish("fileErrored",r),e.handleFileUploadStaus(t)}),this.dropzone.off("addedfile").on("addedfile",function(i){e.eventAggregator.publish("fileAddedLocalDriveInitiated",{view:e.provider.viewId}),t.status="addedfile",t.data=i,e.handleFileUploadStaus(t)}),this.dropzone.off("canceled").on("canceled",function(i){var o={type:"cancel"};e.eventAggregator.publish("fileErrored",o),t.status="canceled",t.data=i,e.handleFileUploadStaus(t)}),this.dropzone.off("uploadprogress").on("uploadprogress",function(i){e.fileObj=i,e.uploadingSronly=!0,setTimeout(function(){e.uploadingSronly=!1},4e3),t.status="uploadprogress",t.data=i,e.handleFileUploadStaus(t)}),this.dropzone.off("complete").on("complete",function(i){e.fileObj=i,e.fileObj.res&&e.fileObj.res.status&&("503"==e.fileObj.res.status||"failure"==e.fileObj.res.status)&&(t.status="error",e.handleFileUploadStaus(t))}),this.dropzone.off("error").on("error",function(i,s,n,a){var l=e.ctx.maxFileSize?e.ctx.maxFileSize:e.maxFileSize,c=i.size/1048576,p={type:"common",name:i.name};if(c>l)p.type="exceeds",p.maxFileSize=l,p.name=i.name;else if(i.type){var d=o.isValidFile(i,r.acceptedFiles);d||(p.type="unsupported",p.name=i.name)}e.eventAggregator.publish("fileErrored",p),t.status="error",t.data=p,e.handleFileUploadStaus(t)}),this.eventAggregator.subscribe("ph:ir:lc:fileSizeChanged",function(t){t.fileSize&&(e.maxFileSize=t.fileSize)})}},e.prototype.loadScripts=function(e){var t=this;this.provider.state=!0,setTimeout(function(){return t.handleFileUpload()},100),e(!0)},e.prototype.handleSuccess=function(e){},e.prototype.addPickerData=function(e){},e.prototype.handleBindableData=function(e){this.fileCtx=e.ctx,this.element=e.elem,this.profileMerge=e.profileMerge},e.prototype.handleFileUploadStaus=function(e){this.fileCtx&&this.fileCtx.funRef&&this.fileCtx.funRef(e)},Object.defineProperty(e.prototype,"status",{get:function(){return this.provider.state},enumerable:!0,configurable:!0}),e=__decorate([i.autoinject(),__metadata("design:paramtypes",[r.EventAggregator,"function"==typeof(t=void 0!==s.CommonService&&s.CommonService)&&t||Object])],e);var t}();t.ImportLocalDriveV3=n});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-factory",["require","exports","./ph-import-resume-config","aurelia-framework","./ph-import-resume-onedrive","./ph-import-resume-dropbox","./ph-import-resume-googledrive","./ph-import-resume-localdrive","./ph-import-resume-localdriveV2","./ph-import-resume-localdriveV3"],function(e,t,i,o,r,s,n,a,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t,i,o,r,s){this.onedrive=e,this.dropbox=t,this.localdrive=i,this.localdriveV2=o,this.localdriveV3=r,this.googledrive=s}return e.prototype.getImporter=function(e){if(!e)return null;switch(e){case i.ProviderKey.OneDrive:return this.onedrive;case i.ProviderKey.GoogleDrive:return this.googledrive;case i.ProviderKey.DropBox:return this.dropbox;case i.ProviderKey.LocalComputer:return this.localdrive;case i.ProviderKey.LocalComputerV2:return this.localdriveV2;case i.ProviderKey.LocalComputerV3:return this.localdriveV3}},e.prototype.loadprovider=function(e){},e=__decorate([o.autoinject(),__metadata("design:paramtypes",[r.ImportOneDrive,s.ImportDropBox,a.ImportLocalDrive,l.ImportLocalDriveV2,c.ImportLocalDriveV3,n.ImportGoogleDrive])],e)}();t.ImportFactory=p});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.commonService=e}return e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.ImportResumeService=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-import-resume",["require","exports","aurelia-framework","ph-common","./ph-import-resume-config","./ph-import-resume-service","aurelia-event-aggregator","./ph-import-resume-factory"],function(e,t,i,o,r,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="ph-import-resume-v1",c=function(e){function t(t,i,o,s,n){var a=e.call(this,t,i,l)||this;return a.element=t,a.commonService=i,a.importResumeService=o,a.eventAggregator=s,a.importer=n,a.profileMerge=!1,a.providerKey=r.ProviderKey,a.private=null,a.providerId="localdrive",a.labelName="Local computer",a}return __extends(t,e),t.prototype.getSiteConfig=function(){var t=this,i=this.commonService.getSiteSettings("filePicker")||{};if(Object.keys(i).length||"localdriveV3"==this.providerId){if(this.pickerData=i[this.providerId]||{},this.providerId&&(this.driver=this.importer.getImporter(this.providerId),this.driver)){if(this.driver.addPickerData(this.pickerData),this.fileCtx&&this.driver.handleBindableData){var o={};o.ctx=this.fileCtx,o.elem=this.element,o.profileMerge=this.profileMerge,this.driver.handleBindableData(o)}else if(this.driver.handleBindableData){var o={};o.profileMerge=this.profileMerge,this.driver.handleBindableData(o)}this.driver.loadScripts(function(e){t.enableDrive=e})}e.prototype.hideLoader.call(this)}},t.prototype.chooseResume=function(e,t){var i=this;this.eventAggregator.publish("filePickerInitiated",{view:this.providerId}),setTimeout(function(){t&&i.providerId==t?i.driver.launchDrive(e):t||i.driver.launchDrive(e)},10)},t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.getSiteConfig(),this.eventAggregator.subscribe("ATTACH_LINK",function(e){var i=e.providerType;i&&t.chooseResume("",i)})},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",Boolean)],t.prototype,"profileMerge",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"successImport",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"errorImport",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"fileCtx",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"fyfStepConfig",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"fyfProvider",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"providerId",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"labelName",void 0),t=__decorate([i.customElement(l),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==o.CommonService&&o.CommonService)&&c||Object,s.ImportResumeService,n.EventAggregator,a.ImportFactory])],t);var c}(o.PhenomWidget);t.ImportResume=c}),define("text!v1/ph-import-resume.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-import-resume-v1/attachment/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a id="ph-v2dropzone" href="javascript:void(0)" method="POST" class="dropzone" role="button" title="Local computer" aria-label="importe resume from Local computer" key-role="button" key-title="localComputer" key-aria-label="importeResumeFromLocalComputerText" ph-tevent="local_drive_click" data-ph-tevent-attr-trait145="local_drive" data-ph-tevent-attr-trait27="${profileForm.email}">\n        <div class="left-icon-holder ">\n            <i class="msicon-fullmdl2assets-25 local-pc-iconholder"></i>\n        </div>\n        <div class="right-content">\n            <ppc-content key="localComputer">Local computer</ppc-content>\n        </div>\n    </a>\n</template>'}),define("text!v1/views/ph-import-resume-v1/default/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a id="ph-dropzone" href="javascript:void(0)" method="POST" class="dropzone ${ (enableDrive === true)  ? \'active\': \'disabled\'}" role="button" title="Local computer" aria-label="importe resume from Local computer" key-role="button" key-title="localComputer" key-aria-label="importeResumeFromLocalComputerText" ph-tevent="local_drive_click" data-ph-tevent-attr-trait145="local_drive" data-ph-tevent-attr-trait27="${profileForm.email}">\n        <div class="left-icon-holder ">\n            <i class="msicon-fullmdl2assets-25 local-pc-iconholder"></i>\n        </div>\n        <div class="right-content">\n            <ppc-content key="localComputer">Local computer</ppc-content>\n        </div>\n    </a>\n</template>'}),define("text!v1/views/ph-import-resume-v1/dropbox/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a href="javascript:void(0)" click.trigger="chooseResume($event)" class="${ (enableDrive === true)  ? \'active\': \'disabled\'}"\n        role="button" title="Choose from Dropbox">\n        <div class="left-icon-holder">\n            <span class="icon-sprite dropbox-icon-holder"></span>\n        </div>\n        <div class="right-content">Dropbox</div>\n    </a>\n</template>'}),define("text!v1/views/ph-import-resume-v1/googledrive/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a href="javascript:void(0)" click.trigger="chooseResume($event)" class="${ (enableDrive === true)  ? \'active\': \'disabled\'}"\n        role="button" title="Choose from Google Drive">\n        <div class="left-icon-holder">\n            <span class="icon-sprite googledrive-icon-holder"></span>\n        </div>\n        <div class="right-content">Google Drive</div>\n        </a>\n        \x3c!--<a href="javascript:void(0)" click.trigger="chooseResume(provider.oneDrive)" class="${canOneDrive ? \'active\': \'disabled\'}"\n        role="button" title="Choose from OneDrive">\n        <div class="icon-box dropbox-icon">\n            <ppc-content type="icon">\n            </ppc-content>\n        </div>\n        <div class="text-box">\n            Choose from OneDrive\n        </div>\n    </a>--\x3e\n</template>'}),define("text!v1/views/ph-import-resume-v1/im-default/view.html",["module"],function(e){e.exports='<template>\n\n\t<a id="ph-dropzone" href="javascript:void(0)" class="dropzone active" role="button">\n\t\t<div class="dropzone-content">\n\t\t\t<div class="icon-holder ">\n\t\t\t\t<i class="fa-2x fa fa-dropbox"></i>\n\t\t\t</div>\n\t\t\t<div class="content-holder">\n\t\t\t\t<ppc-content>Browse My Device</ppc-content>\n\t\t\t</div>\n\t\t</div>\n\t</a>\n\n</template>'}),define("text!v1/views/ph-import-resume-v1/im-dropbox/view.html",["module"],function(e){e.exports='<template>\n\n\t<a id="ph-dropzone" href="javascript:void(0)" class="dropzone" role="button">\n\t\t<div class="dropzone-content">\n\t\t\t<div class="icon-holder ">\n\t\t\t\t<i class="fa-2x fa fa-dropbox"></i>\n\t\t\t</div>\n\t\t\t<div class="content-holder">\n\t\t\t\t<ppc-content>Upload from Dropbox</ppc-content>\n\t\t\t</div>\n\t\t</div>\n\t</a>\n\t\n</template>'}),define("text!v1/views/ph-import-resume-v1/im-googledrive/view.html",["module"],function(e){e.exports='<template>\n\n\t<a id="ph-dropzone" href="javascript:void(0)" class="dropzone" role="button">\n\t\t<div class="dropzone-content">\n\t\t\t<div class="icon-holder ">\n\t\t\t\t<i class="fa-2x fa fa-dropbox"></i>\n\t\t\t</div>\n\t\t\t<div class="content-holder">\n\t\t\t\t<ppc-content>Upload from Google drive</ppc-content>\n\t\t\t</div>\n\t\t</div>\n\t</a>\n\t\n</template>'}),define("text!v1/views/ph-import-resume-v1/onedrive/view.html",["module"],function(e){e.exports='<template>\n    \x3c!-- view html here --\x3e\n    <a href="javascript:void(0)" click.trigger="chooseResume($event)" class="${ (enableDrive === true)  ? \'active\': \'disabled\'}"\n        role="button" title="Choose from OneDrive">\n        <div class="left-icon-holder">\n            <span class="icon-sprite microsoft-icon-holder"></span>\n        </div>\n        <div class="right-content">Microsoft OneDrive</div>\n        </a>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-geo-location-config",["require","exports"],function(e,t){"use strict";t.WidgetConfig={v1:{ddoKey:""}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-geo-location-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";var r=function(){function e(e){this.commonService=e}return e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.GeoLocationService=r});var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-geo-location",["require","exports","aurelia-framework","ph-common","./ph-geo-location-service","aurelia-event-aggregator"],function(e,t,i,o,r,s){"use strict";var n="ph-geo-location-v1",a={"errors.location.unsupportedBrowser":"Browser does not support location services","errors.location.permissionDenied":"You have rejected access to your location","errors.location.positionUnavailable":"Unable to determine your location"},l=function(e){function t(t,i,o,r){e.call(this,t,i,n),this.geoLocationService=o,this.publishEvent=r}return __extends(t,e),t.prototype.getGeoLocation=function(){var e={enableHighAccuracy:!0,maximumAge:0};return new Promise(function(t,i){function o(e){t(e)}function r(e){i(e.message)}window.navigator&&window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(o,r,e):i(a["errors.location.unsupportedBrowser"])})},t.prototype.saveLocation=function(){var e=this;this.getGeoLocation().then(function(t){e.geoLocation=t,e.publishEvent.publish("GeoLocation",t)}).catch(function(t){e.publishEvent.publish("LocationError",t)})},t.prototype.askForLocation=function(){return this.geoLocation?this.geoLocation:void this.saveLocation()},t.prototype.created=function(){this.saveLocation()},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),t=__decorate([i.customElement(n),i.containerless(),i.autoinject(),i.noView(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==o.CommonService&&o.CommonService)&&l||Object,r.GeoLocationService,s.EventAggregator])],t);var l}(o.PhenomWidget);t.GeoLocation=l}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-near-by-jobs-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"nearByJobs",ddoKeyAdd:"addToCartV2",ddoKeyDelete:"deleteFromCartV2",ddoKeyStatusList:"getJobStatusListV2"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-near-by-jobs-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},s=function(){function e(e){this.commonService=e}return e.prototype.getJobs=function(e,t,i,o){return r.latitude=i.coords.latitude,r.longitude=i.coords.longitude,r.radius=o||i.coords.accuracy,this.commonService.getDDO(e,t,r).then(function(e){return e.nearByJobs})},e.prototype.addToCart=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.deleteFromCart=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.getJobSatusList=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.NearByJobsService=s});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-near-by-jobs",["require","exports","aurelia-framework","aurelia-event-aggregator","ph-common","./ph-near-by-jobs-config","./ph-near-by-jobs-service","ph-common"],function(e,t,i,o,r,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="ph-near-by-jobs-v2",c=function(e){function t(t,i,o,r,s,n){var a=e.call(this,t,i,l)||this;return a.element=t,a.commonService=i,a.nearByJobsService=o,a.geoLocationService=r,a.eventAggregator=s,a.localStorage=n,a.radius=300,a.jobsPerSlide=5,a.nearByJobSlides=[],a.initialCarouselIndex=0,a.currentSlide=1,a.totalSlideCount=1,a.permissionDenied=!1,a.subscriptions=[],a.nearbyJobsEntryForLocalStr=[],a}return __extends(t,e),t.prototype.created=function(){this.getLocationData()},t.prototype.attached=function(){e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this.isGeoLocationSubscribed=!0},t.prototype.getJobsData=function(t){var i=this;e.prototype.unhideLoader.call(this);var o=t.coords.longitude,r=t.coords.latitude,n=this.commonService.getLocalStorageContext("userLocation");n&&n.length&&(n=JSON.parse(n),o=n.longitude&&n.longitude,r=n.latitude&&n.latitude),this.nearByJobsService.getJobs(l,s.WidgetConfig.v2.ddoKey,t,this.radius).then(function(t){if(null==t||null==t.data||null==t.data.nearbyjobs||!(t.data.nearbyjobs.length>0))return void e.prototype.handleError.call(i,"");i.jobResults=t.data.nearbyjobs;for(var s=0;s<i.jobResults.length;s++){var n=i.jobResults[s].title,a=i.jobResults[s].jobSeqNo,c={};c.title=n,c.jobSeqNo=a,i.nearbyJobsEntryForLocalStr.push(c),e.prototype.hideLoader.call(i)}i.jobFields.length&&i.enabledFields.hasOwnProperty("drivingTime")&&e.prototype.getJobFieldDrivingTime.call(i,o,r),i.onDataChange("near_job_click"),i.localStorage.setItem(l,i.nearbyJobsEntryForLocalStr)},function(t){e.prototype.handleError.call(i,""),e.prototype.hideLoader.call(i)})},t.prototype.getLocationData=function(){var t=this;this.subscriptions.push(this.eventAggregator.subscribe("GeoLocationDetails",function(e){r.logger.debug("payload location ::"+e),t.getJobsData(e)})),this.subscriptions.push(this.eventAggregator.subscribe("LocationError",function(i){r.logger.debug(i),t.permissionDenied=!0,e.prototype.handleError.call(t,"")})),this.geoLocationService.askForLocation()},t.prototype.onDataChange=function(t){e.prototype.onDataChange.call(this,t)},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable(),__metadata("design:type",Number)],t.prototype,"radius",void 0),__decorate([i.bindable(),__metadata("design:type",Number)],t.prototype,"jobsPerSlide",void 0),t=__decorate([i.customElement(l),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==r.CommonService&&r.CommonService)&&c||Object,n.NearByJobsService,"function"==typeof(p=void 0!==r.GeoLocationService&&r.GeoLocationService)&&p||Object,o.EventAggregator,"function"==typeof(d=void 0!==a.LocalStorageAPI&&a.LocalStorageAPI)&&d||Object])],t);var c,p,d}(r.PhenomJobWidget);t.NearByJobs=c}),define("text!v2/ph-near-by-jobs.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-profile-recommendations-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKeyProfile:"profileRecommendations",ddoKeyProfileLSID:"getLinkedInProfileRecom",ddoKeySocialProfile:"getSocialProviderProfile",ddoKeyBrowsing:"browserRecomContent",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyAdd:"addToCartV2",ddoKeyDelete:"deleteFromCartV2",ddoKeyStatusList:"getJobStatusListV2"}}}),define("v2/ph-profile-recommendations-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.recomContentReqObj={keywords:[],categories:[],jobsViewed:[],jobsApplied:null,locations:[],types:[],userProfile:null,landingPages:null,size:5},this.recomJobsReqObj={keywords:[],categories:[],jobsViewed:[],jobsApplied:null,locations:[],types:[],userProfile:null,landingPages:null}}return e}();t.ProfileRecommendationModel=i});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-profile-recommendations-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.commonService=e,this.isLoggedIn=!1}return e.prototype.getprofileContent=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.getProfile=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return(e||{})[t]})},e.prototype.getValidateJwtToken=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return(e||{})[t]})},e.prototype.getJobSatusList=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.getRecommendedTrackCtx=function(){var e=this.commonService,t=e.recommendationTrackingConfig,i=e.phenomAppManager,o=i.getCountry(),r=i.getLocale(),s="us"!=o,n={};for(var a in t)if(t.hasOwnProperty(a))if(Array.isArray(t[a]))t[a].forEach(function(t){var i=[],a=[o,r,t.storageKey].join("_");if(i[0]=e.localStorageAPI.getItem(a),s){var l=["us","en_us",t.storageKey].join("_");i[1]=e.localStorageAPI.getItem(l),i=i[0].concat(i[1])}else n[t.storageKey]=i[0]});else{var l=[],c=[o,r,t[a].storageKey].join("_");if(l[0]=e.localStorageAPI.getItem(c),s){var p=["us","en_us",t[a].storageKey].join("_");l[1]=e.localStorageAPI.getItem(p),l[0].concat(l[1])}else n[t[a].storageKey]=l[0]}return n},e.prototype.updateUser=function(e){var t=e||{},i=t.data||{};this.isLoggedIn=i.isValidToken||!1},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.ProfileRecommendationsService=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){
this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-profile-recommendations",["require","exports","aurelia-framework","ph-common","./ph-profile-recommendations-config","./ph-profile-recommendations-service","./ph-profile-recommendations-model","aurelia-event-aggregator"],function(e,t,i,o,r,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="v2",c="ddoKeyBrowsing",p="ph-profile-recommendations-"+l,d={Profile:"profile",Browsing:"browsing"},f="linkedInProfileObj",h="linkedin_recommended_job_click",u=function(e){function t(t,i,o,s,n,a,d){var u=e.call(this,t,i,p)||this;return u.commonService=i,u.contentService=o,u.urlManager=s,u.contentModel=n,u.eventAggregator=a,u.localStorage=d,u.profileOnly="1",u.jobTeaser=!1,u.jobCaption=!1,u.addMultiLingualRecom=!1,u.recomJobCategories=[],u.user={isLoggedIn:null,userId:"",userType:"",socialProvider:"",isSocialLogin:null,isSiteLogin:null},u.getBrowsingContent=function(t){e.prototype.unhideLoader.call(u);var i,o=u.contentModel.recomJobsReqObj;i=u.addMultiLingualRecom?u.contentService.getRecommendedTrackCtx():u.commonService.getRecommendedTrackCtx();for(var s in i)o[s]=i[s];t&&(o.userProfile=u.commonService.getSpecificTrackCtx(f)),u.contentService.getprofileContent(p,r.WidgetConfig[l][c],o).then(function(t){if(e.prototype.hideLoader.call(u),t){var i=t.jobRecommendations.data&&t.jobRecommendations.data.recommendedJobs;i&&0!=i.length?e.prototype.fetchJobStatus.call(u):(i=[],e.prototype.handleError.call(u,"")),u.jobResults=i,u.onDataChange(h)}},function(t){new Error(t),e.prototype.hideLoader.call(u),e.prototype.handleError.call(u,"")})},u.getJwtToken(),u}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.isLiV2Enabled=this.isLinkedinV2Enabled(),this.eventAggregator.subscribe("getUserProfileData",function(e){t.seemoretext=!0,t.maxDisplayCount=t.getShowMoreCount,t.getJwtToken()})},t.prototype.handleProfileView=function(e){switch(e){case d.Profile:this.isLiV2Enabled?this.getProfileContent("ddoKeyProfileLSID"):this.getProfileContent("ddoKeyProfile");break;case d.Browsing:this.getBrowsingContent()}},t.prototype.isLinkedinV2Enabled=function(){return!!this.isLiV2Enabled||this.commonService.getSiteSettings("isLiV2Enabled")||!1},t.prototype.getJwtToken=function(){var t=this,i={};this.contentService.getValidateJwtToken(p,r.WidgetConfig[l].ddoKeyValidateJwtToken,i).then(function(e){t.updateState(e),t.handlePage()},function(i){e.prototype.hideLoader.call(t),new Error(i)})},t.prototype.handlePage=function(){if("1"==this.profileOnly)if(this.user.isLoggedIn||this.user.isSocialLogin)this.handleProfileView(d.Profile);else{e.prototype.hideContainer.call(this);var t={};t.jobs=[],this.eventAggregator.publish("ph:profileRecomData",t)}else this.recommendationType=this.user.isLoggedIn?d.Profile:d.Browsing,this.handleProfileView(this.recommendationType)},t.prototype.getProfileContent=function(t){var i=this;e.prototype.unhideLoader.call(this),this.contentService.getprofileContent(p,r.WidgetConfig[l][t],{}).then(function(t){if(e.prototype.hideLoader.call(i),t=t.data){var o=t&&t.results;o&&o.length?(e.prototype.fetchJobStatus.call(i),e.prototype.showContainer.call(i)):(o=[],e.prototype.handleError.call(i,"")),i.jobResults=o,e.prototype.onDataChange.call(i),i.recomJobCategories=t.linkedInCategoryWidget;var r={};r.jobs=i.jobResults||[],r.categories=i.recomJobCategories||[],i.eventAggregator.publish("ph:profileRecomData",r)}},function(t){e.prototype.onError.call(i,""),e.prototype.hideLoader.call(i);var o={};o.jobs=[],i.eventAggregator.publish("ph:profileRecomData",o)})},t.prototype.onDataChange=function(t){var i=this;this.jobWidgetSettingsPromise.then(function(o){e.prototype.onDataChange.call(i,t)})},t.prototype.updateState=function(e){var t=e||{},i=t.data||{};this.user.isLoggedIn=i.isValidToken||!1,this.user.userId=i.userId||"",this.user.userType=i.userType||"",this.user.socialProvider=i.socialProvider||"",this.user.isSiteLogin=i.isSiteLogin||!1,this.user.isSocialLogin=i.isSocialLogin||!1},t.prototype.getLoacalePath=function(e){return e=e.split("_"),e="/"+e[1]+"/"+e[0]+"/"},t.prototype.getUrlWithLocale=function(t,i,o,r){t&&t.setAttribute&&t.setAttribute("ph-click-ctx",i),t&&t.getAttribute&&t.getAttribute("ph-tevent")&&(e.prototype.subscribeToTrackingEvents.call(this,t),t.setAttribute("ph-tref",(new Date).getTime()+(65536*(1+Math.random())|0).toString(16).substring(0)),t.setAttribute("ph-tag",e.prototype.tagName),this.commonService.storePageTrackEventData(t.getAttribute("ph-tref"),o));var s=this.getLoacalePath(o.locale),n=phApp.urlMap[i];if(n)return phApp.baseDomain+s+this.urlManager.getUrl(i,o,r,n)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"recommendationType",void 0),__decorate([i.bindable,__metadata("design:type",String)],t.prototype,"profileOnly",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"jobTeaser",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"jobCaption",void 0),__decorate([i.bindable,__metadata("design:type",Object)],t.prototype,"addMultiLingualRecom",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"isLiV2Enabled",void 0),t=__decorate([i.customElement(p),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(u=void 0!==o.CommonService&&o.CommonService)&&u||Object,s.ProfileRecommendationsService,"function"==typeof(g=void 0!==o.UrlManager&&o.UrlManager)&&g||Object,n.ProfileRecommendationModel,a.EventAggregator,"function"==typeof(m=void 0!==o.LocalStorageAPI&&o.LocalStorageAPI)&&m||Object])],t);var u,g,m}(o.PhenomJobWidget);t.ProfileRecommendations=u}),define("text!v2/ph-profile-recommendations.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-find-your-fit-container-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"uploadCvMergeFlow",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeySocialProfile:"mergedProfileV2",ddoKeyEagerLoad:"eagerLoadFyfSession",ddoKeyDeleteResume:"removeProfile",ddoKeyCiProfileUpdate:"ciProfileUpdate",ddoKeyLogout:"jwtLogout",ddoKeyStepConfig:"fyfConfig",ddoKeyFetchFitScore:"fetchFitScore",jobDetailDDOKey:"jobDetail",ddoKeyFitScoreSettings:"fitScoreSettings",ddoKeyRecentTitles:"fyfTitles",ddoKeySkills:"fyfSkills",ddoKeySkillSuggestions:"fyfSkillSuggestions",ddoKeyLocations:"fyfLocations",ddoKeyGetPiiConsentConfig:"getPiiConsentConfig",ddoKeyResumeTempResume:"removeTempResume"}}});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-find-your-fit-container-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e?e[t]:{}})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.FindYourFitContainerService=r});var __assign=this&&this.__assign||Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};define("v1/ph-resume-info-confirmation",["require","exports","./ph-find-your-fit-container-config"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,i){this.jobTitles={},this.workExperience={},this.preferredLocation={},this.skills={},this.experienceData=[{displayName:"0-3",min:0,max:3},{displayName:"4-8",min:4,max:8},{displayName:"9-14",min:9,max:14},{displayName:"15+",min:15,max:100}],this.fyf=e,this.elementTag=t,this.element=i,this.populateResumeData(this.fyf.profileData),this.populateStepData(this.fyf.stepData)}return e.prototype.populateResumeData=function(e){this.getResumeTitles(e),this.getResumeWorkExperience(e),this.getResumeSkills(e),this.getResumeLocations(e)},e.prototype.populateStepData=function(e){var t=this;e&&e.steps&&e.steps.forEach(function(e){t.fyf.resumeConformationSteps&&e.stepType&&t.fyf.resumeConformationSteps.includes(e.stepType)&&(t[e.stepType]=t[e.stepType]||{},t[e.stepType]=__assign({},t[e.stepType],e)),"recentTitle"==e.stepType&&(t.jobTitles=t.jobTitles||{},t.jobTitles=__assign({},t.jobTitles,e))})},e.prototype.getResumeTitles=function(e){var t=this;this.jobTitles={},this.jobTitles.selectedTitles=[],e&&e.jobTitles?e.jobTitles.forEach(function(e){t.pushData(t.jobTitles.selectedTitles,e)}):e&&e.experience&&e.experience.forEach(function(e){e&&e.jobTitle&&t.pushData(t.jobTitles.selectedTitles,e.jobTitle)})},e.prototype.getResumeWorkExperience=function(e){var t=this;if(this.workExperience={},e&&e.workExperience)this.experienceData.forEach(function(i){e.workExperience.displayName==i.displayName&&(t.workExperience.selectedExp=i)});else if(e&&e.experience){var i=0;e.experience.forEach(function(e){if(e&&e.startDate&&e.endDate){var o=t.getWorkDurationInMonths(e.startDate,e.endDate);o>0&&(i+=o)}}),i>0&&(i=Math.floor(i/12)||0,this.experienceData.forEach(function(e){i>=e.min&&i<=e.max&&(t.workExperience.selectedExp=e)}))}},e.prototype.getResumeSkills=function(e){var t=this;this.skills={},this.skills.selectedSkills=[],e.skills&&e.skills.forEach(function(e){t.pushData(t.skills.selectedSkills,e)}),this.fetchSuggestedSkills()},e.prototype.getResumeLocations=function(e){var t=this;this.preferredLocation={},this.preferredLocation.selectedLocations=[],this.preferredLocation.preferredLocations=[],e&&e.preferredLocation?e.preferredLocation.forEach(function(e){e.location_display&&-1==t.preferredLocation.selectedLocations.indexOf(e.location_display)&&(t.preferredLocation.preferredLocations.push(location),t.preferredLocation.selectedLocations.push(e.location_display))}):e&&e.experience&&e.experience.forEach(function(e){if(e&&e.location){var i={},o=t.getLocationName(e.location,!0),r=t.getLocationName(e.location);r&&o&&(i.location_display=o,i.standardlocation=r,i.latlong={},-1==t.preferredLocation.selectedLocations.indexOf(o)&&(t.preferredLocation.preferredLocations.push(i),t.preferredLocation.selectedLocations.push(o)))}})},e.prototype.getLocationName=function(e,t){var i="";return(e.city||e.state||e.country)&&(e.city&&(i+=this.toTitleCase(e.city)),e.state&&(i=i?i+","+(t?" ":""):i,i+=this.toTitleCase(e.state)),e.country&&(i=i?i+","+(t?" ":""):i,i+=this.toTitleCase(e.country))),i},e.prototype.toTitleCase=function(e){return e=e||"",e.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")},e.prototype.getWorkDurationInMonths=function(e,t){var i=0;try{var o=0,r=0;e.year&&t.year&&(o=parseInt(t.year)-parseInt(e.year)),e.month&&t.month&&(r=parseInt(t.month)-parseInt(e.month))<0&&(o--,r+=12),o>0&&(r+=12*o),i=r}catch(e){}return i},e.prototype.getJobTitles=function(){var e=this,t=this.jobTitles.value;if(t.length){var o={};return o.keywords=t,o.size=this.jobTitles&&this.jobTitles.size||10,this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,i.WidgetConfig.v1.ddoKeyRecentTitles,o).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?e.jobTitles.searchTitles=t.data.results:e.jobTitles.searchTitles=[],e.jobTitles.showDropDown=!0,setTimeout(function(){e.fyf.updateResults()},0),e.jobTitles.searchTitles},function(e){new Error(e)})}},e.prototype.fetchSkills=function(){var e=this,t=this.skills.value||"";if(t.length){var o={},r=this.skills.selectedSkills||[];return o.keywords=t,o.size=this.skills&&this.skills.size||10,o.addedSkills=r.length?r:[],this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,i.WidgetConfig.v1.ddoKeySkills,o).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?e.skills.skillsList=t.data.results:e.skills.skillsList=[],e.skills.showSkillsDropdown=!0,setTimeout(function(){e.fyf.updateResults()},0),e.skills.skillsList},function(e){new Error(e)})}},e.prototype.fetchSuggestedSkills=function(){var e=this,t={};t.titles=this.jobTitles.selectedTitles||[],t.categories=this.fyf.profileData&&this.fyf.profileData.categories||[],t.skills=this.skills.selectedSkills||[],t.size=7,this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,i.WidgetConfig.v1.ddoKeySkillSuggestions,t).then(function(t){t&&t.data&&t.data.results&&(e.skills=e.skills||{},e.skills.suggestedSkills=t.data.results)})},e.prototype.selectSuggestions=function(e,t){var i=this;if(this.skills.selectedSkills=this.skills.selectedSkills||[],-1==this.skills.selectedSkills.indexOf(e)){this.pushData(this.skills.selectedSkills,e,!0),this.pushData(this.skills.selected_skills,e);var o=e+" skill added";if(this.fyf.addSelectionRemovalSronly(o),1==this.skills.selectedSkills.length)this.fyf.focusElement(".ph-a11y-skills input",200);else{var r=this.element.querySelectorAll("#suggested-skills li");t<this.skills.suggestedSkills.length-1?r[t+1]&&r[t+1].firstElementChild&&setTimeout(function(){r[t+1].firstElementChild.focus()},200):r[t-1]&&r[t-1].firstElementChild&&setTimeout(function(){r[t-1].firstElementChild.focus()},200)}setTimeout(function(){i.skills.suggestedSkills.splice(t,1)},200)}},e.prototype.fetchLocations=function(){var e=this,t=this.preferredLocation.value||"";if(t.length){var o=this.preferredLocation&&this.preferredLocation.locationKey||"city",r=o.split(","),s={};return s.keywords=t,s.size=this.preferredLocation&&this.preferredLocation.size||10,this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,i.WidgetConfig.v1.ddoKeyLocations,s).then(function(t){return t&&t.data&&t.data.results&&t.data.results.length?(e.preferredLocation.locationsList=[],t.data.results.forEach(function(t,i){r.find(function(e){return e.trim()==t.type})&&e.preferredLocation.locationsList.push(t)})):e.preferredLocation.locationsList=[],e.preferredLocation.showLocationDropdown=!0,setTimeout(function(){e.fyf.updateResults()},0),e.preferredLocation.locationsList})}},e.prototype.pushData=function(e,t,i){if(e){var o=!1;e.forEach(function(e){e&&t&&e.trim().toLowerCase()==t.trim().toLowerCase()&&(o=!0)}),!o&&(i?e.unshift(t):e.push(t))}},e.prototype.getIndex=function(e,t){var i=-1;return e&&e.forEach(function(e,o){e.title==t&&(i=o)}),i},e.prototype.loadPreviousStep=function(){var e=this.fyf.activeStepIndex-2;this.fyf.resumeConformationSteps&&e>=0&&e<this.fyf.resumeConformationSteps.length&&this.fyf.changeActiveStep(this.fyf.resumeConformationSteps[e])},e.prototype.loadNextStep=function(){var e=this,t=this.getPayloadBasedOnStep();t&&Object.keys(t).length?(this.fyf.unhideLoader(),t.editType="mergeProfile",t.flowType="upload_resume",this.fyf.resumeInfoSaveError=!0,this.fyf.findYourFitContainerService.makeDDORequest(this.elementTag,i.WidgetConfig.v1.ddoKeyCiProfileUpdate,t).then(function(t){t&&"success"==t.status?e.next():e.fyf.resumeInfoSaveError=!0,e.fyf.hideLoader()},function(t){new Error(t),e.fyf.hideLoader()})):this.next()},e.prototype.next=function(){if(this.fyf.resumeConformationSteps&&this.fyf.activeStepIndex==this.fyf.resumeConformationSteps.length)this.fyf.closeResumeInfoPopup(!0);else{var e=this.fyf.activeStepIndex;this.fyf.resumeConformationSteps&&e>=0&&e<this.fyf.resumeConformationSteps.length&&this.fyf.changeActiveStep(this.fyf.resumeConformationSteps[e])}},e.prototype.getPayloadBasedOnStep=function(){var e={};return"jobTitles"==this.fyf.activeStep?(e.profile={},e.stepType="jobTitles",e.profile.jobTitles=this.jobTitles.selectedTitles||[]):"skills"==this.fyf.activeStep?(e.profile={},e.stepType="skills",e.profile.skills=this.skills.selectedSkills||[]):"workExperience"==this.fyf.activeStep?this.workExperience.selectedExp&&Object.keys(this.workExperience.selectedExp).length&&(e.profile={},e.stepType="workExperience",e.profile.workExperience=this.workExperience.selectedExp):"preferredLocation"==this.fyf.activeStep&&(e.profile={},e.stepType="preferredLocation",e.profile.preferredLocation=this.preferredLocation.preferredLocations||[]),e},e.prototype.getFieldOptions=function(e){var t="";switch(e){case"jobTitles":return t=this.jobTitles.value||"",t.length?this.getJobTitles():(this.jobTitles.searchTitles=[],[]);case"skills":return t=this.skills.value||"",t.length?this.fetchSkills():(this.skills.skillsList=[],[]);case"preferredLocation":return t=this.preferredLocation.value||"",t.length?this.fetchLocations():(this.preferredLocation.locationsList=[],this.preferredLocation.locationsList)}},e.prototype.getActiveIndex=function(e){var t=this,i=-1;switch(e){case"jobTitles":return i=this.getIndex(this.jobTitles.searchTitles,this.jobTitles.value),this.fyf.updateResults(),i;case"skills":return i=this.getIndex(this.skills.skillsList,this.skills.value),this.fyf.updateResults(),i;case"preferredLocation":return this.preferredLocation.locationsList&&this.preferredLocation.locationsList.forEach(function(e,o){e.location_display==t.preferredLocation.value&&(i=o)}),this.fyf.updateResults(),i}},e.prototype.setFieldValue=function(e,t){var i=this;switch(e){case"jobTitles":var o=this.jobTitles;if(o.value="",o.searchTitles.length&&o.searchTitles[t]){var r=o.searchTitles[t].title;o.searchTitles[t].isTitleSelected=!0,o.selectedTitles=o.selectedTitles||[],this.pushData(o.selectedTitles,r,!0),o.showDropDown=!1,o.selected_jobTitles=o.selected_jobTitles||[],this.pushData(o.selected_jobTitles,r);var s=r+" title added";this.fyf.addSelectionRemovalSronly(s)}else if(o.value&&-1==t){var n=!1;if(o.searchTitles.length)for(var a=0,l=o.searchTitles;a<l.length;a++){var c=l[a];c.title.toLowerCase()===o.value.toLowerCase()&&(c.isTitleSelected=!0,this.pushData(o.selectedTitles,o.value,!0),o.selected_jobTitles=o.selected_jobTitles||[],this.pushData(o.selected_jobTitles,o.value),n=!0)}var s=o.value+" title added";this.fyf.addSelectionRemovalSronly(s),n||(this.pushData(o.selectedTitles,o.value,!0),o.typed_jobTitles=o.typed_jobTitles||[],this.pushData(o.typed_jobTitles,o.value))}break;case"skills":var p=void 0;if(this.skills.skillsList.length&&this.skills.skillsList[t]){if(p=this.skills.skillsList[t].skill,this[e].value=this[e].skillsList[t].skill,this[e].selectedSkills&&-1==this[e].selectedSkills.indexOf(p.toLowerCase())){this[e].selectedSkills.unshift(p),this.skills.selected_skills=this.skills.selected_skills||[],this.skills.selected_skills.push(p);var s=p+" skill added";this.fyf.addSelectionRemovalSronly(s),setTimeout(function(){i.skills.value=""},150)}}else if(this[e].value.length&&-1==t){var d=this.skills.value,n=!1;if(this.skills.skillsList.length)for(var f=this.skills.skillsList,h=0,u=f;h<u.length;h++){var g=u[h];g.skill.toLowerCase()===d.toLowerCase()&&(this.skills.selected_skills=this.skills.selected_skills||[],this.skills.selected_skills.push(d),n=!0)}if(!n){var m=void 0;this.skills.selected_skills&&this.skills.selected_skills.length&&(this.skills.selected_skills=this.skills.selected_skills.map(function(e){return e.toLowerCase()}),-1!=this.skills.selected_skills.indexOf(d.toLowerCase())&&(m=!0)),m||(this.skills.typed_skills=this.skills.typed_skills||[],this.skills.typed_skills.push(d))}if(-1==this[e].selectedSkills.indexOf(d)){this[e].selectedSkills.unshift(d);var s=d+" skill added";this.fyf.addSelectionRemovalSronly(s),setTimeout(function(){i.skills.value=""},150)}var y=this.skills.suggestedSkills&&this.skills.suggestedSkills.findIndex(function(e){return e.skill.toLowerCase()==d.toLowerCase()});-1!=y&&this.skills.suggestedSkills&&this.skills.suggestedSkills.splice(y,1)}this.fetchSuggestedSkills(),this[e].showSkillsDropdown=!1;break;case"preferredLocation":if(this.preferredLocation.locationsList.length&&this.preferredLocation.locationsList[t]){var v=this.preferredLocation.locationsList[t];this.populateSelectedData(e,v)}}},e.prototype.populateSelectedData=function(e,t){switch(e){case"preferredLocation":var i={},o=this.preferredLocation.selectedLocations||[];if(-1==o.indexOf(t.location_display)){i.standardlocation=t.standardlocation||"",i.location_display=t.location_display||"",i.latlong=t.latlong||{},this.preferredLocation.preferredLocations=this.preferredLocation.preferredLocations||[],this.preferredLocation.preferredLocations.unshift(i);var r=t.location_display+"location added";this.fyf.addSelectionRemovalSronly(r),this.preferredLocation.selectedLocations=this.preferredLocation.selectedLocations||[],this.preferredLocation.selectedLocations.unshift(t.location_display),t.isLocationSelected=!0}else{var s=o.indexOf(t.location_display);this.preferredLocation.preferredLocations[s]=t}this.preferredLocation.value="",this.preferredLocation.showLocationDropdown=!1}},e.prototype.removeSelectedData=function(e,t){var i=this;switch(e){case"jobTitles":var o=this.jobTitles.selectedTitles[t]+" title removed";if(this.fyf.addSelectionRemovalSronly(o),1==this.jobTitles.selectedTitles.length)this.fyf.focusElement(".ph-a11y-job-title input",200);else{var r=this.element.querySelectorAll("#selected-titles li");t<this.jobTitles.selectedTitles.length-1?r[t+1].firstElementChild&&setTimeout(function(){r[t+1].firstElementChild.focus()},200):r[t-1].firstElementChild&&setTimeout(function(){r[t-1].firstElementChild.focus()},200)}var s=this.jobTitles.searchTitles&&this.jobTitles.searchTitles.findIndex(function(e){return e.title&&e.title.trim().toLowerCase()==i.jobTitles.selectedTitles[t]&&i.jobTitles.selectedTitles[t].trim().toLowerCase()});if(setTimeout(function(){i.jobTitles.selectedTitles.splice(t,1)},200),-1!=s&&this.jobTitles.searchTitles&&(this.jobTitles.searchTitles[s].isTitleSelected=!1),this.jobTitles.selected_jobTitles&&this.jobTitles.selected_jobTitles.length){var n=this.jobTitles.selected_jobTitles.findIndex(function(e){return e==i.jobTitles.selectedTitles[t]});-1!=n&&this.jobTitles.selected_jobTitles.splice(n,1)}if(this.jobTitles.typed_jobTitles&&this.jobTitles.typed_jobTitles.length){var n=this.jobTitles.typed_jobTitles.findIndex(function(e){return e==i.jobTitles.selectedTitles[t]});-1!=n&&this.jobTitles.typed_jobTitles.splice(n,1)}break;case"skills":var a=this.skills.skillsList&&this.skills.skillsList.findIndex(function(e){return e.skill==i.skills.selectedSkills[t]});-1!=a&&this.skills.skillsList&&(this.skills.skillsList[a].isSkillSelected=!1);var l=this.skills.selectedSkills[t]+" skill removed";if(this.fyf.addSelectionRemovalSronly(l),1==this.skills.selectedSkills.length)this.fyf.focusElement(".ph-a11y-skills input",200);else{var c=this.element.querySelectorAll("#selected-skills li");t<this.skills.selectedSkills.length-1?c[t+1].firstElementChild&&setTimeout(function(){c[t+1].firstElementChild.focus()},200):c[t-1].firstElementChild&&setTimeout(function(){c[t-1].firstElementChild.focus()},200)}if(setTimeout(function(){i.skills.selectedSkills.splice(t,1)},200),this.skills.selected_skills&&this.skills.selected_skills.length){var p=this.skills.selected_skills.findIndex(function(e){return e==i.skills.selectedSkills[t]});-1!=p&&this.skills.selected_skills.splice(p,1)}if(this.skills.typed_skills&&this.skills.typed_skills.length){var p=this.skills.typed_skills.findIndex(function(e){return e==i.skills.selectedSkills[t]});-1!=p&&this.skills.typed_skills.splice(p,1)}break;case"preferredLocation":var d=this.preferredLocation.selectedLocations[t]+" location removed";if(this.fyf.addSelectionRemovalSronly(d),1==this.preferredLocation.selectedLocations.length)this.fyf.focusElement(".preferred-location-block input",200);else{var f=this.element.querySelectorAll("#selected-locations li");t<this.preferredLocation.selectedLocations.length-1?f[t+1].firstElementChild&&setTimeout(function(){f[t+1].firstElementChild.focus()},200):f[t-1].firstElementChild&&setTimeout(function(){f[t-1].firstElementChild.focus()},200)}var h=this.preferredLocation.locationsList&&this.preferredLocation.locationsList.findIndex(function(e){return e.location_display==i.preferredLocation.selectedLocations[t]});setTimeout(function(){i.preferredLocation.preferredLocations.splice(t,1),i.preferredLocation.selectedLocations.splice(t,1)},200),-1!=h&&this.preferredLocation.locationsList&&(this.preferredLocation.locationsList[h].isLocationSelected=!1)}},e}();t.ResumeInfoConfirmation=o});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-find-your-fit-container",["require","exports","aurelia-framework","ph-common","./ph-find-your-fit-container-config","./ph-find-your-fit-container-service","aurelia-event-aggregator","./ph-resume-info-confirmation"],function(e,t,i,o,r,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="ph-find-your-fit-container-v1",c="edit_profile_information",p="resume_upload_click",d="upload_new_file_click",f="getUserProfileData",h={upload_resume_flow:"upload_resume",find_your_fit:"find_your_fit",candidate_profile:"candidateProfile"},u="fyf_options_closed",g={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8},m=["categories","subcategories","preferredLocation","skills","recentTitle","workExperience"],y=["jobTitles","skills","workExperience","preferredLocation"],v=function(e){function t(t,i,o,r,s){var n=e.call(this,t,i,l)||this;return n.element=t,n.commonService=i,n.findYourFitContainerService=o,n.eventAggregator=r,n.localStorage=s,n.fileCtx={},n.isDialogOpen=!1,n.isLoggedIn=!1,n.isAnonymous=!1,n.isSiteLogin=!1,n.resumeData={},n.profileData={},n.currentStep="chooseStep",n.isDropdownOpen=!1,n.uploadResumeStatus=!0,n.mergeRequired=!1,n.isActiveSession=!1,n.isFyfEnabled=!1,n.fyfInfoData={},n.resumeUploadFlow=!1,n.isDeleteResume=!1,n.isSocialLogin=!1,n.contactDetails={},n.contactDetailsErrorObj={},n.isContactDetailsConfigured=!1,n.contactDetailsPopup=!1,n.contactDetailsFailure=!1,n.contactDetailsFirstTime=!1,n.isOptInChoosen=!1,n.isProfileJobsAvailable=void 0,n.isFileSupported=!1,n.stepsData={},n.fyfSocialOptions={},n.isProfileSyncUpdateFirstTime=!1,n.disableUploadResumeFlow=!1,n.disableSocialLogin=!1,n.trackingLocally=!0,n.subscriptions=[],n.isCandidateHomeEnabled=!1,n.candidatePopupData={},n.candidateLoginPopup=!1,n.isProfileDataExists=!1,n.userState="",n.showMatchScoreButton=!1,n.jobFits={},n.enabledFits={},n.jobSeqNo="",n.fitLevel=void 0,n.fitData={},n.showFitData=!1,n.jobFitsSettConfig={},n.isJobFitEnabled=!1,n.uploadSronly=!1,n.uploadingSronly=!1,n.gdprConsent=!1,n.savePersonalInfo=!1,n.userConsentPopup=!1,n.acceptTerms=!1,n.termsError=!1,n.avoidBackDropFirstTime=!0,n.chooseSteps=!1,n.hideUserConsentCheckbox=!1,n.limitExceeded=!0,n.maxFileSize=2,n.resumeInfoConfirmation=!1,n.resumeInfoPopup=!1,n.activeStep="",n.activeStepIndex=0,n.resumeConformationSteps=[],n.previousActiveStep="",n.resultUpdated=!1,n.selectionRemovalSrText="",n.selectionRemovalSronly=!1,n.resumeInfoSaveError=!1,n.piiConsentError=!1,n.isDisabled=!1,n.consentPrefill=!0,n.preferredName=!1,n.uniformGdpr=!1,n.tempFullName="",n.gdprPreCheck=!1,n.handleDropdownOutsideScope=function(){var e=n.handleOutsideScopeEvents(event,"action-area");void 0!=e&&(n.isDropdownOpen=e)},n.closePopup=function(t){var i={widgetTag:l},o=n.profileData&&n.profileData.resumeName&&n.profileData.resumeName.split(".").pop();if(o&&(i.fileType=o),e.prototype.trackWidgetClick.call(n,c,i),n.isDialogOpen=!1,"uploadResume"==n.currentStep&&e.prototype.trackWidgetClick.call(n,u,{}),"find_your_fit"==t&&(n.isUserLoggedIn(),n.flowType=t,e.prototype.trackWidgetClick.call(n,u,{})),n.element.removeEventListener("keyup",n.handleEscape),n.contactDetailsPopup&&n.isAnonymous)return n.isCandidateHomeEnabled&&n.triggerSignUpPopup(!0),!n.isCandidateHomeEnabled&&!n.disableSocialLogin&&n.showSocialLoginPopup(),n.contactDetailsPopup=!1,void(n.contactDetailsFirstTime=!1);if(!n.uploadResumeStatus)return n.uploadResumeStatus=!0,n.isFileSupported=!1,e.prototype.closeDialogPopup.call(n),void(!n.isLoggedIn&&n.element.querySelector(".ph-popup-area")&&(n.currentStep="uploadResume",n.handleDialogModal()));n.destroyEventListeners(),n.currentStep="chooseStep";var r=n.element.querySelector(".user-profile-info");r&&r.removeAttribute("aria-hidden"),e.prototype.focusElement.call(n,".ph-a11y-start-btn",250),n.candidateLoginPopup&&(e.prototype.focusElement.call(n,".candidateHomeSignUp",100),n.candidateLoginPopup=!1),n.contactDetailsPopup=!1,n.isDropdownOpen=!1,n.isDeleteResume=!1,n.isFyfEnabled=!1,e.prototype.closeDialogPopup.call(n)},n.handleEscape=function(e){"Escape"!=e.key&&27!==e.keyCode&&27!==e.which||(n.resumeInfoPopup?n.closeResumeInfoPopup():n.userConsentPopup?n.closeUserConsentPopup():n.closePopup())},n.handleFileUploadStaus=function(t){e.prototype.unhideLoader.call(n),n.uploadResumeStatus||e.prototype.closeDialogPopup.call(n),"uploadResume"==n.currentStep&&n.element.querySelector(".ph-popup-area")&&(n.currentStep=""),n.uploadResumeStatus=!0,n.isFileSupported=!1,n.limitExceeded=!1,n.isDropdownOpen=!1,t&&"addedfile"==t.status&&"uploadResume"==n.currentStep?(n.handleUploadingSronly(),e.prototype.trackWidgetClick.call(n,p,{})):t&&"addedfile"==t.status&&(n.handleUploadingSronly(),e.prototype.trackWidgetClick.call(n,d,{})),t&&"success"==t.status&&t.data&&t.data.res?(n.resumeData=t.data,n.mergeRequired=!1,n.gdprConsent?n.triggerUserConsentPopup():(n.getCvMergeData(),n.destroyEventListeners(),n.getFlowType(h.upload_resume_flow))):(t&&"error"==t.status||"canceled"==t.status)&&(e.prototype.hideLoader.call(n),t.data&&"unsupported"==t.data.type&&(n.isFileSupported=!0),t.data&&"exceeds"==t.data.type&&(n.limitExceeded=!0),n.popupToShowUploadFailed())},n.closeDropDown=function(e,t){return"Enter"==e.key||13===e.keyCode||13===e.which?void(n.isDropdownOpen=!1):"keyup"==e.type||"focus"==e.type?(n.isDropdownOpen=!0,void clearTimeout(n.sortByTimer)):void(t?n.isDropdownOpen=!0:(n.sortByTimer&&clearTimeout(n.sortByTimer),n.sortByTimer=setTimeout(function(){n.isDropdownOpen&&(n.isDropdownOpen=!1)},250)))},n.handleOutsideScopeEvents=function(e,t){var i,o,r=e.target,s=!1;if(e.keyCode===g.RETURN||e.keyCode==g.TAB||void 0==e.keyCode)for(;r;)if(r=r.parentElement,
!(o=r&&r.className)||o.constructor!=Array&&o.constructor!=String)r||(s=!0);else if(null==r||-1==o.indexOf(t))s=!0;else if(o.indexOf(t)>=0){s=!1;break}return(s||e.keyCode==g.ESC)&&(i=!1),i},n.destroyEventListeners=function(){var e=n.element.querySelector(".ph-a11y-after-close-focus-elem");e&&e.removeEventListener("click",n.closePopup,!0),document.removeEventListener("keyup",n.handleDropdownOutsideScope,!0)},n.handleProfileUpdateSyncFromBot=function(e){var t=e&&e.detail;n.isProfileSyncUpdateFirstTime||n.isLoggedIn||"contactInfo"==t.stepType||(n.flowType=h.find_your_fit,n.isProfileSyncUpdateFirstTime=!0,n.handleFyfStepFlow({context:h.find_your_fit,isLastStep:!0})),t&&"contactInfo"==t.stepType?n.isUserLoggedIn():(n.eventAggregator.publish(f,{context:"profile_Recom_jobs"}),n.commonService.raiseCustomEvent(f,{context:"profile_Recom_jobs"})),n.isLoggedIn||(n.isProfileSyncUpdateFirstTime=!1)},n}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.unhideLoader.call(this),this.preferredName=this.commonService.getSiteSettings("preferredName"),this.subscribeToEventForExternalDepends(),this.getPiiConsentData();var i=this.commonService.getCachedDDO(r.WidgetConfig.v1.jobDetailDDOKey,l);i&&i.data&&i.data.job&&i.data.job.jobSeqNo&&(this.jobSeqNo=i.data.job.jobSeqNo),0==this.commonService.getSiteSettings("consentPrefill")&&(this.consentPrefill=!1),this.subscriptions.push(this.eventAggregator.subscribe(f,this.handleRecomJobsEvent.bind(this))),document.addEventListener(f,this.handleRecomJobsEvent.bind(this)),this.subscriptions.push(this.eventAggregator.subscribe("ph:profileRecomData",this.handleRecomData.bind(this))),document.addEventListener("ph:profileRecomData",this.handleRecomData.bind(this));var o=this.commonService.getSiteSettings("navItems");this.isCandidateHomeEnabled=o&&o.candidateHome,this.subscriptions.push(this.eventAggregator.subscribe("ph:candidateLoggedinEvent",this.handleCandidateLoginEvent.bind(this))),document.addEventListener("ph:candidateLoggedinEvent",this.handleCandidateLoginEvent.bind(this)),this.flowType=this.commonService.getSessionParam("flowType"),this.maxFileSize=this.getResumeFileSize()||2,this.fileCtx={uploadUrl:"/fileCommonUpload",allowedFormats:".doc, .docx, .pdf, .txt",previewTemplate:"",dk:"fileUpload",funRef:this.handleFileUploadStaus,funRefForClose:this.closeDropDown,maxFiles:1,maxFileSize:this.maxFileSize},this.isUserLoggedIn().then(function(e){t.avoidBackDropFirstTime=!1;var i=t.localStorage.getItem("fyfStepLandInfo");i&&(i.success||!i.success&&!t.isSocialLogin)?t.handleFindYourFit():i&&t.localStorage.removeItem("fyfStepLandInfo")}),document.addEventListener("mouseup",this.handleDropdownOutsideScope,!0),document.addEventListener("keyup",this.handleDropdownOutsideScope,!0),this.isOptInChoosen=e.prototype.getQueryParam.call(this,"optIn")||!1,this.fyfInfoData.isOptInChoosen=this.isOptInChoosen,this.isOptinChanged();var s=this.element.getAttribute("fyf-steps");s&&(this.stepsData=JSON.parse(s),this.fetchingFyfRootKeyValues(this.stepsData)),this.fetchFyfConfiguration(s),this.trackingLocally=!0;var n=e.prototype.getQueryParam.call(this,"pxState");this.userState=n||this.commonService.getSegmentedUserState&&this.commonService.getSegmentedUserState(),this.userState&&setTimeout(function(){t.handleDoubleContextIssue()},50)},t.prototype.handleDoubleContextIssue=function(){var e=this.element.querySelectorAll(".upload-resume-tile-container .resume-info .phs-heading");if(e.length>1){var t=e[0].querySelector("ppc-content"),i=t&&t.getAttribute("key"),o=e[1].querySelector("ppc-content"),r=o&&o.getAttribute("key");i&&r&&i===r&&e[0].classList.add("hide")}},t.prototype.getPiiConsentData=function(){var e=this,t=r.WidgetConfig.v1.ddoKeyGetPiiConsentConfig;this.findYourFitContainerService.makeDDORequest(l,t).then(function(i){if(i&&i.status&&"success"==i.status&&i.data)window.phApp&&window.phApp.ddo&&(window.phApp.ddo[t]=i),e.piiConsentData=i.data;else{var o=e.commonService.getSiteSettings("piiConsentConfig");o&&(e.piiConsentData=JSON.parse(JSON.stringify(o)))}e.piiConsentData&&e.piiConsentData.length&&(e.gdprConsent=!0)})},t.prototype.fetchFyfConfiguration=function(e){var t=this;this.findYourFitContainerService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyStepConfig,{}).then(function(i){i&&i.data&&(e||(t.stepsData=i.data,t.fetchingFyfRootKeyValues(i.data)))})},t.prototype.fetchFitScoreConfig=function(){var e=this,t=this.commonService.getSiteSettings("jobWidgetFits")||{};if(this.jobFits=t.widgets&&t.widgets[l]&&t.widgets[l].jobFits||t.jobFits||{},this.jobFitsSettConfig=t.settings||{},this.getJobFits(),this.jobFits&&this.jobFits.fits&&this.jobFits.fits.length)return new Promise(function(e,t){e({})});var i={},o={},s=void 0;return this.findYourFitContainerService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyFitScoreSettings,{avoidWidgetHideOnFail:!0}).then(function(t){i=t,i&&i.data&&(e.jobFitsSettConfig=i.data.settings||{},i.data.widgets&&i.data.widgets[l]&&(o=i.data.widgets[l],s=o.jobFits),e.jobFits=s||i.data.jobFits||{}),e.getJobFits()})},t.prototype.getJobFits=function(){var e=this;if(!this.jobFits||!this.jobFits.fits||!this.jobFits.fits.length){var t=this.commonService.getSiteSettings("jobWidgetFits")||{};this.jobFits=t.widgets&&t.widgets[l]&&t.widgets[l]||t||{}}this.jobFits.fits=this.jobFits.fits||[],this.jobFits.fits.forEach(function(t){e.enabledFits[t.display_name]=t}),this.jobFits.fits.length&&(this.showMatchScoreButton=!0,this.isJobFitEnabled=!0,this.getFitData())},t.prototype.getFitData=function(){var e=this,t={jobIdentifierList:[],outputFields:[],size:1};this.jobSeqNo&&t.jobIdentifierList.push(this.jobSeqNo),this.jobFits&&this.jobFits.fits.length?(this.jobFits&&this.jobFits.settings&&this.jobFits.settings.requiredFields&&this.jobFits.settings.requiredFields.length&&this.jobFits.settings.requiredFields.forEach(function(e){t.outputFields.push(e)}),this.findYourFitContainerService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyFetchFitScore,t).then(function(t){if(e.showFitData=!0,t&&t.data&&t.data.jobFitScores){var i=t.data.jobFitScores;e.fitData=i[e.jobSeqNo],e.fitLevel=e.fitData&&e.fitData.fitLevel}})):this.showFitData=!0},t.prototype.fetchingFyfRootKeyValues=function(e){var t=this;if(this.stepsData.socialOptions&&"string"==typeof this.stepsData.socialOptions)try{this.stepsData.socialOptions=JSON.parse(this.stepsData.socialOptions)}catch(e){}this.fyfSocialOptions.socialOptions=e.socialOptions?e.socialOptions:"",this.disableUploadResumeFlow=!(!e.disableUploadResumeFlow||"true"!=e.disableUploadResumeFlow),this.disableSocialLogin=!(!e.disableSocialLogin||"true"!=e.disableSocialLogin),this.gdprConsent=!(!e.gdprConsent||"true"!=e.gdprConsent),e.gdprConsent&&"true"==e.gdprConsent?this.gdprConsent=!0:e.gdprConsent&&"partial"==e.gdprConsent?(this.gdprConsent=!0,this.savePersonalInfo=!0,this.hideUserConsentCheckbox=!0):e.gdprConsent&&"uniform"==e.gdprConsent?(this.gdprConsent=!0,this.uniformGdpr=!0):e.gdprConsent&&"precheck"==e.gdprConsent?(this.gdprConsent=!0,this.acceptTerms=!0,this.gdprPreCheck=!0):this.gdprConsent=!1,this.resumeInfoConfirmation=!(!e.resumeInfoConfirmation||"true"!=e.resumeInfoConfirmation),this.resumeInfoConfirmation&&(this.gdprConsent=this.gdprConsent||!0,this.stepsData.steps&&(this.resumeConformationSteps=this.resumeConformationSteps||[],this.stepsData.steps.forEach(function(e){e.stepType&&(y.includes(e.stepType)||"recentTitle"==e.stepType)&&(t.resumeConformationSteps.includes(e.stepType)||"recentTitle"!=e.stepType?t.resumeConformationSteps.push(e.stepType):t.resumeConformationSteps.push("jobTitles"))})))},t.prototype.handleFyfStepFlow=function(t,i){var o=this;this.flowType=t.context,this.isFyfEnabled=!1,this.isDropdownOpen=!1;var r;i?this.isUserLoggedIn().then(function(){o.currentStep="chooseStep","fyf"!=i&&"fyf_container"!=i||(r=".ph-a11y-after-close-focus-elem",e.prototype.focusElement.call(o,r,500))}):this.isUserLoggedIn(t)},t.prototype.isOptinChanged=function(){this.fyfInfoData.isOptInChoosen=this.isOptInChoosen},t.prototype.isUserLoggedIn=function(t){var i=this;return this.findYourFitContainerService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyValidateJwtToken,{}).then(function(o){if(o.data&&o.data.isValidToken){i.jobSeqNo&&i.fetchFitScoreConfig();var r=o.data.isValidToken;i.isAnonymous=o.data.isAnonymous,r&&!i.isAnonymous&&i.isCandidateHomeEnabled&&(i.getFlowType("candidateProfile"),i.flowType="candidateProfile"),i.isActiveSession=o.data.isActiveSession,i.isSocialLogin=o.data.isSocialLogin,i.isSiteLogin=o.data.isSiteLogin,i.getProfileData(r,t),i.resumeUploadFlow&&i.eventAggregator.publish(f,{context:"upload_resume"}),i.commonService.raiseCustomEvent(f,{context:"upload_resume"})}else i.isOptInChoosen=!1,t&&i.handleFyfStepState(t),e.prototype.hideLoader.call(i);return o},function(t){new Error(t),e.prototype.hideLoader.call(i)})},t.prototype.handleFyfStepState=function(t){if(t.isFirstStep&&"Start"==t.isFirstStep&&!this.disableUploadResumeFlow)this.chooseUploadOrQuest();else{this.currentStep="chooseStep";var i=this.isLoggedIn?".ph-a11y-after-close-focus-elem":".ph-a11y-start-btn";e.prototype.focusElement.call(this,i,50)}"chooseStep"!=this.currentStep&&this.element.querySelector(".ph-popup-area")||(this.isDialogOpen=!1,e.prototype.closeDialogPopup.call(this))},t.prototype.checkIfProfileDataExits=function(e){var t=this;this.isProfileDataExists=!1,m.forEach(function(i){"workExperience"==i?e[i]&&Object.keys(e[i]).length&&(t.isProfileDataExists=!0):e[i]&&e[i].length&&(t.isProfileDataExists=!0)})},t.prototype.getProfileData=function(t,i){var o=this;e.prototype.unhideLoader.call(this),this.findYourFitContainerService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeySocialProfile,{}).then(function(r){r&&o.populateProfileData(r,t),o.checkForEmail(),i&&o.handleFyfStepState(i),o.resumeUploadFlow&&(o.gdprConsent&&(o.savePersonalInfo||o.uniformGdpr)||!o.gdprConsent)?o.resumeInfoConfirmation?o.handleResumeInfoFlow():o.handleAfterUploadFlow():o.resumeInfoConfirmation&&o.resumeUploadFlow?o.handleResumeInfoFlow(!0):(o.resumeUploadFlow=!1,o.contactDetailsPopup=!1,o.isDropdownOpen=!1,o.isDeleteResume=!1,!o.isLoggedIn&&(o.isFyfEnabled=!1)),e.prototype.hideLoader.call(o)},function(t){new Error(t),e.prototype.hideLoader.call(o)})},t.prototype.handleResumeInfoFlow=function(e){this.populateContactDetails(!0);var t="contactDetails";e&&(t=this.resumeConformationSteps[0]),t?(this.resumeInfo=new a.ResumeInfoConfirmation(this,l,this.element),this.triggerResumeInfoPopup(t)):this.handleResumeFlowAfterSubmit(),this.resumeUploadFlow=!1,this.contactDetailsPopup=!1,this.isDropdownOpen=!1},t.prototype.populateContactDetails=function(e){this.contactDetails=e?{}:this.contactDetails||{},Object.keys(this.contactDetails).length||(this.profileData.firstName&&(this.contactDetails.name=this.profileData.firstName+(this.profileData.lastName?" "+this.profileData.lastName:""),this.tempFullName=this.contactDetails.name),this.preferredName&&this.profileData.preferredName&&(this.contactDetails.preferredName=this.profileData.preferredName),this.profileData.email&&(this.contactDetails.email=this.profileData.email),this.profileData.phones&&this.profileData.phones.length&&(this.contactDetails.phone=this.profileData.phones[0].phoneNumber?this.profileData.phones[0].phoneNumber:""))},t.prototype.checkForEmail=function(){this.profileData.email&&this.profileData.email.length||(this.isContactDetailsConfigured=!0,this.contactDetailsErrorObj.phone={},this.contactDetailsErrorObj.phone.validField=!1,this.contactDetailsErrorObj.email={},this.contactDetailsErrorObj.email.validField=!1,this.profileData.phones&&this.profileData.phones.length&&(this.contactDetails.phone=this.profileData.phones[0].phoneNumber?this.profileData.phones[0].phoneNumber:"",this.phoneFieldValidation()),this.profileData.firstName&&(this.contactDetails.name=this.profileData.firstName,this.nameFieldValidation()))},t.prototype.populateProfileData=function(e,t){this.profileData=e,this.isContactDetailsConfigured=!1,this.contactDetails={},this.flowType=this.flowType||this.profileData.flowType,t&&this.isSiteLogin&&!this.profileData.flowType?this.isLoggedIn=!1:this.isLoggedIn=t,this.isSocialLogin&&!this.flowType&&(this.flowType="find_your_fit"),this.socialProvider=e.socialProvider,this.checkIfProfileDataExits(this.profileData),this.profileData&&this.profileData.privacyConsent&&(this.acceptTerms=!0),this.isLoggedIn&&this.profileData.optIn&&this.gdprConsent&&(this.savePersonalInfo=!0),this.piiConsentData&&this.piiConsentData.length&&this.consentPrefill&&this.piiConsentData.forEach(function(t){e&&e[t.type]&&(t.isChecked=!0)}),this.profileData.consentProfile&&(this.isLoggedIn=!1)},t.prototype.handleAfterUploadFlow=function(){var e=this;this.profileData.email&&this.profileData.email.length?this.isCandidateHomeEnabled?this.triggerSignUpPopup(!0):this.showSocialLoginPopup():(this.currentStep="",this.contactDetailsPopup=!0,this.showSuccessPopup(),setTimeout(function(){var t=e.element.querySelector(".ph-a11y-form-control-config-phone");t&&e.contactDetails.phone&&(t.value=e.contactDetails.phone)},100)),this.contactDetailsFirstTime=!0,this.resumeUploadFlow=!1},t.prototype.handleUploadingSronly=function(){var e=this;this.uploadingSronly=!0,setTimeout(function(){e.uploadingSronly=!1},1e3)},t.prototype.getCvMergeData=function(){var t=this,i={};this.resumeData&&this.resumeData.res&&"success"==this.resumeData.res.status&&this.resumeData.res.profile?(e.prototype.unhideLoader.call(this),i.profile=this.resumeData.res.profile,i.flowType=h.upload_resume_flow,this.gdprConsent&&!this.uniformGdpr&&(i.ignorePsInfo=!this.savePersonalInfo),this.profileData.profile||(this.profileData.profile={}),this.profileData.profile.hasOwnProperty("optIn")||this.gdprConsent||(i.profile.optIn=this.isOptInChoosen,this.profileData.profile.optIn=this.isOptInChoosen),!this.gdprConsent||this.piiConsentData&&this.piiConsentData.length||(i.profile.optIn=this.savePersonalInfo,i.profile.privacyConsent=this.acceptTerms),this.piiConsentData&&this.piiConsentData.length&&!this.piiConsentError&&(delete i.ignorePsInfo,this.savePersonalInfo=!0),this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(e){e.type&&(i.profile[e.type]=!!e.isChecked)}),this.findYourFitContainerService.makeDDORequest(l,r.WidgetConfig.v1.ddoKey,i).then(function(i){i&&"success"==i.status?(i.flowType&&(t.flowType=i.flowType),i.data&&i.data.merge?(t.mergeRequired=i.data.merge,e.prototype.hideLoader.call(t)):(t.isUserLoggedIn(),t.resumeUploadFlow=!0),t.uploadSronly=!0,setTimeout(function(){t.uploadSronly=!1},1e3)):(t.popupToShowUploadFailed(),e.prototype.hideLoader.call(t))},function(i){new Error(i),e.prototype.hideLoader.call(t)})):this.popupToShowUploadFailed()},t.prototype.handleDialogModal=function(){this.isDialogOpen=!0,this.addModalPopup(".ph-a11y-after-close-focus-elem",".ph-a11y-popup-start-focus")},t.prototype.showSuccessPopup=function(){var e=this.element.querySelector(".user-profile-info");e&&e.setAttribute("aria-hidden","true"),this.handleDialogModal()},t.prototype.addModalPopup=function(t,i){var o=this;setTimeout(function(){var r="string"==typeof t?o.element.querySelector(t):t,s="string"==typeof i?o.element.querySelector(i):i;o.element.addEventListener("keyup",o.handleEscape),e.prototype.openDialogPopup.call(o,"ph-a11y-modal-area",r,s,void 0,void 0,!0,!0)},0)},t.prototype.popupToShowUploadFailed=function(){this.uploadResumeStatus=!1,this.handleDialogModal()},t.prototype.toggleDropDown=function(){this.isDropdownOpen=!this.isDropdownOpen},t.prototype.handleFindYourFit=function(t){var i=this;if(this.destroyEventListeners(),this.isFyfEnabled=!0,this.currentStep="",this.getFlowType(h.find_your_fit),setTimeout(function(){i.element.querySelector(".ph-popup-area")&&(i.handleDialogModal(),i.fyfInfoData.stepPosition="0")},250),t&&"editProfile"==t){var o={widgetTag:"ph-find-your-fit-v1"};e.prototype.trackWidgetClick.call(this,c,o)}else t&&"profileQues"==t&&e.prototype.trackWidgetClick.call(this,"profile_questions_click",{})},t.prototype.chooseUploadOrQuest=function(t){var i=this;this.disableUploadResumeFlow?this.handleFindYourFit("profileQues"):(this.currentStep="uploadResume",t&&this.element.querySelector(".ph-popup-area")?this.handleDialogModal():(this.chooseSteps=!0,setTimeout(function(){i.chooseSteps=!1},2e3)),"event"!=t&&"popup"!=t||e.prototype.trackWidgetClick.call(this,"create_profile_click",{}),e.prototype.focusElement.call(this,".ph-a11y-after-close-focus-elem",300))},t.prototype.getFlowType=function(e){var t={};t.flowType=e,this.commonService.getDDO(l,r.WidgetConfig.v1.ddoKeyEagerLoad,t).then(function(e){})},t.prototype.openDeletePopup=function(){this.isDeleteResume=!0,this.isDropdownOpen=!1,this.handleDialogModal()},t.prototype.deleteResume=function(){var t=this;e.prototype.unhideLoader.call(this),this.findYourFitContainerService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyDeleteResume,{}).then(function(i){if(i&&"success"==i.status){e.prototype.trackWidgetClick.call(t,"resume_remove_click",{}),t.currentStep="chooseStep",t.isDialogOpen=!1,t.isDeleteResume=!1,t.isLoggedIn=!1,t.isAnonymous=!1,t.isActiveSession=!1,t.resumeData={},t.isProfileJobsAvailable=!1,t.isOptInChoosen=!1,e.prototype.focusElement.call(t,".ph-a11y-start-btn",100),setTimeout(function(){e.prototype.closeDialogPopup.call(t)},100);var o={};o.jobs=[],o.categories=[],t.eventAggregator.publish(f,o),t.commonService.raiseCustomEvent(f,o),t.jobSeqNo&&t.isJobFitEnabled&&(t.showMatchScoreButton=!0),t.showFitData=!1,t.raiseEventForExternalDepends(),t.getFlowType("")}else i&&"failure"==i.status&&(t.currentStep="chooseStep",t.isDialogOpen=!1,t.isDeleteResume=!1,e.prototype.closeDialogPopup.call(t),e.prototype.focusElement.call(t,".ph-a11y-after-close-focus-elem",150));e.prototype.hideLoader.call(t)},function(i){new Error(i),e.prototype.hideLoader.call(t)})},t.prototype.fieldValidation=function(e){switch(e){case"email":this.emailFieldValidation();break;case"phone":this.phoneFieldValidation();break;case"name":this.nameFieldValidation();break;case"preferredName":this.preferredNameFieldValidation()}},t.prototype.emailFieldValidation=function(){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.contactDetailsErrorObj.email={},this.contactDetailsErrorObj.email.validField=!1,this.contactDetails.email?e.test(this.contactDetails.email)?(this.contactDetailsErrorObj.email.error=!1,this.contactDetailsErrorObj.email.validField=!0):(this.hasErrors=!0,this.contactDetailsErrorObj.email.code="E102",this.contactDetailsErrorObj.email.error=!0):(this.hasErrors=!0,this.contactDetailsErrorObj.email.code="E101",this.contactDetailsErrorObj.email.error=!0)},t.prototype.phoneFieldValidation=function(){this.contactDetailsErrorObj.phone={};var e=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,3})|(\(?\d{2,3}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;if(this.contactDetails.phone){var t=this.contactDetails.phone.replace(/\./g,"");e.test(t)?(this.contactDetailsErrorObj.phone.validField=!0,this.contactDetailsErrorObj.phone.error=!1):(this.contactDetailsErrorObj.phone.code="E101",this.contactDetailsErrorObj.phone.error=!0,this.hasErrors=!0,this.contactDetailsErrorObj.phone.validField=!1)}},t.prototype.nameFieldValidation=function(){this.contactDetailsErrorObj.name={},this.contactDetails.name?(this.contactDetailsErrorObj.name.validField=!0,this.contactDetailsErrorObj.name.error=!1):(this.hasErrors=!0,this.contactDetailsErrorObj.name.validField=!1,this.contactDetailsErrorObj.name.error=!0)},t.prototype.preferredNameFieldValidation=function(){this.contactDetailsErrorObj.preferredName={},this.contactDetails.preferredName?(this.contactDetailsErrorObj.preferredName.validField=!0,this.contactDetailsErrorObj.preferredName.error=!1):(this.hasErrors=!0,this.contactDetailsErrorObj.preferredName.validField=!1,this.contactDetailsErrorObj.preferredName.error=!0)},t.prototype.validation=function(){this.hasErrors=!1,this.resumeInfoConfirmation&&(this.nameFieldValidation(),this.preferredName&&this.preferredNameFieldValidation()),this.emailFieldValidation(),this.phoneFieldValidation()},t.prototype.getFirstAndLastName=function(e){var t=e&&e.split(" ")||[];return t.length>1?{firstname:t[0],lastname:t[t.length-1]}:{firstname:t[0]||"",lastname:""}},t.prototype.configureMoreDetails=function(){var t=this;if(this.validation(),this.hasErrors)setTimeout(function(){t.preferredName&&t.resumeInfoConfirmation&&t.contactDetailsErrorObj.preferredName.error?e.prototype.focusElement.call(t,".ph-a11y-form-control-config-preferred-name",0):t.resumeInfoConfirmation&&t.contactDetailsErrorObj.name.error?e.prototype.focusElement.call(t,".ph-a11y-form-control-config-name",0):t.contactDetailsErrorObj.email.error?e.prototype.focusElement.call(t,".ph-a11y-form-control-config-email",0):!t.contactDetailsErrorObj.email.error&&t.contactDetailsErrorObj.phone.error&&e.prototype.focusElement.call(t,".ph-a11y-form-control-config-phone",0)},50);else{e.prototype.unhideLoader.call(this);var i={};if(i.profile={},i.editType="mergeProfile",i.stepType="contactInfo",i.profile.email=this.contactDetails.email,this.contactDetails.phone&&(i.profile.phone=this.contactDetails.phone),this.resumeInfoConfirmation&&this.contactDetails.name==this.tempFullName)i.profile.firstName=this.profileData.firstName,i.profile.lastName=this.profileData.lastName;else if(this.resumeInfoConfirmation&&this.contactDetails.name){var o=this.getFirstAndLastName(this.contactDetails.name),s=o.firstname,n=o.lastname;i.profile.firstName=s,i.profile.lastName=n}this.resumeInfoConfirmation&&this.preferredName&&this.contactDetails.preferredName&&(i.profile.preferredName=this.contactDetails.preferredName),this.findYourFitContainerService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyCiProfileUpdate,i).then(function(i){if(i&&"success"==i.status)if(t.contactDetailsFailure=!1,t.isContactDetailsConfigured=!1,t.contactDetailsFirstTime=!1,t.profileData.email=t.contactDetails.email,t.contactDetails.name&&(t.profileData.firstName=t.contactDetails.name),t.contactDetails.preferredName&&(t.profileData.preferredName=t.contactDetails.preferredName),t.resumeInfoPopup)t.changeActiveStep(t.resumeConformationSteps[0]);else{t.isCandidateHomeEnabled&&t.triggerSignUpPopup(),t.isCandidateHomeEnabled||(t.contactDetailsPopup=!1),t.isCandidateHomeEnabled||t.disableSocialLogin?t.closePopup():t.showSocialLoginPopup();var o={};o.jobs=[],o.categories=[],t.eventAggregator.publish(f,o),t.commonService.raiseCustomEvent(f,o)}else t.contactDetailsFailure=!0;e.prototype.hideLoader.call(t)})}},t.prototype.showSocialLoginPopup=function(){this.currentStep="userSignIn",this.showSuccessPopup()},t.prototype.openContactDetailsPopup=function(){var e=this;this.handleDialogModal(),this.contactDetailsPopup=!0,this.contactDetailsFailure=!1,this.contactDetailsFirstTime=!1,setTimeout(function(){var t=e.element.querySelector(".ph-a11y-form-control-config-phone");t&&e.contactDetails.phone&&(t.value=e.contactDetails.phone)},200)},t.prototype.resetProfile=function(t){var i=this;e.prototype.unhideLoader.call(this),this.findYourFitContainerService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyDeleteResume,{}).then(function(e){e&&"success"==e.status&&!t?(i.jobSeqNo&&i.isJobFitEnabled&&(i.showMatchScoreButton=!0),i.showFitData=!1,i.raiseEventForExternalDepends(),i.isProfileSyncUpdateFirstTime=!1):e&&"success"==e.status&&i.getFlowType("")}),this.doSocialLogout()},t.prototype.doSocialLogout=function(){var t=this;e.prototype.unhideLoader.call(this),this.findYourFitContainerService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyLogout,{}).then(function(i){i&&"success"==i.status?t.findYourFitContainerService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyValidateJwtToken,{}).then(function(i){if(e.prototype.hideLoader.call(t),i.data&&!i.data.isValidToken){t.isLoggedIn=i.data.isValidToken,t.isAnonymous=i.data.isAnonymous||!1,t.isActiveSession=i.data.isActiveSession||!1,t.isSocialLogin=i.data.isSocialLogin||!1,t.element.querySelector(".ph-popup-area")&&(t.currentStep="chooseStep"),t.isProfileJobsAvailable=!1,t.isOptInChoosen=!1,t.fyfInfoData.isOptInChoosen=t.isOptInChoosen,e.prototype.focusElement.call(t,".ph-a11y-start-btn",250);var o={};o.jobs=[],o.categories=[],t.eventAggregator.publish(f,o),t.commonService.raiseCustomEvent(f,o)}},function(e){new Error(e)}):e.prototype.hideLoader.call(t),e.prototype.raiseEvent.call(t,"social-logout",{})})},t.prototype.raiseEventForExternalDepends=function(){var e=new CustomEvent("ph:bot:removeProfile",{bubbles:!0,detail:{removeProfile:!0}});document.dispatchEvent(e)},t.prototype.triggerSignUpPopup=function(e){this.candidatePopupData={closeSelector:this.element.querySelector(".candidateHomeSignUp")||this.element.querySelector(".ph-a11y-after-close-focus-elem"),triggerPopup:!0,context:"fyf_container",profile:this.profileData,widgetRef:this},e&&this.contactDetailsFirstTime&&(this.candidatePopupData.resumeUploaded=!0),this.candidateLoginPopup=!0},t.prototype.triggerUserConsentPopup=function(){this.userConsentPopup=!0,this.termsError=!1,this.piiConsentError=!1,!this.gdprPreCheck&&(this.acceptTerms=!1),!this.hideUserConsentCheckbox&&(this.savePersonalInfo=!1),!this.consentPrefill&&this.piiConsentData&&this.piiConsentData.forEach(function(e){e&&(e.isChecked=!1)}),this.isButtonDisabled(),e.prototype.hideLoader.call(this),this.addModalPopup(".ph-a11y-after-close-focus-elem",".ph-a11y-popup-start-focus")},t.prototype.isButtonDisabled=function(){var e=this;this.isDisabled=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.isDisabled=!0)})},t.prototype.closeUserConsentPopup=function(t){var i=this;this.userConsentPopup=!1,this.termsError=!1,e.prototype.closeDialogPopup.call(this),t||(this.element.querySelector(".ph-popup-area")?this.currentStep="chooseStep":(this.currentStep="",setTimeout(function(){i.currentStep="uploadResume"},0)),this.removeTempResume(),setTimeout(function(){e.prototype.focusElement.call(i,"#ph-dropzone"),e.prototype.hideLoader.call(i)},0))},t.prototype.removeTempResume=function(){var e=this.resumeData&&this.resumeData.res&&this.resumeData.res.profile&&this.resumeData.res.profile.resumeIdentifier||"";e&&this.findYourFitContainerService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyResumeTempResume,{resumeIdentifier:e}).then(function(e){})},t.prototype.hasPiiErrors=function(){var e=this;this.piiConsentError=!1,this.piiConsentData&&this.piiConsentData.length&&this.piiConsentData.forEach(function(t){t.optional||t.isChecked||(e.piiConsentError=!0)})},t.prototype.submitResume=function(){var t=!1;this.hasPiiErrors(),t=this.piiConsentData&&this.piiConsentData.length?!this.piiConsentError:this.acceptTerms,t?(this.getCvMergeData(),this.destroyEventListeners(),this.getFlowType(h.upload_resume_flow),this.closeUserConsentPopup(!0)):(this.termsError=!0,!(this.piiConsentData&&this.piiConsentData.length)&&e.prototype.focusElement.call(this,".ph-a11y-terms-check-box",50))},t.prototype.termsChanged=function(){this.acceptTerms&&(this.termsError=!1)},t.prototype.subscribeToEventForExternalDepends=function(){var e=this;document.addEventListener("ph:site:removeProfile",function(t){e.resetProfile(!0)}),document.addEventListener("ph:site:fyfProfileUpdate",this.handleProfileUpdateSyncFromBot,!0)},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()}),document.removeEventListener("mouseup",this.handleDropdownOutsideScope,!0),document.removeEventListener("ph:site:removeProfile",this.resetProfile,!0),document.removeEventListener("ph:site:fyfProfileUpdate",this.handleProfileUpdateSyncFromBot,!0),document.removeEventListener("ph:candidateLoggedinEvent",this.handleCandidateLoginEvent),document.removeEventListener(f,this.handleRecomJobsEvent)},t.prototype.getResumeFileSize=function(){return this.commonService.getSiteSettings("resumeUploadFileSizeLimit")},t.prototype.triggerResumeInfoPopup=function(e){var t=this;this.resumeInfoPopup=!0,this.addModalPopup(".ph-a11y-after-close-focus-elem",".ph-a11y-popup-start-focus"),setTimeout(function(){t.changeActiveStep(e)},50)},t.prototype.changeActiveStep=function(t){this.activeStep&&"cancel"!=this.activeStep&&(this.previousActiveStep=this.activeStep),this.activeStep=t,this.resumeInfo&&this.resumeInfo[this.previousActiveStep]&&(this.resumeInfo[this.previousActiveStep].value=""),t&&this.resumeConformationSteps&&-1!=this.resumeConformationSteps.indexOf(t)?this.activeStepIndex=this.resumeConformationSteps.indexOf(t)+1:this.activeStepIndex=0,e.prototype.focusElement.call(this,".ph-a11y-resume-heading",100)},t.prototype.closeResumeInfoPopup=function(t){if("cancel"!=this.activeStep&&!t)return void this.changeActiveStep("cancel");this.handleResumeFlowAfterSubmit(),this.resumeInfoPopup=!1,this.element.removeEventListener("keyup",this.handleEscape),e.prototype.closeDialogPopup.call(this)},t.prototype.addSelectionRemovalSronly=function(e){var t=this;this.selectionRemovalSrText=e,this.selectionRemovalSronly=!0,setTimeout(function(){t.selectionRemovalSronly=!1},100)},t.prototype.updateResults=function(){var e=this;this.resultUpdated=!0,setTimeout(function(){e.resultUpdated=!1},100)},t.prototype.handleResumeFlowAfterSubmit=function(){if(this.destroyEventListeners(),this.savePersonalInfo||this.uniformGdpr)this.isCandidateHomeEnabled?this.triggerSignUpPopup(!0):this.showSocialLoginPopup();else{this.currentStep="chooseStep";var t=this.element.querySelector(".user-profile-info");t&&t.removeAttribute("aria-hidden"),e.prototype.focusElement.call(this,".ph-a11y-after-close-focus-elem",250)}},t.prototype.editResumeInfo=function(){this.populateContactDetails(),this.isDropdownOpen=!1;var e="contactDetails";this.profileDetailsValidation(),!this.savePersonalInfo&&this.gdprConsent&&(e=this.resumeConformationSteps[0]),e&&(this.resumeInfo=this.resumeInfo||new a.ResumeInfoConfirmation(this,l,this.element),this.triggerResumeInfoPopup(e))},t.prototype.profileDetailsValidation=function(){this.profileData.firstName&&this.profileData.email&&(!this.preferredName||this.profileData.preferredName)?this.savePersonalInfo=!1:this.savePersonalInfo=!0},t.prototype.continueSitePersonalization=function(){},t.prototype.getFieldOptions=function(e){if(this.resumeInfo&&this.resumeInfo.getFieldOptions)return this.resumeInfo.getFieldOptions(e)},t.prototype.getActiveIndex=function(e){if(this.resumeInfo&&this.resumeInfo.getFieldOptions)return this.resumeInfo.getActiveIndex(e)},t.prototype.setFieldValue=function(e,t){if(this.resumeInfo&&this.resumeInfo.getFieldOptions)return this.resumeInfo.setFieldValue(e,t)},t.prototype.clearFieldValue=function(){},t.prototype.handleSkip=function(t){this.resumeInfo.skills.suggestedSkills.length&&t?e.prototype.focusElement.call(this,"#suggested-skills-heading",0):this.activeStepIndex>1?e.prototype.focusElement.call(this,"#previous-popup-btn",0):e.prototype.focusElement.call(this,"#next-popup-btn",0)},t.prototype.handleCandidateLoginEvent=function(e){var t=e.detail?e.detail:e;this.flowType="candidateProfile",this.profileData=this.profileData||{},this.profileData.profile=t,this.isAnonymous=!1,this.eventAggregator.publish(f,{context:"profile_Recom_jobs"}),this.commonService.raiseCustomEvent(f,{context:"profile_Recom_jobs"})},t.prototype.handleRecomJobsEvent=function(t){var i=t.detail?t.detail:t;if("find_your_fit"==i.context&&(i.isLastStep||i.isFirstStep)&&this.handleFyfStepFlow(i),"candidateProfile"==i.context&&this.handleFyfStepFlow(i,i.widgetContext),"upload_resume"==i.context&&!this.savePersonalInfo&&this.gdprConsent){this.currentStep="chooseStep";var o=this.isLoggedIn?".ph-a11y-after-close-focus-elem":".ph-a11y-start-btn";e.prototype.focusElement.call(this,o,100)}},t.prototype.handleRecomData=function(e){var t=e.detail?e.detail:e;t.jobs&&t.jobs.length?this.isProfileJobsAvailable=!0:this.isProfileJobsAvailable=!1},__decorate([i.bindable({attribute:"view"
}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),t=__decorate([i.customElement(l),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(v=void 0!==o.CommonService&&o.CommonService)&&v||Object,s.FindYourFitContainerService,n.EventAggregator,"function"==typeof(S=void 0!==o.LocalStorageAPI&&o.LocalStorageAPI)&&S||Object])],t);var v,S}(o.PhenomWidget);t.FindYourFitContainer=v}),define("text!v1/ph-find-your-fit-container.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-find-your-fit-container-v1/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-recom-jobs-browsing-history-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"recomJobsBrowsingHistory",ddoKeyAdd:"addToCartV2",ddoKeyDelete:"deleteFromCartV2",ddoKeyStatusList:"getJobStatusListV2"}}}),define("v3/ph-recom-jobs-browsing-history-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.recomJobsReqObj={keywords:[],categories:[],jobsViewed:[],jobsApplied:null,locations:[],types:[],userProfile:null,landingPages:null,department:""}}return e}();t.RecomJobsBrowsingHistoryModel=i});var __decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-recom-jobs-browsing-history-service",["require","exports","aurelia-framework","ph-common"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.commonService=e}return e.prototype.getRecommendedJobs=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e})},e.prototype.getJobSatusList=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e=__decorate([i.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==o.CommonService&&o.CommonService)&&t||Object])],e);var t}();t.RecomJobsBrowsingHistoryService=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(n=(s<3?r(n):s>3?r(t,i,n):r(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-recom-jobs-browsing-history",["require","exports","aurelia-framework","ph-common","./ph-recom-jobs-browsing-history-config","./ph-recom-jobs-browsing-history-service","./ph-recom-jobs-browsing-history-model","ph-common","aurelia-event-aggregator"],function(e,t,i,o,r,s,n,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c="v3",p="ddoKey",d="ph-recom-jobs-browsing-history-"+c,f="linkedInProfileObj",h="recommended_job_click",u="PHPPPE_GCC",g=function(e){function t(t,i,o,s,n,a,l){var g=e.call(this,t,i,d)||this;return g.commonService=i,g.rjbhService=o,g.rjbhModel=s,g.localStorage=n,g.eventAggregator=a,g.cookieManager=l,g.showProfileJobs=!0,g.jobRecommendations=[],g.jobResults=[],g.user={isLoggedIn:null,userId:"",userType:"",socialProvider:"",isSocialLogin:null,isSiteLogin:null},g.subscribeProfileJobs=function(t){t&&t.jobs&&t.jobs.length&&!g.showProfileJobs?(e.prototype.hideLoader.call(g),g.jobResults=[]):g.getRecommendedJobs()},g.subscribeToLinkedInLogin=function(e){g.getRecommendedJobs(!0)},g.subscribeToLinkedInLogout=function(e){},g.getRecommendedJobs=function(t){var i=g.cookieManager.get(u);if("d"!=i&&"s"!=i){e.prototype.unhideLoader.call(g);var o=g.rjbhModel.recomJobsReqObj,s=g.commonService.getRecommendedTrackCtx();for(var n in s)o[n]=s[n];t&&g.showProfileJobs&&(o.userProfile=g.commonService.getSpecificTrackCtx(f)),g.maxJobs&&(o.recoSize=g.maxJobs),o.isEagerLoad=!0,g.rjbhService.getRecommendedJobs(d,r.WidgetConfig[c][p],o).then(function(t){e.prototype.hideLoader.call(g),g.jobResults=t.jobRecommendations&&t.jobRecommendations.data&&t.jobRecommendations.data.recommendedJobs||[],g.jobResults.length?g.jobWidgetSettingsPromise.then(function(e){g.onDataChange(h)}):e.prototype.handleError.call(g,"")},function(t){new Error(t),e.prototype.hideLoader.call(g),e.prototype.handleError.call(g,"")})}},g}return __extends(t,e),t.prototype.created=function(){},t.prototype.attached=function(){e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this.showProfileJobs&&this.getRecommendedJobs(),e.prototype.subscribeToEvent.call(this,"ph:profileRecomData",this.subscribeProfileJobs),e.prototype.subscribeToEvent.call(this,"li-login",this.subscribeToLinkedInLogin),e.prototype.subscribeToEvent.call(this,"li-logout",this.subscribeToLinkedInLogout)},t.prototype.onDataChange=function(t){e.prototype.onDataChange.call(this,t)},__decorate([i.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([i.bindable,__metadata("design:type",Number)],t.prototype,"maxJobs",void 0),__decorate([i.bindable,__metadata("design:type",Boolean)],t.prototype,"showProfileJobs",void 0),t=__decorate([i.customElement(d),i.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(g=void 0!==o.CommonService&&o.CommonService)&&g||Object,s.RecomJobsBrowsingHistoryService,n.RecomJobsBrowsingHistoryModel,"function"==typeof(m=void 0!==a.LocalStorageAPI&&a.LocalStorageAPI)&&m||Object,l.EventAggregator,"function"==typeof(y=void 0!==o.CookieManager&&o.CookieManager)&&y||Object])],t);var g,m,y}(o.PhenomJobWidget);t.RecomJobsBrowsingHistory=g}),define("text!v3/ph-recom-jobs-browsing-history.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("components",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["v3/ph-global-search","v3/ph-social-share","v2/ph-cookie-popup","v3/ph-recently-viewed-jobs","v1/ph-candidate-login","v1/ph-find-your-fit","v1/ph-email-job","v1/ph-social-connect","v1/ph-import-resume","v1/ph-geo-location","v2/ph-near-by-jobs","v2/ph-profile-recommendations","v1/ph-find-your-fit-container","v3/ph-recom-jobs-browsing-history"]}),define("main",["require","exports","./environment","./components"],function(e,t,i,o){"use strict";function r(e){e.use.standardConfiguration().plugin("ph-common").globalResources(o.default),i.default.debug&&e.use.developmentLogging(),window&&(window.localAurelia=e),window.pht=window.pht||{};for(var t=document.querySelectorAll("div.ph-widget-target[data-widget]"),r=0;r<t.length;r++){var s=t[r];if(s){var n=s.getAttribute("type");if(!n||"static"!=n){var a=s.innerHTML,l=s.getAttribute("as-element"),c=s.getAttribute("view")||"default";a&&a.trim().length&&(pht[l+"-"+c]=a.trim()),s.innerHTML=""}}}e.start().then(function(){return e.enhance({},document.body)})}P.config({longStackTraces:!1,warnings:{wForgottenReturn:!1}}),t.configure=r}),document&&document.body&&document.body.setAttribute("aurelia-app","main");